<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>NEONIX: PASARAN v3.0</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
<style>
:root {
  --neon-cyan: #00f3ff;
  --neon-pink: #ff00c8;
  --neon-green: #00ff66;
  --neon-yellow: #ffcc00;
  --neon-purple: #b300ff;
  --dark: #050a18;
  --darker: #030613;
  --card-bg: rgba(10, 25, 40, 0.85);
  --text: #e0f7ff;
  --transition: all 0.3s ease;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Share Tech Mono', monospace;
  background: var(--darker);
  color: var(--text);
  line-height: 1.7;
  padding: 20px;
  min-height: 100vh;
  overflow-x: hidden;
  position: relative;
  background: linear-gradient(135deg, #030613 0%, #0a1a2a 100%);
}

/* Matrix Rain Effect */
.matrix-rain {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  opacity: 0.1;
  pointer-events: none;
}

/* Header dengan efek glitch */
.header-container {
  text-align: center;
  margin: 20px auto 40px;
  max-width: 900px;
  position: relative;
}

.header {
  font-family: 'Orbitron', sans-serif;
  font-size: 3.5rem;
  color: transparent;
  letter-spacing: 4px;
  text-transform: uppercase;
  position: relative;
  display: inline-block;
  margin-bottom: 10px;
  text-shadow: 0 0 10px var(--neon-cyan), 
               0 0 20px var(--neon-cyan), 
               0 0 30px var(--neon-cyan);
  animation: glitch 5s infinite;
}

.header::before,
.header::after {
  content: "NEONIX SYSTEM";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0.8;
}

.header::before {
  color: var(--neon-pink);
  animation: glitch-effect 3s infinite;
  clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%);
  transform: translate(-2px, -2px);
}

.header::after {
  color: var(--neon-cyan);
  animation: glitch-effect 2s infinite;
  clip-path: polygon(0 60%, 100% 60%, 100% 100%, 0 100%);
  transform: translate(2px, 2px);
}

@keyframes glitch {
  0%, 100% { transform: translate(0); }
  20% { transform: translate(-2px, 2px); }
  40% { transform: translate(-2px, -2px); }
  60% { transform: translate(2px, 2px); }
  80% { transform: translate(2px, -2px); }
}

@keyframes glitch-effect {
  0%, 100% { opacity: 0.8; }
  50% { opacity: 0.3; }
}

.status {
  font-size: 1rem;
  color: var(--neon-green);
  text-shadow: 0 0 5px var(--neon-green);
  margin-top: 5px;
  letter-spacing: 2px;
  font-family: 'Share Tech Mono', monospace;
  background: rgba(0, 30, 60, 0.3);
  padding: 8px 20px;
  border-radius: 15px;
  display: inline-block;
  border: 1px solid var(--neon-green);
  box-shadow: 0 0 15px rgba(0, 255, 102, 0.3);
}

/* Grid Layout Futuristik */
.dashboard-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 25px;
  max-width: 1200px;
  margin: 0 auto;
}

@media (max-width: 968px) {
  .dashboard-grid {
    grid-template-columns: 1fr;
  }
}

/* Card Styles */
.card {
  background: var(--card-bg);
  backdrop-filter: blur(10px);
  border: 1px solid;
  border-radius: 15px;
  padding: 25px;
  position: relative;
  overflow: hidden;
  transition: var(--transition);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(45deg, transparent, rgba(0, 243, 255, 0.1), transparent);
  transform: translateX(-100%);
  transition: transform 0.6s ease;
}

.card:hover {
  transform: translateY(-5px);
}

.card:hover::before {
  transform: translateX(100%);
}

.card-cyan {
  border-color: var(--neon-cyan);
  box-shadow: 0 0 15px rgba(0, 243, 255, 0.3);
}

.card-pink {
  border-color: var(--neon-pink);
  box-shadow: 0 0 15px rgba(255, 0, 200, 0.3);
}

.card-purple {
  border-color: var(--neon-purple);
  box-shadow: 0 0 15px rgba(179, 0, 255, 0.3);
}

.card-title {
  font-family: 'Orbitron', sans-serif;
  font-size: 1.5rem;
  margin-bottom: 20px;
  text-transform: uppercase;
  letter-spacing: 2px;
  display: flex;
  align-items: center;
}

.card-cyan .card-title {
  color: var(--neon-cyan);
  text-shadow: 0 0 10px var(--neon-cyan);
}

.card-pink .card-title {
  color: var(--neon-pink);
  text-shadow: 0 0 10px var(--neon-pink);
}

.card-purple .card-title {
  color: var(--neon-purple);
  text-shadow: 0 0 10px var(--neon-purple);
}

.card-title i {
  margin-right: 15px;
  font-size: 1.8rem;
}

/* Next Draw Card */
.next-draw-content {
  text-align: center;
}

.next-name {
  font-family: 'Orbitron', sans-serif;
  font-size: 2rem;
  margin: 15px 0;
  font-weight: bold;
}

.next-time {
  font-size: 1.2rem;
  margin-bottom: 10px;
}

.countdown {
  font-family: 'Orbitron', monospace;
  font-size: 2.5rem;
  font-weight: bold;
  margin: 20px 0;
  letter-spacing: 2px;
}

.card-cyan .countdown {
  color: var(--neon-yellow);
  text-shadow: 0 0 10px rgba(255, 204, 0, 0.7);
}

.next-desc {
  font-size: 0.9rem;
  opacity: 0.9;
  line-height: 1.6;
}

/* Result Indicator */
.result-indicator {
  display: inline-block;
  padding: 8px 20px;
  border-radius: 20px;
  font-size: 0.9rem;
  margin-top: 15px;
  animation: resultPulse 2s infinite;
}

@keyframes resultPulse {
  0% { opacity: 0.6; }
  50% { opacity: 1; }
  100% { opacity: 0.6; }
}

.result-waiting {
  background: rgba(255, 204, 0, 0.2);
  color: var(--neon-yellow);
  border: 1px solid var(--neon-yellow);
}

.result-available {
  background: rgba(0, 255, 102, 0.2);
  color: var(--neon-green);
  border: 1px solid var(--neon-green);
  animation: resultAvailable 1s infinite;
}

@keyframes resultAvailable {
  0% { box-shadow: 0 0 5px var(--neon-green); }
  50% { box-shadow: 0 0 20px var(--neon-green); }
  100% { box-shadow: 0 0 5px var(--neon-green); }
}

/* Pasaran Selection */
.select-wrapper {
  position: relative;
  margin: 20px 0;
}

.select-wrapper::after {
  content: "â–¼";
  font-size: 12px;
  color: var(--neon-pink);
  position: absolute;
  right: 20px;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: none;
}

select {
  width: 100%;
  padding: 16px 20px;
  background: rgba(0, 30, 60, 0.7);
  color: var(--neon-pink);
  border: 1px solid var(--neon-pink);
  border-radius: 10px;
  font-family: 'Share Tech Mono', monospace;
  font-size: 1rem;
  outline: none;
  cursor: pointer;
  appearance: none;
  transition: var(--transition);
  text-shadow: 0 0 5px var(--neon-pink);
}

select:hover, select:focus {
  background: rgba(0, 40, 80, 0.8);
  box-shadow: 0 0 20px rgba(255, 0, 200, 0.3);
}

/* Output Box */
#output {
  background: rgba(0, 20, 40, 0.7);
  color: var(--neon-cyan);
  padding: 20px;
  border: 1px solid var(--neon-cyan);
  border-left: 5px solid var(--neon-cyan);
  border-radius: 10px;
  font-size: 1rem;
  white-space: pre-line;
  min-height: 120px;
  display: none;
  margin: 25px 0;
  box-shadow: 0 0 15px rgba(0, 243, 255, 0.1);
  animation: fadeIn 0.5s ease;
  line-height: 1.6;
  font-family: 'Share Tech Mono', monospace;
  text-shadow: 0 0 5px var(--neon-cyan);
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 14px 25px;
  background: transparent;
  color: var(--neon-purple);
  text-decoration: none;
  border: 1px solid var(--neon-purple);
  border-radius: 8px;
  font-weight: bold;
  transition: var(--transition);
  cursor: pointer;
  margin-top: 10px;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-family: 'Share Tech Mono', monospace;
  text-shadow: 0 0 5px var(--neon-purple);
  box-shadow: 0 0 15px rgba(179, 0, 255, 0.3);
}

.btn:hover {
  background: var(--neon-purple);
  color: #000;
  box-shadow: 0 0 25px rgba(179, 0, 255, 0.6);
  transform: translateY(-2px);
}

.btn i {
  margin-right: 10px;
}

/* Live Badge */
.live-badge {
  position: fixed;
  top: 20px;
  right: 20px;
  background: var(--neon-pink);
  color: white;
  padding: 8px 20px;
  border-radius: 20px;
  font-size: 0.9rem;
  font-weight: bold;
  animation: livePulse 1.5s infinite;
  z-index: 100;
  box-shadow: 0 0 15px var(--neon-pink);
  display: flex;
  align-items: center;
}

.live-badge i {
  margin-right: 8px;
}

@keyframes livePulse {
  0% { opacity: 0.7; box-shadow: 0 0 10px var(--neon-pink); }
  50% { opacity: 1; box-shadow: 0 0 20px var(--neon-pink); }
  100% { opacity: 0.7; box-shadow: 0 0 10px var(--neon-pink); }
}

/* Volume Control */
.volume-control {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 100;
  background: rgba(0, 30, 60, 0.7);
  border: 1px solid var(--neon-cyan);
  border-radius: 50px;
  padding: 10px;
  display: flex;
  align-items: center;
  backdrop-filter: blur(5px);
  box-shadow: 0 0 15px rgba(0, 243, 255, 0.3);
}

.volume-control i {
  color: var(--neon-cyan);
  margin-right: 10px;
  font-size: 20px;
  cursor: pointer;
  text-shadow: 0 0 5px var(--neon-cyan);
}

.volume-slider {
  width: 100px;
  accent-color: var(--neon-cyan);
}

/* Notification Modal */
.notif-modal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.95);
  z-index: 9998;
  display: none;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(8px);
}

.notif-box {
  background: rgba(10, 15, 30, 0.95);
  border: 2px solid var(--neon-green);
  border-radius: 16px;
  padding: 30px;
  text-align: center;
  box-shadow: 0 0 40px rgba(0, 255, 102, 0.8);
  animation: alertPulse 1.5s infinite;
  max-width: 450px;
  color: #fff;
  font-family: 'Share Tech Mono', monospace;
}

@keyframes alertPulse {
  0% { box-shadow: 0 0 10px var(--neon-green); }
  50% { box-shadow: 0 0 30px var(--neon-green), 0 0 60px rgba(0, 255, 102, 0.9); }
  100% { box-shadow: 0 0 10px var(--neon-green); }
}

.notif-title {
  color: var(--neon-green);
  font-size: 1.8rem;
  font-weight: bold;
  text-shadow: 0 0 10px var(--neon-green);
  margin-bottom: 15px;
  font-family: 'Orbitron', sans-serif;
}

.notif-content {
  margin-top: 15px;
  font-size: 1.1rem;
  line-height: 1.6;
}

.notif-content span {
  display: block;
  margin-bottom: 8px;
}

/* Holographic Elements */
.hologram {
  position: fixed;
  width: 300px;
  height: 300px;
  border-radius: 50%;
  opacity: 0.05;
  z-index: -1;
  filter: blur(40px);
}

.hologram-1 {
  background: var(--neon-cyan);
  top: 10%;
  left: 10%;
  animation: float 15s infinite ease-in-out;
}

.hologram-2 {
  background: var(--neon-pink);
  bottom: 10%;
  right: 10%;
  animation: float 18s infinite ease-in-out reverse;
}

.hologram-3 {
  background: var(--neon-purple);
  top: 50%;
  right: 20%;
  animation: float 12s infinite ease-in-out;
}

@keyframes float {
  0%, 100% { transform: translate(0, 0) rotate(0deg); }
  25% { transform: translate(20px, -20px) rotate(5deg); }
  50% { transform: translate(-15px, 15px) rotate(-5deg); }
  75% { transform: translate(-20px, -15px) rotate(3deg); }
}

/* Responsive */
@media (max-width: 768px) {
  .header {
    font-size: 2.5rem;
  }
  
  .dashboard-grid {
    grid-template-columns: 1fr;
    gap: 20px;
  }
  
  .card {
    padding: 20px;
  }
  
  .next-name {
    font-size: 1.8rem;
  }
  
  .countdown {
    font-size: 2rem;
  }
  
  .volume-control {
    bottom: 10px;
    right: 10px;
  }
  
  .volume-slider {
    width: 80px;
  }
  
  .live-badge {
    top: 10px;
    right: 10px;
    font-size: 0.8rem;
    padding: 6px 15px;
  }
  
  .hologram {
    width: 200px;
    height: 200px;
  }
}
</style>
</head>
<body>

<!-- Holographic Elements -->
<div class="hologram hologram-1"></div>
<div class="hologram hologram-2"></div>
<div class="hologram hologram-3"></div>

<!-- Matrix Rain Effect -->
<canvas class="matrix-rain" id="matrixRain"></canvas>

<!-- Live Badge -->
<div class="live-badge">
  <i class="fas fa-broadcast-tower"></i> LIVE
</div>

<!-- Header -->
<div class="header-container">
  <div class="header">NEONIX SYSTEM</div>
  <div class="status">STATUS: <span style="color:#00ff00">ONLINE</span> | MODE: REAL-TIME</div>
</div>

<!-- Dashboard Grid -->
<div class="dashboard-grid">
  <!-- Next Draw Card -->
  <div class="card card-cyan">
    <div class="card-title"><i class="fas fa-clock"></i> NEXT DRAW</div>
    <div class="next-draw-content">
      <div class="next-name" id="nextName">Loading...</div>
      <div class="next-time" id="nextTime">-</div>
      <div class="countdown" id="countdown">00:00:00</div>
      <div class="result-indicator result-waiting" id="resultIndicator">
        <i class="fas fa-clock"></i> MENUNGGU RESULT
      </div>
      <div class="next-desc" id="nextDesc">Menghitung pasaran berikutnya...</div>
    </div>
  </div>

  <!-- Selection Card -->
  <div class="card card-pink">
    <div class="card-title"><i class="fas fa-list"></i> PILIH PASARAN</div>
    <div class="select-wrapper">
      <select id="pasaran" onchange="runRobot()">
        <option value="">-- PILIH PASARAN --</option>
        <option value="HOKIDRAW">HOKIDRAW</option>
        <option value="toto_macau_pagi">TOTO_MACAU_PAGI</option>
        <option value="hua_hin_0100">HUAHIN_0100</option>
        <option value="kentucky_midday">KENTUCKY_MIDDAY</option>
        <option value="florida_midday">FLORIDA_MIDDAY</option>
        <option value="bangkok_0130">BANGKOK_0130</option>
        <option value="new_york_midday">NEW_YORK_MIDDAY</option>
        <option value="carolina_day">CAROLINA_DAY</option>
        <option value="brunei_02">BRUNEI_02</option>
        <option value="oregon_03">OREGON_03</option>
        <option value="oregon_06">OREGON_06</option>
        <option value="california">CALIFORNIA</option>
        <option value="florida_evening">FLORIDA_EVENING</option>
        <option value="oregon_09">OREGON_09</option>
        <option value="bangkok_0930">BANGKOK_0930</option>
        <option value="new_york_evening">NEW_YORK_EVENING</option>
        <option value="kentucky_evening">KENTUCKY_EVENING</option>
        <option value="carolina_evening">CAROLINA_EVENING</option>
        <option value="toto_cambodia">TOTO_CAMBODIA</option>
        <option value="chelsea_11">CHELSEA_11</option>
        <option value="oregon_12">OREGON_12</option>
        <option value="bullseye">BULLSEYE</option>
        <option value="poipet_12">POIPET_12</option>
        <option value="toto_macau_siang">TOTO_MACAU_SIANG</option>
        <option value="sydney">SYDNEY</option>
        <option value="jakarta_1400">JAKARTA_1400</option>
        <option value="brunei_14">BRUNEI_14</option>
        <option value="chelsea_15">CHELSEA_15</option>
        <option value="toto_macau_5d_sore">TOTO_MACAU_5D_SORE</option>
        <option value="poipet_15">POIPET_15</option>
        <option value="toto_mali_1530">TOTO_MALI_1530</option>
        <option value="toto_macau_sore">TOTO_MACAU_SORE</option>
        <option value="hua_hin_1630">HUAHIN_1630</option>
        <option value="kingkong_4d_sore">KINGKONG_4D_SORE</option>
        <option value="singapore_pools">SINGAPORE_POOLS</option>
        <option value="magnum4d_pools">MAGNUM4D_POOLS</option>
        <option value="chelsea_19">CHELSEA_19</option>
        <option value="toto_macau_malam_I">TOTO_MACAU_MALAM_I</option>
        <option value="poipet_19">POIPET_19</option>
        <option value="pcso">PCSO</option>
        <option value="toto_mali_2030">TOTO_MALI_2030</option>
        <option value="hua_hin_2100">HUAHIN_2100</option>
        <option value="chelsea_21">CHELSEA_21</option>
        <option value="toto_macau_5d_malam">TOTO_MACAU_5D_MALAM</option>
        <option value="nevada">NEVADA</option>
        <option value="brunei_21">BRUNEI_21</option>
        <option value="toto_macau_malam_II">TOTO_MACAU_MALAM_II</option>
        <option value="poipet_22">POIPET_22</option>
        <option value="hongkong">HONGKONG</option>
        <option value="toto_macau_malam_III">TOTO_MACAU_MALAM_III</option>
        <option value="toto_mali_2330">TOTO_MALI_2330</option>
        <option value="jakarta_2330">JAKARTA_2330</option>
        <option value="kingkong_4d_malam">KINGKONG_4D_MALAM</option>
      </select>
    </div>

    <div id="output"></div>
    <button class="btn" id="copyBtn" onclick="copyToClipboard()">
      <i class="fas fa-copy"></i> COPY TO CLIPBOARD
    </button>
  </div>
</div>

<!-- Notification Modal -->
<div class="notif-modal" id="notifModal">
  <div class="notif-box">
    <div class="notif-title">ðŸ”” RESULT TELAH KELUAR!</div>
    <div class="notif-content">
      <span id="notifPasaran">Pasaran</span>
      <span>Result telah tersedia. Silakan periksa!</span>
    </div>
  </div>
</div>

<!-- Volume Control -->
<div class="volume-control">
  <i class="fas fa-volume-up" id="volumeIcon"></i>
  <input type="range" min="0" max="1" step="0.1" value="0.7" class="volume-slider" id="volumeSlider">
</div>

<script>
// =============== VARIABEL GLOBAL ===============
let audioUnlocked = false;
let globalVolume = 0.7;
let lastPlayedTime = 0;
let resultCheckInterval;
const soundCooldown = 300; // ms
let lastResultState = {};

// =============== SOUND EFFECTS ===============
const soundLibrary = {
  select: "https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3",
  confirm: "https://assets.mixkit.co/sfx/preview/mixkit-confirmation-tone-2867.mp3",
  alert: "https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3",
  beep: "https://assets.mixkit.co/sfx/preview/mixkit-beep-space-alarm-3084.mp3",
  click: "https://assets.mixkit.co/sfx/preview/mixkit-mouse-click-close-1113.mp3",
  result: "https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3",
  notification: "https://assets.mixkit.co/sfx/preview/mixkit-positive-notification-951.mp3"
};

// =============== PLAY SOUND FUNCTION ===============
function playSound(soundName, vol = 1) {
  if (!audioUnlocked) return;
  
  // Cooldown untuk mencegah spam suara
  const now = Date.now();
  if (now - lastPlayedTime < soundCooldown) return;
  lastPlayedTime = now;
  
  const audio = new Audio(soundLibrary[soundName]);
  audio.volume = globalVolume * vol;
  audio.play().catch(err => console.warn("Gagal mainkan suara:", err));
  return audio;
}

// =============== VOLUME CONTROL ===============
const volumeSlider = document.getElementById("volumeSlider");
const volumeIcon = document.getElementById("volumeIcon");

volumeSlider.addEventListener("input", function() {
  globalVolume = this.value;
  if (globalVolume > 0) {
    volumeIcon.className = "fas fa-volume-up";
  } else {
    volumeIcon.className = "fas fa-volume-mute";
  }
  
  // Play feedback sound
  playSound('beep', 0.3);
});

// =============== MATRIX RAIN EFFECT ===============
const matrix = document.getElementById("matrixRain");
const matrixCtx = matrix.getContext("2d");
matrix.width = window.innerWidth;
matrix.height = window.innerHeight;

const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789$#@%&!*";
const fontSize = 12;
const columns = matrix.width / fontSize;

const drops = [];
for (let i = 0; i < columns; i++) {
  drops[i] = 1;
}

function drawMatrix() {
  matrixCtx.fillStyle = "rgba(5, 5, 16, 0.05)";
  matrixCtx.fillRect(0, 0, matrix.width, matrix.height);
  
  matrixCtx.fillStyle = "#0f0";
  matrixCtx.font = `${fontSize}px monospace`;
  
  for (let i = 0; i < drops.length; i++) {
    const text = letters[Math.floor(Math.random() * letters.length)];
    matrixCtx.fillText(text, i * fontSize, drops[i] * fontSize);
    
    if (drops[i] * fontSize > matrix.height && Math.random() > 0.975) {
      drops[i] = 0;
    }
    
    drops[i]++;
  }
}

// =============== DAFTAR PASARAN ===============
const pasaranList = [
  { key: "HOKIDRAW", name: "HOKIDRAW", result: "setiap jam", desc: "Result 24 kali dalam sehari dan result keluar per 1 jam sekali ya bosku serta setelah livedraw selesai dilakukan sekitar menit 10-15 ya bosku." },
  { key: "toto_macau_pagi", name: "TOTO_MACAU_PAGI", result: "00:15", desc: "Tutup Pukul 00:00 WIB, Result Pukul 00:15 WIB." },
  { key: "hua_hin_0100", name: "HUAHIN_0100", result: "01:00", desc: "Tutup Pukul 00:45 WIB, Result Pukul 01:00 WIB." },
  { key: "kentucky_midday", name: "KENTUCKY_MIDDAY", result: "00:20", desc: "Tutup Pukul 00:05 WIB, Result Pukul 00:20 WIB." },
  { key: "florida_midday", name: "FLORIDA_MIDDAY", result: "00:30", desc: "Tutup Pukul 00:20 WIB, Result Pukul 00:30 WIB." },
  { key: "bangkok_0130", name: "BANGKOK_0130", result: "01:30", desc: "Tutup Pukul 01:15 WIB, Result Pukul 01:30 WIB." },
  { key: "new_york_midday", name: "NEW_YORK_MIDDAY", result: "01:25", desc: "Tutup Pukul 01:15 WIB, Result Pukul 01:25 WIB." },
  { key: "carolina_day", name: "CAROLINA_DAY", result: "02:00", desc: "Tutup Pukul 01:45 WIB, Result Pukul 02:00 WIB." },
  { key: "brunei_02", name: "BRUNEI_02", result: "02:45", desc: "Tutup Pukul 02:30 WIB, Result Pukul 02:45 WIB." },
  { key: "oregon_03", name: "OREGON_03", result: "03:00", desc: "Tutup Pukul 02:50 WIB, Result Pukul 03:00 WIB." },
  { key: "oregon_06", name: "OREGON_06", result: "06:00", desc: "Tutup Pukul 05:50 WIB, Result Pukul 06:00 WIB." },
  { key: "california", name: "CALIFORNIA", result: "08:30", desc: "Tutup Pukul 08:25 WIB, Result Pukul 08:30 WIB." },
  { key: "florida_evening", name: "FLORIDA_EVENING", result: "08:45", desc: "Tutup Pukul 08:35 WIB, Result Pukul 08:45 WIB." },
  { key: "oregon_09", name: "OREGON_09", result: "09:00", desc: "Tutup Pukul 08:50 WIB, Result Pukul 09:00 WIB." },
  { key: "bangkok_0930", name: "BANGKOK_0930", result: "09:30", desc: "Tutup Pukul 09:15 WIB, Result Pukul 09:30 WIB." },
  { key: "new_york_evening", name: "NEW_YORK_EVENING", result: "09:35", desc: "Tutup Pukul 09:25 WIB, Result Pukul 09:35 WIB." },
  { key: "kentucky_evening", name: "KENTUCKY_EVENING", result: "10:00", desc: "Tutup Pukul 09:45 WIB, Result Pukul 10:00 WIB." },
  { key: "carolina_evening", name: "CAROLINA_EVENING", result: "10:22", desc: "Tutup Pukul 10:17 WIB, Result Pukul 10:22 WIB." },
  { key: "toto_cambodia", name: "TOTO_CAMBODIA", result: "11:00", desc: "Tutup Pukul 10:45 WIB, Result Pukul 11:00 WIB." },
  { key: "chelsea_11", name: "CHELSEA_11", result: "11:15", desc: "Tutup Pukul 11:00 WIB, Result Pukul 11:15 WIB." },
  { key: "oregon_12", name: "OREGON_12", result: "12:00", desc: "Tutup Pukul 11:50 WIB, Result Pukul 12:00 WIB." },
  { key: "bullseye", name: "BULLSEYE", result: "13:15", desc: "Tutup Pukul 13:00 WIB, Result Pukul 13:15 WIB." },
  { key: "poipet_12", name: "POIPET_12", result: "12:30", desc: "Tutup Pukul 12:15 WIB, Result Pukul 12:30 WIB." },
  { key: "toto_macau_siang", name: "TOTO_MACAU_SIANG", result: "13:15", desc: "Tutup Pukul 13:00 WIB, Result Pukul 13:15 WIB." },
  { key: "sydney", name: "SYDNEY", result: "14:05", desc: "Tutup Pukul 13:49 WIB, Result Pukul 14:05 WIB." },
  { key: "jakarta_1400", name: "JAKARTA_1400", result: "14:10", desc: "Tutup Pukul 13:55 WIB, Result Pukul 14:10 WIB." },
  { key: "brunei_14", name: "BRUNEI_14", result: "14:45", desc: "Tutup Pukul 14:30 WIB, Result Pukul 14:45 WIB." },
  { key: "chelsea_15", name: "CHELSEA_15", result: "15:15", desc: "Tutup Pukul 15:00 WIB, Result Pukul 15:15 WIB." },
  { key: "toto_macau_5d_sore", name: "TOTO_MACAU_5D_SORE", result: "15:30", desc: "Tutup Pukul 15:15 WIB, Result Pukul 15:30 WIB." },
  { key: "poipet_15", name: "POIPET_15", result: "15:30", desc: "Tutup Pukul 15:15 WIB, Result Pukul 15:30 WIB." },
  { key: "toto_mali_1530", name: "TOTO_MALI_1530", result: "15:30", desc: "Tutup Pukul 15:15 WIB, Result Pukul 15:30 WIB." },
  { key: "toto_macau_sore", name: "TOTO_MACAU_SORE", result: "16:15", desc: "Tutup Pukul 16:00 WIB, Result Pukul 16:15 WIB." },
  { key: "hua_hin_1630", name: "HUAHIN_1630", result: "16:30", desc: "Tutup Pukul 16:15 WIB, Result Pukul 16:30 WIB." },
  { key: "kingkong_4d_sore", name: "KINGKONG_4D_SORE", result: "17:15", desc: "Tutup Pukul 17:00 WIB, Result Pukul 17:15 WIB." },
  { key: "singapore_pools", name: "SINGAPORE_POOLS", result: "17:45", desc: "Tutup Pukul 17:30 WIB, Result Pukul 17:45 WIB." },
  { key: "magnum4d_pools", name: "MAGNUM4D_POOLS", result: "18:40", desc: "Tutup Pukul 18:10 WIB, Result Pukul 18:40 WIB." },
  { key: "chelsea_19", name: "CHELSEA_19", result: "19:15", desc: "Tutup Pukul 19:00 WIB, Result Pukul 19:15 WIB." },
  { key: "toto_macau_malam_I", name: "TOTO_MACAU_MALAM_I", result: "19:15", desc: "Tutup Pukul 19:00 WIB, Result Pukul 19:15 WIB." },
  { key: "poipet_19", name: "POIPET_19", result: "19:45", desc: "Tutup Pukul 19:30 WIB, Result Pukul 19:45 WIB." },
  { key: "pcso", name: "PCSO", result: "20:10", desc: "Tutup Pukul 19:50 WIB, Result Pukul 20:10 WIB." },
  { key: "toto_mali_2030", name: "TOTO_MALI_2030", result: "20:30", desc: "Tutup Pukul 20:15 WIB, Result Pukul 20:30 WIB." },
  { key: "hua_hin_2100", name: "HUAHIN_2100", result: "21:00", desc: "Tutup Pukul 20:45 WIB, Result Pukul 21:00 WIB." },
  { key: "chelsea_21", name: "CHELSEA_21", result: "21:15", desc: "Tutup Pukul 21:00 WIB, Result Pukul 21:15 WIB." },
  { key: "toto_macau_5d_malam", name: "TOTO_MACAU_5D_MALAM", result: "21:30", desc: "Tutup Pukul 21:15 WIB, Result Pukul 21:30 WIB." },
  { key: "nevada", name: "NEVADA", result: "21:30", desc: "Tutup Pukul 21:15 WIB, Result Pukul 21:30 WIB." },
  { key: "brunei_21", name: "BRUNEI_21", result: "21:45", desc: "Tutup Pukul 21:30 WIB, Result Pukul 21:45 WIB." },
  { key: "toto_macau_malam_II", name: "TOTO_MACAU_MALAM_II", result: "22:15", desc: "Tutup Pukul 22:00 WIB, Result Pukul 22:15 WIB." },
  { key: "poipet_22", name: "POIPET_22", result: "22:45", desc: "Tutup Pukul 22:30 WIB, Result Pukul 22:45 WIB." },
  { key: "hongkong", name: "HONGKONG", result: "23:15", desc: "Tutup Pukul 22:59 WIB, Result Pukul 23:15 WIB." },
  { key: "toto_macau_malam_III", name: "TOTO_MACAU_MALAM_III", result: "23:15", desc: "Tutup Pukul 23:00 WIB, Result Pukul 23:15 WIB." },
  { key: "toto_mali_2330", name: "TOTO_MALI_2330", result: "23:30", desc: "Tutup Pukul 23:15 WIB, Result Pukul 23:30 WIB." },
  { key: "jakarta_2330", name: "JAKARTA_2330", result: "23:40", desc: "Tutup Pukul 23:25 WIB, Result Pukul 23:40 WIB." },
  { key: "kingkong_4d_malam", name: "KINGKONG_4D_MALAM", result: "23:45", desc: "Tutup Pukul 23:30 WIB, Result Pukul 23:45 WIB." }
];

const jadwal = {};
pasaranList.forEach(p => {
  jadwal[p.key] = `Pasaran : ${p.name}\n${p.desc}`;
});

let currentText = "";

function runRobot() {
  const value = document.getElementById("pasaran").value;
  const output = document.getElementById("output");
  const copyBtn = document.getElementById("copyBtn");

  if (!value) {
    output.style.display = "none";
    copyBtn.style.display = "none";
    return;
  }

  // Play sound effect
  playSound('select', 0.7);
  
  currentText = jadwal[value];
  output.textContent = currentText;
  output.style.display = "block";
  copyBtn.style.display = "inline-block";

  localStorage.setItem("lastPasaran", value);
}

function copyToClipboard() {
  if (!currentText) return;

  const textarea = document.createElement("textarea");
  textarea.value = currentText;
  document.body.appendChild(textarea);
  textarea.select();
  document.execCommand("copy");
  document.body.removeChild(textarea);

  playSound('confirm', 0.6);

  const btn = document.getElementById("copyBtn");
  const original = btn.innerHTML;
  btn.innerHTML = '<i class="fas fa-check"></i> COPIED!';

  setTimeout(() => btn.innerHTML = original, 1500);
}

// =============== FUNGSI PENGECEKAN RESULT ===============
function checkIfResultAvailable() {
  const now = new Date();
  const currentTime = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
  
  pasaranList.forEach(pasaran => {
    if (pasaran.result !== "setiap jam") {
      const [h, m] = pasaran.result.split(':').map(Number);
      const resultTime = h * 3600 + m * 60;
      
      // Jika waktu saat ini 5 menit setelah result time
      if (currentTime >= resultTime && currentTime <= resultTime + 300) {
        // Jika result belum pernah diumumkan untuk pasaran ini
        if (!lastResultState[pasaran.key] || lastResultState[pasaran.key] < now.getDate()) {
          // Tandai result sudah diumumkan hari ini
          lastResultState[pasaran.key] = now.getDate();
          
          // Tampilkan notifikasi
          showResultNotification(pasaran.name);
        }
      }
    }
  });
}

function showResultNotification(pasaranName) {
  const notifModal = document.getElementById("notifModal");
  const notifPasaran = document.getElementById("notifPasaran");
  
  notifPasaran.textContent = pasaranName;
  notifModal.style.display = "flex";
  
  // Mainkan suara notifikasi
  playSound('result', 0.8);
  
  // Update UI untuk menunjukkan result tersedia
  const resultIndicator = document.getElementById("resultIndicator");
  resultIndicator.className = "result-indicator result-available";
  resultIndicator.innerHTML = `<i class="fas fa-check-circle"></i> RESULT TERSEDIA`;
  
  // Sembunyikan notifikasi setelah 5 detik
  setTimeout(() => {
    notifModal.style.display = "none";
  }, 5000);
}

// =============== UPDATE NEXT DRAW ===============
function updateNextDraw() {
  const now = new Date();
  const currentSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();

  let next = null;
  let minDiff = Infinity;

  pasaranList
    .filter(p => p.result !== "setiap jam")
    .forEach(p => {
      const [h, m] = p.result.split(':').map(Number);
      const resultSec = h * 3600 + m * 60;
      let diff = resultSec - currentSec;
      if (diff < 0) diff += 86400;

      if (diff < minDiff) {
        minDiff = diff;
        next = p;
      }
    });

  if (next) {
    const h = Math.floor(minDiff / 3600);
    const m = Math.floor((minDiff % 3600) / 60);
    const s = minDiff % 60;

    document.getElementById("nextName").textContent = next.name;
    document.getElementById("nextTime").textContent = `RESULT: ${next.result} WIB`;
    document.getElementById("countdown").textContent = `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
    document.getElementById("nextDesc").textContent = next.desc;
  }
}

// =============== INISIALISASI ===============
window.addEventListener("load", () => {
  updateNextDraw();
  const last = localStorage.getItem("lastPasaran");
  if (last) document.getElementById("pasaran").value = last;
  
  // Mulai matrix rain effect
  setInterval(drawMatrix, 50);
  
  // Update countdown setiap detik
  setInterval(updateNextDraw, 1000);
  
  // Cek result setiap 10 detik
  resultCheckInterval = setInterval(checkIfResultAvailable, 10000);
});

// =============== NOTIFIKASI OTOMATIS ===============
const notifModal = document.getElementById("notifModal");

notifModal.addEventListener("click", () => {
  notifModal.style.display = "none";
  playSound('click', 0.5);
});

document.querySelector('.notif-box').addEventListener('click', e => e.stopPropagation());

// Auto unlock audio jika sudah pernah diunlock
if (localStorage.getItem("audioUnlocked") === "true") {
  audioUnlocked = true;
  document.getElementById("audioUnlock").style.display = "none";
}
</script>
</body>
</html>
