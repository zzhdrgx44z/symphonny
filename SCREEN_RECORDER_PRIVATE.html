<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Screen Recorder ULTRA - Enterprise Cloud Pro</title>
    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* === ULTRA PREMIUM VARIABLES === */
        :root {
            --ultra-primary: #6366f1;
            --ultra-secondary: #8b5cf6;
            --ultra-accent: #ec4899;
            --ultra-success: #10b981;
            --ultra-danger: #ef4444;
            --ultra-warning: #f59e0b;
            --ultra-info: #3b82f6;
            
            --gradient-primary: linear-gradient(135deg, #6366f1 0%, #8b5cf6 25%, #ec4899 50%, #f59e0b 75%, #10b981 100%);
            --gradient-dark: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #2e1065 100%);
            --gradient-glass: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            
            --shadow-ultra: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            --shadow-glow: 0 0 50px rgba(99, 102, 241, 0.3);
            --shadow-neon: 0 0 30px rgba(236, 72, 153, 0.4);
            
            --radius-xl: 24px;
            --radius-lg: 20px;
            --radius-md: 16px;
            --radius-sm: 12px;
            
            --transition-ultra: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-smooth: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        /* === GLOBAL RESET & BASE === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            scroll-behavior: smooth;
            overflow-x: hidden;
        }

        body {
            font-family: 'Inter', 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--gradient-dark);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            line-height: 1.6;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* === ULTRA BACKGROUND EFFECTS === */
        .ultra-bg-effects {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            pointer-events: none;
        }

        .bg-gradient-1 {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 80%, rgba(99, 102, 241, 0.15) 0%, transparent 50%);
        }

        .bg-gradient-2 {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 80% 20%, rgba(236, 72, 153, 0.15) 0%, transparent 50%);
        }

        .bg-gradient-3 {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 40% 40%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
        }

        .bg-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            mask-image: radial-gradient(circle at center, black 30%, transparent 70%);
            -webkit-mask-image: radial-gradient(circle at center, black 30%, transparent 70%);
        }

        .floating-particles {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .particle {
            position: absolute;
            background: var(--gradient-primary);
            border-radius: 50%;
            opacity: 0.1;
            filter: blur(20px);
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(100px, 100px) rotate(90deg); }
            50% { transform: translate(0, 200px) rotate(180deg); }
            75% { transform: translate(-100px, 100px) rotate(270deg); }
        }

        /* === ULTRA CONTAINER === */
        .ultra-container {
            max-width: 2000px;
            margin: 0 auto;
            padding: 30px;
            position: relative;
            z-index: 1;
        }

        /* === ULTRA HEADER === */
        .ultra-header {
            background: var(--gradient-glass);
            backdrop-filter: blur(40px) saturate(200%);
            -webkit-backdrop-filter: blur(40px) saturate(200%);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: var(--radius-xl);
            padding: 40px 50px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-ultra);
            animation: slideDown 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .ultra-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gradient-primary);
            animation: shimmer 3s infinite;
        }

        .ultra-header::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-primary);
            opacity: 0.02;
            z-index: -1;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .header-super {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo-ultra {
            display: flex;
            align-items: center;
            gap: 20px;
            flex: 1;
        }

        .logo-icon {
            width: 80px;
            height: 80px;
            background: var(--gradient-primary);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            position: relative;
            animation: pulseGlow 3s infinite;
            box-shadow: var(--shadow-glow);
        }

        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 30px rgba(99, 102, 241, 0.3); }
            50% { box-shadow: 0 0 60px rgba(236, 72, 153, 0.4); }
        }

        .brand-ultra h1 {
            font-size: 3.5rem;
            font-weight: 900;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            line-height: 1.2;
            letter-spacing: -0.5px;
            position: relative;
            display: inline-block;
        }

        .brand-ultra h1::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--gradient-primary);
            border-radius: 3px;
        }

        .tagline-ultra {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
            margin-top: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tagline-ultra i {
            color: var(--ultra-accent);
        }

        .badge-collection {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .badge-ultra {
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
            border: 2px solid transparent;
            background-clip: padding-box;
            position: relative;
            transition: var(--transition-ultra);
            animation: floatBadge 3s ease-in-out infinite;
        }

        .badge-ultra:nth-child(1) {
            animation-delay: 0s;
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.1));
            border-color: rgba(245, 158, 11, 0.3);
            color: #fbbf24;
        }

        .badge-ultra:nth-child(2) {
            animation-delay: 0.5s;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(139, 92, 246, 0.1));
            border-color: rgba(139, 92, 246, 0.3);
            color: #a78bfa;
        }

        .badge-ultra:nth-child(3) {
            animation-delay: 1s;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1));
            border-color: rgba(16, 185, 129, 0.3);
            color: #34d399;
        }

        @keyframes floatBadge {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .header-cloud-status {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-lg);
            padding: 25px;
            backdrop-filter: blur(20px);
            width: 100%;
            margin-top: 20px;
        }

        .cloud-status-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .cloud-icon-ultra {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #4285f4, #34a853);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .cloud-icon-ultra::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .storage-bar-ultra {
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            overflow: hidden;
            margin-top: 15px;
            position: relative;
        }

        .storage-fill-ultra {
            height: 100%;
            background: var(--gradient-primary);
            width: 65%;
            position: relative;
            transition: width 1s ease;
        }

        .storage-fill-ultra::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.3), 
                transparent);
            animation: shimmer 2s infinite;
        }

        /* === ULTRA MAIN GRID === */
        .ultra-main-grid {
            display: grid;
            grid-template-columns: 1.5fr 0.5fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        @media (max-width: 1400px) {
            .ultra-main-grid {
                grid-template-columns: 1fr;
            }
        }

        /* === ULTRA RECORDER PANEL === */
        .ultra-recorder-panel {
            background: var(--gradient-glass);
            backdrop-filter: blur(40px) saturate(200%);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: var(--radius-xl);
            padding: 40px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-ultra);
            animation: slideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.2s both;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .ultra-recorder-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gradient-primary);
        }

        .video-container-ultra {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--radius-lg);
            overflow: hidden;
            aspect-ratio: 16/9;
            margin-bottom: 40px;
            position: relative;
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.4);
        }

        .video-overlay-ultra {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(99, 102, 241, 0.1) 0%, 
                rgba(139, 92, 246, 0.1) 50%,
                rgba(236, 72, 153, 0.1) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 30px;
            padding: 40px;
            text-align: center;
        }

        .video-overlay-ultra i {
            font-size: 5rem;
            opacity: 0.5;
            animation: float 6s ease-in-out infinite;
        }

        .recording-status-ultra {
            position: absolute;
            top: 30px;
            left: 30px;
            background: rgba(239, 68, 68, 0.95);
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            display: none;
            align-items: center;
            gap: 15px;
            font-weight: 700;
            backdrop-filter: blur(20px);
            box-shadow: 0 10px 40px rgba(239, 68, 68, 0.4);
            animation: pulse 2s infinite;
            z-index: 10;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .recording-dot-ultra {
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            animation: pulse 1s infinite;
        }

        /* === ULTRA CONTROLS === */
        .controls-ultra {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }

        @media (max-width: 1200px) {
            .controls-ultra {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .controls-ultra {
                grid-template-columns: 1fr;
            }
        }

        .btn-ultra {
            padding: 25px 30px;
            border: none;
            border-radius: var(--radius-lg);
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            position: relative;
            overflow: hidden;
            min-height: 80px;
            backdrop-filter: blur(10px);
            border: 2px solid transparent;
            background-clip: padding-box;
        }

        .btn-ultra::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            transition: left 0.7s;
        }

        .btn-ultra:hover::before {
            left: 100%;
        }

        .btn-ultra.record {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            box-shadow: 0 15px 40px rgba(239, 68, 68, 0.3);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .btn-ultra.record:hover:not(:disabled) {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 60px rgba(239, 68, 68, 0.5);
        }

        .btn-ultra.stop {
            background: linear-gradient(135deg, #475569 0%, #334155 100%);
            color: white;
            box-shadow: 0 15px 40px rgba(71, 85, 105, 0.2);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .btn-ultra.stop:hover:not(:disabled) {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 60px rgba(71, 85, 105, 0.3);
        }

        .btn-ultra.download {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            box-shadow: 0 15px 40px rgba(16, 185, 129, 0.2);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .btn-ultra.download:hover:not(:disabled) {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 60px rgba(16, 185, 129, 0.3);
        }

        .btn-ultra.cloud {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            box-shadow: 0 15px 40px rgba(59, 130, 246, 0.2);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .btn-ultra.cloud:hover:not(:disabled) {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 60px rgba(59, 130, 246, 0.3);
        }

        .btn-ultra:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        /* === ULTRA STATS DASHBOARD === */
        .stats-dashboard-ultra {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin: 40px 0;
        }

        @media (max-width: 1200px) {
            .stats-dashboard-ultra {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 640px) {
            .stats-dashboard-ultra {
                grid-template-columns: 1fr;
            }
        }

        .stat-card-ultra {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-lg);
            padding: 30px;
            transition: var(--transition-ultra);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .stat-card-ultra:hover {
            transform: translateY(-10px);
            border-color: rgba(255, 255, 255, 0.2);
            box-shadow: var(--shadow-glow);
        }

        .stat-card-ultra::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gradient-primary);
        }

        .stat-value-ultra {
            font-family: 'SF Mono', 'Cascadia Code', 'Monaco', monospace;
            font-size: 2.8rem;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
            line-height: 1;
        }

        .stat-label-ultra {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* === ULTRA SETTINGS PANEL === */
        .ultra-settings-panel {
            background: var(--gradient-glass);
            backdrop-filter: blur(40px) saturate(200%);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: var(--radius-xl);
            padding: 40px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-ultra);
            animation: slideRight 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.4s both;
        }

        @keyframes slideRight {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .section-header-ultra {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 30px;
            color: white;
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            padding-bottom: 15px;
        }

        .section-header-ultra::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100px;
            height: 3px;
            background: var(--gradient-primary);
            border-radius: 3px;
        }

        /* === ULTRA STORAGE SELECTOR === */
        .storage-selector-ultra {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }

        @media (max-width: 1024px) {
            .storage-selector-ultra {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 640px) {
            .storage-selector-ultra {
                grid-template-columns: 1fr;
            }
        }

        .storage-option-ultra {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-lg);
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
            min-height: 220px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .storage-option-ultra:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: var(--shadow-glow);
        }

        .storage-option-ultra.active {
            border-color: var(--ultra-success);
            background: linear-gradient(135deg, 
                rgba(16, 185, 129, 0.1) 0%, 
                rgba(16, 185, 129, 0.05) 100%);
            animation: pulseBorder 2s infinite;
        }

        @keyframes pulseBorder {
            0%, 100% { border-color: rgba(16, 185, 129, 0.8); }
            50% { border-color: rgba(16, 185, 129, 0.3); }
        }

        .storage-icon-ultra {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .storage-option-ultra h4 {
            font-size: 1.3rem;
            color: white;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .storage-option-ultra p {
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 15px;
            flex: 1;
        }

        .storage-badge-ultra {
            display: inline-block;
            padding: 8px 20px;
            background: linear-gradient(135deg, 
                rgba(59, 130, 246, 0.2), 
                rgba(59, 130, 246, 0.1));
            color: #60a5fa;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 700;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        /* === ULTRA QUALITY SELECTOR === */
        .quality-selector-ultra {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            padding: 30px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .quality-options-ultra {
            display: grid;
            gap: 15px;
        }

        .quality-option-ultra {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition-ultra);
            border: 1px solid transparent;
        }

        .quality-option-ultra:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.1);
            transform: translateX(10px);
        }

        .quality-option-ultra.selected {
            background: linear-gradient(135deg, 
                rgba(59, 130, 246, 0.1), 
                rgba(59, 130, 246, 0.05));
            border-color: rgba(59, 130, 246, 0.3);
        }

        .quality-option-ultra input[type="radio"] {
            appearance: none;
            width: 24px;
            height: 24px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            cursor: pointer;
            position: relative;
            flex-shrink: 0;
        }

        .quality-option-ultra input[type="radio"]:checked {
            border-color: var(--ultra-info);
            background: var(--ultra-info);
        }

        .quality-option-ultra input[type="radio"]:checked::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
        }

        .quality-label-ultra {
            flex: 1;
            color: white;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .quality-badge-ultra {
            padding: 8px 20px;
            background: linear-gradient(135deg, 
                rgba(245, 158, 11, 0.2), 
                rgba(245, 158, 11, 0.1));
            color: #fbbf24;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 700;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        /* === ULTRA VIDEO LIBRARY === */
        .ultra-library {
            background: var(--gradient-glass);
            backdrop-filter: blur(40px) saturate(200%);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: var(--radius-xl);
            padding: 50px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-ultra);
            animation: slideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.6s both;
        }

        .library-header-ultra {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 30px;
        }

        .library-controls-ultra {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-box-ultra {
            position: relative;
            min-width: 300px;
            flex: 1;
        }

        .search-box-ultra input {
            width: 100%;
            padding: 18px 25px 18px 55px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            color: white;
            font-size: 1.1rem;
            transition: var(--transition-ultra);
        }

        .search-box-ultra input:focus {
            outline: none;
            border-color: var(--ultra-info);
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
            background: rgba(255, 255, 255, 0.08);
        }

        .search-box-ultra i {
            position: absolute;
            left: 25px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.5);
            font-size: 1.2rem;
        }

        .filter-tabs-ultra {
            display: flex;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50px;
            padding: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .filter-tab-ultra {
            padding: 12px 30px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            border-radius: 50px;
            transition: var(--transition-ultra);
            font-weight: 600;
            white-space: nowrap;
        }

        .filter-tab-ultra:hover {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }

        .filter-tab-ultra.active {
            background: linear-gradient(135deg, var(--ultra-primary), var(--ultra-secondary));
            color: white;
            box-shadow: 0 5px 20px rgba(99, 102, 241, 0.3);
        }

        /* === ULTRA VIDEO GRID === */
        .video-grid-ultra {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
            max-height: 800px;
            overflow-y: auto;
            padding: 20px;
        }

        .video-grid-ultra::-webkit-scrollbar {
            width: 10px;
        }

        .video-grid-ultra::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .video-grid-ultra::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 10px;
        }

        .video-grid-ultra::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--ultra-accent), var(--ultra-warning));
        }

        .video-card-ultra {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-lg);
            overflow: hidden;
            transition: var(--transition-smooth);
            position: relative;
            animation: fadeInUp 0.5s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .video-card-ultra:hover {
            transform: translateY(-15px) scale(1.02);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: var(--shadow-ultra);
        }

        .video-thumbnail-ultra {
            height: 220px;
            background: var(--gradient-primary);
            position: relative;
            overflow: hidden;
        }

        .video-thumbnail-ultra::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(99, 102, 241, 0.8) 0%, 
                rgba(139, 92, 246, 0.6) 50%,
                rgba(236, 72, 153, 0.4) 100%);
        }

        .video-badges-ultra {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            gap: 10px;
            z-index: 1;
            flex-wrap: wrap;
        }

        .video-badge-ultra {
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 700;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .video-badge-ultra.quality {
            background: linear-gradient(135deg, 
                rgba(245, 158, 11, 0.2), 
                rgba(245, 158, 11, 0.1));
            color: #fbbf24;
            border-color: rgba(245, 158, 11, 0.3);
        }

        .video-badge-ultra.cloud {
            background: linear-gradient(135deg, 
                rgba(59, 130, 246, 0.2), 
                rgba(59, 130, 246, 0.1));
            color: #60a5fa;
            border-color: rgba(59, 130, 246, 0.3);
        }

        .video-info-ultra {
            padding: 30px;
        }

        .video-title-ultra {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: white;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .video-meta-ultra {
            display: grid;
            gap: 12px;
            margin-bottom: 25px;
        }

        .meta-item-ultra {
            display: flex;
            align-items: center;
            gap: 12px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.95rem;
        }

        .video-actions-ultra {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .action-btn-ultra {
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-sm);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: var(--transition-ultra);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .action-btn-ultra:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        .action-btn-ultra.cloud-btn {
            background: linear-gradient(135deg, 
                rgba(59, 130, 246, 0.2), 
                rgba(59, 130, 246, 0.1));
            color: #60a5fa;
            border-color: rgba(59, 130, 246, 0.3);
        }

        .action-btn-ultra.cloud-btn:hover {
            background: linear-gradient(135deg, 
                rgba(59, 130, 246, 0.3), 
                rgba(59, 130, 246, 0.2));
        }

        /* === ULTRA MODALS === */
        .modal-overlay-ultra {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            padding: 30px;
            backdrop-filter: blur(20px);
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content-ultra {
            background: var(--gradient-glass);
            backdrop-filter: blur(40px) saturate(200%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-xl);
            padding: 50px;
            max-width: 1200px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalSlideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-ultra);
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-100px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header-ultra {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .modal-title-ultra {
            font-size: 2.5rem;
            font-weight: 800;
            color: white;
            display: flex;
            align-items: center;
            gap: 20px;
            flex: 1;
        }

        .close-modal-ultra {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-md);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition-ultra);
            font-size: 1.2rem;
        }

        .close-modal-ultra:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        /* === ULTRA PROGRESS OVERLAY === */
        .progress-overlay-ultra {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.98);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 40px;
            backdrop-filter: blur(30px);
            animation: fadeIn 0.3s ease;
        }

        .progress-container-ultra {
            background: var(--gradient-glass);
            backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-xl);
            padding: 60px;
            width: 90%;
            max-width: 600px;
            text-align: center;
            box-shadow: var(--shadow-ultra);
        }

        .progress-title-ultra {
            font-size: 2rem;
            margin-bottom: 30px;
            color: white;
            font-weight: 700;
        }

        .progress-bar-ultra {
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            overflow: hidden;
            margin: 40px 0;
        }

        .progress-fill-ultra {
            height: 100%;
            background: var(--gradient-primary);
            width: 0%;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .progress-fill-ultra::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.4), 
                transparent);
            animation: shimmer 2s infinite;
        }

        /* === ULTRA MESSAGES === */
        .message-container-ultra {
            position: fixed;
            top: 40px;
            right: 40px;
            z-index: 10001;
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 500px;
        }

        .message-ultra {
            background: var(--gradient-glass);
            backdrop-filter: blur(20px);
            border: 1px solid;
            border-radius: var(--radius-lg);
            padding: 25px;
            display: none;
            align-items: center;
            gap: 20px;
            animation: slideInRight 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-ultra);
            transform-origin: top right;
        }

        .message-ultra.success {
            border-color: rgba(16, 185, 129, 0.3);
            background: linear-gradient(135deg, 
                rgba(16, 185, 129, 0.1), 
                rgba(16, 185, 129, 0.05));
        }

        .message-ultra.error {
            border-color: rgba(239, 68, 68, 0.3);
            background: linear-gradient(135deg, 
                rgba(239, 68, 68, 0.1), 
                rgba(239, 68, 68, 0.05));
        }

        .message-ultra.warning {
            border-color: rgba(245, 158, 11, 0.3);
            background: linear-gradient(135deg, 
                rgba(245, 158, 11, 0.1), 
                rgba(245, 158, 11, 0.05));
        }

        .message-ultra.info {
            border-color: rgba(59, 130, 246, 0.3);
            background: linear-gradient(135deg, 
                rgba(59, 130, 246, 0.1), 
                rgba(59, 130, 246, 0.05));
        }

        .message-icon-ultra {
            font-size: 2.2rem;
            flex-shrink: 0;
        }

        .message-ultra.success .message-icon-ultra {
            color: var(--ultra-success);
        }

        .message-ultra.error .message-icon-ultra {
            color: var(--ultra-danger);
        }

        .message-ultra.warning .message-icon-ultra {
            color: var(--ultra-warning);
        }

        .message-ultra.info .message-icon-ultra {
            color: var(--ultra-info);
        }

        /* === ULTRA FOOTER === */
        .ultra-footer {
            text-align: center;
            padding: 50px 30px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 60px;
            position: relative;
            overflow: hidden;
        }

        .footer-links-ultra {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .footer-link-ultra {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: var(--transition-ultra);
            font-weight: 500;
            position: relative;
            padding: 10px 0;
        }

        .footer-link-ultra:hover {
            color: white;
        }

        .footer-link-ultra::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--gradient-primary);
            transition: width 0.3s ease;
        }

        .footer-link-ultra:hover::after {
            width: 100%;
        }

        /* === ULTRA RESPONSIVE === */
        @media (max-width: 1600px) {
            .ultra-container {
                padding: 25px;
            }
            
            .ultra-header,
            .ultra-recorder-panel,
            .ultra-settings-panel,
            .ultra-library {
                padding: 35px;
            }
        }

        @media (max-width: 1200px) {
            .ultra-main-grid {
                gap: 30px;
            }
            
            .brand-ultra h1 {
                font-size: 2.8rem;
            }
            
            .controls-ultra {
                gap: 15px;
            }
            
            .btn-ultra {
                padding: 22px 25px;
                min-height: 70px;
            }
        }

        @media (max-width: 992px) {
            .ultra-container {
                padding: 20px;
            }
            
            .ultra-header,
            .ultra-recorder-panel,
            .ultra-settings-panel,
            .ultra-library {
                padding: 30px;
            }
            
            .brand-ultra h1 {
                font-size: 2.3rem;
            }
            
            .logo-icon {
                width: 70px;
                height: 70px;
                font-size: 32px;
            }
            
            .badge-ultra {
                padding: 10px 20px;
                font-size: 0.85rem;
            }
            
            .section-header-ultra {
                font-size: 1.6rem;
            }
        }

        @media (max-width: 768px) {
            .ultra-header {
                padding: 25px;
            }
            
            .header-super {
                flex-direction: column;
                text-align: center;
            }
            
            .logo-ultra {
                justify-content: center;
            }
            
            .badge-collection {
                justify-content: center;
            }
            
            .stats-dashboard-ultra,
            .storage-selector-ultra,
            .controls-ultra {
                grid-template-columns: 1fr;
            }
            
            .video-grid-ultra {
                grid-template-columns: 1fr;
            }
            
            .library-header-ultra {
                flex-direction: column;
                align-items: stretch;
            }
            
            .library-controls-ultra {
                flex-direction: column;
            }
            
            .search-box-ultra {
                min-width: 100%;
            }
            
            .filter-tabs-ultra {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 576px) {
            .ultra-container {
                padding: 15px;
            }
            
            .ultra-header,
            .ultra-recorder-panel,
            .ultra-settings-panel,
            .ultra-library {
                padding: 25px;
            }
            
            .brand-ultra h1 {
                font-size: 2rem;
            }
            
            .logo-icon {
                width: 60px;
                height: 60px;
                font-size: 28px;
            }
            
            .btn-ultra {
                padding: 20px;
                font-size: 1rem;
            }
            
            .modal-content-ultra {
                padding: 30px;
            }
            
            .progress-container-ultra {
                padding: 40px;
            }
        }

        /* === ULTRA UTILITY CLASSES === */
        .clickable {
            cursor: pointer;
            transition: transform 0.2s ease, opacity 0.2s ease;
        }

        .clickable:hover {
            opacity: 0.9;
        }

        .clickable:active {
            transform: scale(0.98);
        }

        .hidden {
            display: none !important;
        }

        .loading {
            position: relative;
            pointer-events: none;
            opacity: 0.7;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 30px;
            height: 30px;
            margin: -15px 0 0 -15px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--ultra-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* === ULTRA SCROLLBAR === */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 10px;
            border: 3px solid rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--ultra-accent), var(--ultra-warning));
        }

        /* === ULTRA SELECTION === */
        ::selection {
            background: rgba(99, 102, 241, 0.5);
            color: white;
        }

        ::-moz-selection {
            background: rgba(99, 102, 241, 0.5);
            color: white;
        }

        /* === ULTRA FOCUS STATES === */
        :focus {
            outline: none;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.3);
        }

        :focus-visible {
            outline: 2px solid var(--ultra-primary);
            outline-offset: 2px;
        }

        /* === ULTRA PRINT STYLES === */
        @media print {
            .ultra-header,
            .ultra-recorder-panel,
            .ultra-settings-panel,
            .ultra-library,
            .ultra-footer,
            .btn-ultra,
            .controls-ultra,
            .video-container-ultra {
                display: none !important;
            }
            
            body {
                background: white !important;
                color: black !important;
            }
            
            .ultra-container {
                padding: 20px !important;
                max-width: 100% !important;
            }
        }

        /* === ULTRA CUSTOM CURSOR (OPTIONAL) === */
        .ultra-cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 20px;
            height: 20px;
            background: var(--ultra-primary);
            border-radius: 50%;
            pointer-events: none;
            z-index: 99999;
            mix-blend-mode: difference;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s, background 0.3s;
        }

        .ultra-cursor-follower {
            position: fixed;
            top: 0;
            left: 0;
            width: 40px;
            height: 40px;
            border: 2px solid var(--ultra-accent);
            border-radius: 50%;
            pointer-events: none;
            z-index: 99998;
            transform: translate(-50%, -50%);
            transition: all 0.6s ease;
        }

        /* === ULTRA THEME SWITCHER === */
        .theme-switcher {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 1000;
        }

        .theme-btn {
            width: 60px;
            height: 60px;
            background: var(--gradient-glass);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition-ultra);
            color: white;
            font-size: 1.5rem;
            box-shadow: var(--shadow-ultra);
        }

        .theme-btn:hover {
            transform: rotate(180deg) scale(1.1);
            background: var(--gradient-primary);
        }

        /* === ULTRA BACK TO TOP === */
        .back-to-top {
            position: fixed;
            bottom: 40px;
            right: 40px;
            width: 60px;
            height: 60px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-ultra);
            z-index: 1000;
            box-shadow: var(--shadow-glow);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-neon);
        }

        /* === ULTRA LOADING OVERLAY === */
        .loading-overlay-ultra {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-dark);
            z-index: 100000;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 40px;
            transition: opacity 0.5s ease;
        }

        .loading-logo-ultra {
            width: 150px;
            height: 150px;
            background: var(--gradient-primary);
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: white;
            animation: pulseGlow 2s infinite, rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .loading-text-ultra {
            font-size: 1.5rem;
            color: white;
            font-weight: 600;
            text-align: center;
            max-width: 400px;
            line-height: 1.6;
        }

        .loading-progress-ultra {
            width: 300px;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .loading-progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* === ULTRA KEYBOARD SHORTCUTS GUIDE === */
        .shortcuts-guide {
            position: fixed;
            bottom: 40px;
            left: 40px;
            background: var(--gradient-glass);
            backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-lg);
            padding: 30px;
            z-index: 1000;
            transform: translateY(100px);
            opacity: 0;
            transition: var(--transition-smooth);
            box-shadow: var(--shadow-ultra);
            max-width: 400px;
        }

        .shortcuts-guide.visible {
            transform: translateY(0);
            opacity: 1;
        }

        .shortcut-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .shortcut-item:last-child {
            border-bottom: none;
        }

        .shortcut-key {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 16px;
            border-radius: var(--radius-sm);
            font-family: 'SF Mono', monospace;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* === ULTRA COUNTDOWN === */
        .countdown-overlay-ultra {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            display: none;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(20px);
        }

        .countdown-container-ultra {
            text-align: center;
        }

        .countdown-number-ultra {
            font-size: 10rem;
            font-weight: 900;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            line-height: 1;
            margin-bottom: 30px;
            text-shadow: 0 0 50px rgba(99, 102, 241, 0.5);
            animation: pulse 1s infinite;
        }

        .countdown-text-ultra {
            font-size: 2rem;
            color: white;
            font-weight: 600;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
    </style>
</head>
<body>
    <!-- Ultra Background Effects -->
    <div class="ultra-bg-effects">
        <div class="bg-gradient-1"></div>
        <div class="bg-gradient-2"></div>
        <div class="bg-gradient-3"></div>
        <div class="bg-grid"></div>
        <div class="floating-particles" id="floatingParticles"></div>
    </div>

    <!-- Ultra Loading Overlay -->
    <div class="loading-overlay-ultra" id="loadingOverlayUltra">
        <div class="loading-logo-ultra">
            <i class="fas fa-video"></i>
        </div>
        <div class="loading-text-ultra" id="loadingTextUltra">
            Loading Screen Recorder ULTRA...
        </div>
        <div class="loading-progress-ultra">
            <div class="loading-progress-fill" id="loadingProgressFill"></div>
        </div>
    </div>

    <!-- Ultra Custom Cursor -->
    <div class="ultra-cursor" id="ultraCursor"></div>
    <div class="ultra-cursor-follower" id="ultraCursorFollower"></div>

    <!-- Theme Switcher -->
    <div class="theme-switcher">
        <div class="theme-btn" id="themeBtn">
            <i class="fas fa-moon"></i>
        </div>
    </div>

    <!-- Back to Top -->
    <div class="back-to-top" id="backToTop">
        <i class="fas fa-chevron-up"></i>
    </div>

    <!-- Shortcuts Guide -->
    <div class="shortcuts-guide" id="shortcutsGuide">
        <h3 style="margin-bottom: 20px; color: white; font-weight: 700; display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-keyboard"></i> Keyboard Shortcuts
        </h3>
        <div class="shortcut-item">
            <span>Start/Stop Recording</span>
            <span class="shortcut-key">SPACE</span>
        </div>
        <div class="shortcut-item">
            <span>Download Current</span>
            <span class="shortcut-key">D</span>
        </div>
        <div class="shortcut-item">
            <span>Upload to Cloud</span>
            <span class="shortcut-key">U</span>
        </div>
        <div class="shortcut-item">
            <span>Open Library</span>
            <span class="shortcut-key">L</span>
        </div>
        <div class="shortcut-item">
            <span>Show Shortcuts</span>
            <span class="shortcut-key">?</span>
        </div>
        <div class="shortcut-item">
            <span>Close Modal</span>
            <span class="shortcut-key">ESC</span>
        </div>
    </div>

    <!-- Countdown Overlay -->
    <div class="countdown-overlay-ultra" id="countdownOverlayUltra">
        <div class="countdown-container-ultra">
            <div class="countdown-number-ultra" id="countdownNumberUltra">3</div>
            <div class="countdown-text-ultra">RECORDING STARTS</div>
        </div>
    </div>

    <div class="ultra-container">
        <!-- Ultra Header -->
        <header class="ultra-header">
            <div class="header-super">
                <div class="logo-ultra">
                    <div class="logo-icon">
                        <i class="fas fa-broadcast-tower"></i>
                    </div>
                    <div class="brand-ultra">
                        <h1>SCREEN RECORDER ULTRA</h1>
                        <p class="tagline-ultra">
                            <i class="fas fa-rocket"></i>
                            Professional 8K Recording with AI-Powered Cloud Enterprise
                        </p>
                    </div>
                </div>
                <div class="badge-collection">
                    <div class="badge-ultra">
                        <i class="fas fa-crown"></i>
                        ENTERPRISE PRO
                    </div>
                    <div class="badge-ultra">
                        <i class="fas fa-shield-alt"></i>
                        E2E ENCRYPTED
                    </div>
                    <div class="badge-ultra">
                        <i class="fas fa-infinity"></i>
                        UNLIMITED CLOUD
                    </div>
                </div>
            </div>
            
            <div class="header-cloud-status">
                <div class="cloud-status-header">
                    <div class="cloud-icon-ultra">
                        <i class="fab fa-google-drive"></i>
                    </div>
                    <div style="flex: 1;">
                        <h3 style="color: white; font-weight: 700; margin-bottom: 5px; font-size: 1.4rem;">
                            Google Drive Enterprise Pro
                        </h3>
                        <p style="color: rgba(255, 255, 255, 0.7); font-size: 1rem;">
                            <i class="fas fa-sync-alt fa-spin"></i>
                            Real-time cloud sync  Unlimited storage  Advanced encryption
                        </p>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-size: 2rem; font-weight: 800; color: white; line-height: 1;">
                            156 GB
                        </div>
                        <div style="color: rgba(255, 255, 255, 0.7); font-size: 0.9rem;">
                            of Unlimited used
                        </div>
                    </div>
                </div>
                <div class="storage-bar-ultra">
                    <div class="storage-fill-ultra"></div>
                </div>
            </div>
        </header>

        <!-- Ultra Main Grid -->
        <div class="ultra-main-grid">
            <!-- Ultra Recorder Panel -->
            <div class="ultra-recorder-panel">
                <!-- Ultra Video Container -->
                <div class="video-container-ultra">
                    <video id="previewVideoUltra" style="width: 100%; height: 100%; object-fit: contain; display: none;"></video>
                    <div class="video-overlay-ultra" id="videoOverlayUltra">
                        <i class="fas fa-satellite"></i>
                        <div style="text-align: center;">
                            <h2 style="font-size: 2.5rem; font-weight: 800; margin-bottom: 15px; background: var(--gradient-primary); -webkit-background-clip: text; background-clip: text; color: transparent;">
                                8K ULTRA HD PREVIEW
                            </h2>
                            <p style="font-size: 1.2rem; color: rgba(255, 255, 255, 0.8); max-width: 600px; margin: 0 auto;">
                                Start recording to activate the 8K UHD preview with real-time AI enhancement
                            </p>
                        </div>
                        <div style="display: flex; gap: 20px; margin-top: 30px;">
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: white;">76804320</div>
                                <div style="color: rgba(255, 255, 255, 0.7);">Resolution</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: white;">60 FPS</div>
                                <div style="color: rgba(255, 255, 255, 0.7);">Frame Rate</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: white;">HDR10+</div>
                                <div style="color: rgba(255, 255, 255, 0.7);">Color Depth</div>
                            </div>
                        </div>
                    </div>
                    <div class="recording-status-ultra" id="recordingStatusUltra">
                        <div class="recording-dot-ultra"></div>
                        <span>LIVE RECORDING  8K UHD  AI ENHANCED</span>
                    </div>
                </div>

                <!-- Ultra Controls -->
                <div class="controls-ultra">
                    <button id="recordBtnUltra" class="btn-ultra record">
                        <i class="fas fa-satellite-dish fa-beat"></i>
                        <span>START RECORDING</span>
                    </button>
                    <button id="stopBtnUltra" class="btn-ultra stop" disabled>
                        <i class="fas fa-stop-circle"></i>
                        <span>STOP RECORDING</span>
                    </button>
                    <button id="downloadBtnUltra" class="btn-ultra download" disabled>
                        <i class="fas fa-file-download"></i>
                        <span>DOWNLOAD 8K</span>
                    </button>
                    <button id="cloudBtnUltra" class="btn-ultra cloud" disabled>
                        <i class="fas fa-cloud-upload-alt"></i>
                        <span>CLOUD SYNC</span>
                    </button>
                </div>

                <!-- Ultra Stats Dashboard -->
                <div class="stats-dashboard-ultra">
                    <div class="stat-card-ultra">
                        <div class="stat-value-ultra" id="timerDisplayUltra">00:00:00</div>
                        <div class="stat-label-ultra">
                            <i class="fas fa-clock"></i>
                            DURATION
                        </div>
                    </div>
                    <div class="stat-card-ultra">
                        <div class="stat-value-ultra" id="fileSizeUltra">0 GB</div>
                        <div class="stat-label-ultra">
                            <i class="fas fa-weight-hanging"></i>
                            FILE SIZE
                        </div>
                    </div>
                    <div class="stat-card-ultra">
                        <div class="stat-value-ultra" id="resolutionUltra">8K UHD</div>
                        <div class="stat-label-ultra">
                            <i class="fas fa-expand-alt"></i>
                            RESOLUTION
                        </div>
                    </div>
                    <div class="stat-card-ultra">
                        <div class="stat-value-ultra" id="fpsDisplayUltra">60 FPS</div>
                        <div class="stat-label-ultra">
                            <i class="fas fa-tachometer-alt"></i>
                            FRAME RATE
                        </div>
                    </div>
                </div>

                <!-- Additional Ultra Controls -->
                <div style="display: flex; gap: 20px; margin-top: 40px;">
                    <button id="manageBtnUltra" class="btn-ultra" style="flex: 1; background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(168, 85, 247, 0.1)); border-color: rgba(168, 85, 247, 0.3); color: #a78bfa;">
                        <i class="fas fa-photo-video"></i>
                        <span>VIDEO LIBRARY (<span id="videoCountUltra">0</span>)</span>
                    </button>
                    <button id="aiEnhanceBtnUltra" class="btn-ultra" style="width: 80px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1)); border-color: rgba(16, 185, 129, 0.3); color: #34d399;">
                        <i class="fas fa-brain"></i>
                    </button>
                    <button id="settingsBtnUltra" class="btn-ultra" style="width: 80px; background: rgba(255, 255, 255, 0.1); border-color: rgba(255, 255, 255, 0.2);">
                        <i class="fas fa-cog fa-spin"></i>
                    </button>
                </div>
            </div>

            <!-- Ultra Settings Panel -->
            <div class="ultra-settings-panel">
                <h2 class="section-header-ultra">
                    <i class="fas fa-sliders-h"></i>
                    ULTRA SETTINGS
                </h2>

                <!-- Ultra Storage Selector -->
                <div class="storage-selector-ultra">
                    <div class="storage-option-ultra active clickable" id="storageHybridUltra">
                        <i class="fas fa-sync-alt storage-icon-ultra"></i>
                        <h4>Hybrid Cloud Pro</h4>
                        <p>Local + Cloud with real-time sync and AI optimization</p>
                        <div class="storage-badge-ultra">RECOMMENDED</div>
                    </div>
                    <div class="storage-option-ultra clickable" id="storageCloudUltra">
                        <i class="fas fa-cloud storage-icon-ultra"></i>
                        <h4>Cloud Only Elite</h4>
                        <p>Enterprise-grade cloud storage with unlimited capacity</p>
                        <div class="storage-badge-ultra">UNLIMITED</div>
                    </div>
                    <div class="storage-option-ultra clickable" id="storageLocalUltra">
                        <i class="fas fa-hdd storage-icon-ultra"></i>
                        <h4>Local Ultra</h4>
                        <p>High-speed local storage with NVMe acceleration</p>
                        <div class="storage-badge-ultra">1 TB SSD</div>
                    </div>
                </div>

                <!-- Ultra Quality Selector -->
                <div class="quality-selector-ultra">
                    <h4 style="margin-bottom: 25px; color: white; font-weight: 700; font-size: 1.2rem;">
                        <i class="fas fa-film"></i>
                        VIDEO QUALITY PRESETS
                    </h4>
                    <div class="quality-options-ultra">
                        <label class="quality-option-ultra selected clickable">
                            <input type="radio" name="qualityUltra" value="8k" checked>
                            <span class="quality-label-ultra">8K ULTRA HD (76804320)</span>
                            <span class="quality-badge-ultra">AI ENHANCED</span>
                        </label>
                        <label class="quality-option-ultra clickable">
                            <input type="radio" name="qualityUltra" value="4k">
                            <span class="quality-label-ultra">4K PRO RES (40962160)</span>
                            <span class="quality-badge-ultra">CINEMATIC</span>
                        </label>
                        <label class="quality-option-ultra clickable">
                            <input type="radio" name="qualityUltra" value="1440p">
                            <span class="quality-label-ultra">2.7K QHD (25601440)</span>
                            <span class="quality-badge-ultra">BALANCED</span>
                        </label>
                        <label class="quality-option-ultra clickable">
                            <input type="radio" name="qualityUltra" value="1080p">
                            <span class="quality-label-ultra">FULL HD PRO (19201080)</span>
                            <span class="quality-badge-ultra">PERFORMANCE</span>
                        </label>
                    </div>
                </div>

                <!-- Ultra Audio Settings -->
                <div style="background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-lg); padding: 30px; margin-bottom: 40px; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <h4 style="margin-bottom: 25px; color: white; font-weight: 700; font-size: 1.2rem;">
                        <i class="fas fa-volume-up"></i>
                        PRO AUDIO SETTINGS
                    </h4>
                    <div style="display: grid; gap: 20px;">
                        <label class="clickable" style="display: flex; align-items: center; gap: 15px; padding: 20px; background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-md); transition: var(--transition-ultra);">
                            <input type="checkbox" id="audioSystemUltra" checked style="width: 24px; height: 24px; accent-color: var(--ultra-primary);">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: white; margin-bottom: 5px;">System Audio HD</div>
                                <div style="font-size: 0.9rem; color: rgba(255, 255, 255, 0.7);">Crystal clear system sound capture</div>
                            </div>
                            <span class="quality-badge-ultra">STEREO 2.1</span>
                        </label>
                        <label class="clickable" style="display: flex; align-items: center; gap: 15px; padding: 20px; background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-md); transition: var(--transition-ultra);">
                            <input type="checkbox" id="audioMicUltra" style="width: 24px; height: 24px; accent-color: var(--ultra-primary);">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: white; margin-bottom: 5px;">Studio Microphone</div>
                                <div style="font-size: 0.9rem; color: rgba(255, 255, 255, 0.7);">Professional-grade microphone input</div>
                            </div>
                            <span class="quality-badge-ultra">AI NOISE CANCEL</span>
                        </label>
                        <label class="clickable" style="display: flex; align-items: center; gap: 15px; padding: 20px; background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-md); transition: var(--transition-ultra);">
                            <input type="checkbox" id="audioSurroundUltra" style="width: 24px; height: 24px; accent-color: var(--ultra-primary);">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: white; margin-bottom: 5px;">Dolby Atmos 7.1</div>
                                <div style="font-size: 0.9rem; color: rgba(255, 255, 255, 0.7);">Immersive surround sound experience</div>
                            </div>
                            <span class="quality-badge-ultra">PREMIUM</span>
                        </label>
                    </div>
                </div>

                <!-- Ultra Cloud Settings -->
                <div style="background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-lg); padding: 30px; margin-bottom: 40px; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <h4 style="margin-bottom: 25px; color: white; font-weight: 700; font-size: 1.2rem;">
                        <i class="fas fa-cloud"></i>
                        CLOUD ENTERPRISE SETTINGS
                    </h4>
                    <div style="display: grid; gap: 20px; margin-bottom: 30px;">
                        <label class="clickable" style="display: flex; align-items: center; gap: 15px; padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-md);">
                            <input type="checkbox" id="cloudAutoBackupUltra" checked style="width: 20px; height: 20px; accent-color: var(--ultra-primary);">
                            <span style="flex: 1; color: white; font-weight: 500;">Automatic Cloud Backup</span>
                        </label>
                        <label class="clickable" style="display: flex; align-items: center; gap: 15px; padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-md);">
                            <input type="checkbox" id="cloudCompressUltra" checked style="width: 20px; height: 20px; accent-color: var(--ultra-primary);">
                            <span style="flex: 1; color: white; font-weight: 500;">AI Compression</span>
                        </label>
                        <label class="clickable" style="display: flex; align-items: center; gap: 15px; padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-md);">
                            <input type="checkbox" id="cloudSyncUltra" style="width: 20px; height: 20px; accent-color: var(--ultra-primary);">
                            <span style="flex: 1; color: white; font-weight: 500;">Multi-Device Sync</span>
                        </label>
                    </div>
                    <button id="connectDriveBtnUltra" class="btn-ultra" style="width: 100%; background: linear-gradient(135deg, rgba(66, 133, 244, 0.2), rgba(52, 168, 83, 0.1)); border-color: rgba(66, 133, 244, 0.3); color: #60a5fa;">
                        <i class="fab fa-google-drive"></i>
                        <span id="driveConnectTextUltra">CONNECT GOOGLE DRIVE ENTERPRISE</span>
                    </button>
                </div>

                <!-- Ultra Advanced Features -->
                <div style="background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-lg); padding: 30px; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <h4 style="margin-bottom: 25px; color: white; font-weight: 700; font-size: 1.2rem;">
                        <i class="fas fa-magic"></i>
                        AI ENHANCEMENTS
                    </h4>
                    <div style="display: grid; gap: 20px;">
                        <label class="clickable" style="display: flex; align-items: center; gap: 15px; padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-md);">
                            <input type="checkbox" id="aiUpscaleUltra" checked style="width: 20px; height: 20px; accent-color: var(--ultra-primary);">
                            <span style="flex: 1; color: white; font-weight: 500;">AI Upscaling</span>
                            <span class="quality-badge-ultra">NEURAL</span>
                        </label>
                        <label class="clickable" style="display: flex; align-items: center; gap: 15px; padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-md);">
                            <input type="checkbox" id="aiStabilizeUltra" checked style="width: 20px; height: 20px; accent-color: var(--ultra-primary);">
                            <span style="flex: 1; color: white; font-weight: 500;">Motion Stabilization</span>
                            <span class="quality-badge-ultra">SMOOTH</span>
                        </label>
                        <label class="clickable" style="display: flex; align-items: center; gap: 15px; padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-md);">
                            <input type="checkbox" id="aiColorGradeUltra" style="width: 20px; height: 20px; accent-color: var(--ultra-primary);">
                            <span style="flex: 1; color: white; font-weight: 500;">Auto Color Grading</span>
                            <span class="quality-badge-ultra">HDR</span>
                        </label>
                        <label class="clickable" style="display: flex; align-items: center; gap: 15px; padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-md);">
                            <input type="checkbox" id="aiVoiceEnhanceUltra" checked style="width: 20px; height: 20px; accent-color: var(--ultra-primary);">
                            <span style="flex: 1; color: white; font-weight: 500;">Voice Enhancement</span>
                            <span class="quality-badge-ultra">CLEAR</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ultra Video Library -->
        <div class="ultra-library">
            <div class="library-header-ultra">
                <h2 class="section-header-ultra">
                    <i class="fas fa-film"></i>
                    ENTERPRISE VIDEO LIBRARY
                </h2>
                <div class="library-controls-ultra">
                    <div class="search-box-ultra">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInputUltra" placeholder="Search videos by name, quality, or date...">
                    </div>
                    <div class="filter-tabs-ultra">
                        <button class="filter-tab-ultra active clickable" data-filter="all">ALL VIDEOS</button>
                        <button class="filter-tab-ultra clickable" data-filter="local">LOCAL</button>
                        <button class="filter-tab-ultra clickable" data-filter="cloud">CLOUD</button>
                        <button class="filter-tab-ultra clickable" data-filter="recent">RECENT</button>
                        <button class="filter-tab-ultra clickable" data-filter="favorite">FAVORITES</button>
                    </div>
                    <button id="syncAllBtnUltra" class="action-btn-ultra cloud-btn clickable">
                        <i class="fas fa-sync-alt fa-spin"></i>
                        SYNC ALL
                    </button>
                    <button id="clearAllBtnUltra" class="action-btn-ultra clickable" style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.1)); color: #f87171; border-color: rgba(239, 68, 68, 0.3);">
                        <i class="fas fa-trash-alt"></i>
                        CLEAR ALL
                    </button>
                </div>
            </div>
            
            <div class="video-grid-ultra" id="videoGridUltra">
                <!-- Video cards will be loaded here -->
            </div>
            
            <div style="text-align: center; padding: 60px; color: rgba(255, 255, 255, 0.6);" id="emptyLibraryUltra">
                <i class="fas fa-video-slash" style="font-size: 4rem; margin-bottom: 25px; opacity: 0.5;"></i>
                <h3 style="margin-bottom: 15px; color: rgba(255, 255, 255, 0.9); font-size: 2rem; font-weight: 700;">
                    Your Video Library is Empty
                </h3>
                <p style="font-size: 1.1rem; margin-bottom: 30px; max-width: 500px; margin-left: auto; margin-right: auto;">
                    Start recording your first 8K UHD video to populate your enterprise library
                </p>
                <button id="startRecordingEmptyUltra" class="btn-ultra record" style="padding: 20px 40px; font-size: 1.2rem;">
                    <i class="fas fa-satellite-dish"></i>
                    START YOUR FIRST RECORDING
                </button>
            </div>
        </div>

        <!-- Ultra Footer -->
        <footer class="ultra-footer">
            <p style="font-size: 1.1rem; margin-bottom: 20px;">
                 2024 Screen Recorder ULTRA  Enterprise Edition v3.0
            </p>
            <p style="color: rgba(255, 255, 255, 0.5); margin-bottom: 30px; max-width: 800px; margin-left: auto; margin-right: auto;">
                Advanced 8K screen recording with AI-powered enhancements, enterprise-grade cloud storage, 
                and military-grade encryption. Trusted by Fortune 500 companies worldwide.
            </p>
            <div class="footer-links-ultra">
                <a href="#" class="footer-link-ultra clickable">Terms of Service</a>
                <a href="#" class="footer-link-ultra clickable">Privacy Policy</a>
                <a href="#" class="footer-link-ultra clickable">Enterprise Support</a>
                <a href="#" class="footer-link-ultra clickable">API Documentation</a>
                <a href="#" class="footer-link-ultra clickable">System Status</a>
                <a href="#" class="footer-link-ultra clickable">Contact Sales</a>
            </div>
            <div style="margin-top: 40px; padding-top: 30px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                <div style="display: flex; justify-content: center; gap: 30px; flex-wrap: wrap;">
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; font-weight: 800; color: white;">99.9%</div>
                        <div style="color: rgba(255, 255, 255, 0.7);">Uptime SLA</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; font-weight: 800; color: white;">256-bit</div>
                        <div style="color: rgba(255, 255, 255, 0.7);">Encryption</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; font-weight: 800; color: white;">24/7</div>
                        <div style="color: rgba(255, 255, 255, 0.7);">Support</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; font-weight: 800; color: white;"></div>
                        <div style="color: rgba(255, 255, 255, 0.7);">Cloud Storage</div>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Ultra Modals -->
    <div class="modal-overlay-ultra" id="videoModalUltra">
        <div class="modal-content-ultra">
            <div class="modal-header-ultra">
                <h2 class="modal-title-ultra">
                    <i class="fas fa-play-circle"></i>
                    <span id="modalTitleUltra">ENTERPRISE VIDEO PLAYER</span>
                </h2>
                <button class="close-modal-ultra clickable" id="closeModalUltra">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <video id="modalVideoUltra" controls style="width: 100%; border-radius: var(--radius-lg); margin-bottom: 40px; box-shadow: var(--shadow-ultra);"></video>
            <div style="background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-lg); padding: 40px; margin-bottom: 40px; border: 1px solid rgba(255, 255, 255, 0.1);">
                <h3 id="modalVideoTitleUltra" style="margin-bottom: 20px; color: white; font-weight: 700; font-size: 1.5rem;"></h3>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 25px;">
                    <div class="meta-item-ultra">
                        <i class="fas fa-expand-alt"></i>
                        <span id="modalResolutionUltra"></span>
                    </div>
                    <div class="meta-item-ultra">
                        <i class="fas fa-file-alt"></i>
                        <span id="modalSizeUltra"></span>
                    </div>
                    <div class="meta-item-ultra">
                        <i class="fas fa-calendar"></i>
                        <span id="modalDateUltra"></span>
                    </div>
                    <div class="meta-item-ultra">
                        <i class="fas fa-clock"></i>
                        <span id="modalDurationUltra"></span>
                    </div>
                    <div class="meta-item-ultra">
                        <i class="fas fa-cloud"></i>
                        <span id="modalCloudStatusUltra">Local Storage</span>
                    </div>
                    <div class="meta-item-ultra">
                        <i class="fas fa-eye"></i>
                        <span id="modalViewsUltra">0 views</span>
                    </div>
                </div>
            </div>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
                <button id="modalDownloadBtnUltra" class="btn-ultra download">
                    <i class="fas fa-download"></i> DOWNLOAD
                </button>
                <button id="modalCloudBtnUltra" class="btn-ultra cloud">
                    <i class="fas fa-cloud-upload-alt"></i> UPLOAD CLOUD
                </button>
                <button id="modalShareBtnUltra" class="btn-ultra" style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(168, 85, 247, 0.1)); border-color: rgba(168, 85, 247, 0.3); color: #a78bfa;">
                    <i class="fas fa-share-alt"></i> SHARE
                </button>
                <button id="modalFavoriteBtnUltra" class="btn-ultra" style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.1)); border-color: rgba(245, 158, 11, 0.3); color: #fbbf24;">
                    <i class="fas fa-star"></i> FAVORITE
                </button>
                <button id="modalRenameBtnUltra" class="btn-ultra" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1)); border-color: rgba(16, 185, 129, 0.3); color: #34d399;">
                    <i class="fas fa-edit"></i> RENAME
                </button>
                <button id="modalDeleteBtnUltra" class="btn-ultra" style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.1)); border-color: rgba(239, 68, 68, 0.3); color: #f87171;">
                    <i class="fas fa-trash-alt"></i> DELETE
                </button>
            </div>
        </div>
    </div>

    <!-- Ultra Progress Overlay -->
    <div class="progress-overlay-ultra" id="progressOverlayUltra">
        <div class="progress-container-ultra">
            <h3 class="progress-title-ultra" id="progressTitleUltra">Uploading to Enterprise Cloud</h3>
            <div class="progress-bar-ultra">
                <div class="progress-fill-ultra" id="progressFillUltra"></div>
            </div>
            <p id="progressTextUltra" style="font-size: 1.1rem; color: rgba(255, 255, 255, 0.8); margin-bottom: 40px;">
                0%  Starting enterprise-grade upload...
            </p>
            <div style="display: flex; gap: 20px; justify-content: center;">
                <button id="cancelProgressBtnUltra" class="btn-ultra stop" style="padding: 20px 40px;">
                    <i class="fas fa-times"></i> CANCEL UPLOAD
                </button>
                <button id="minimizeProgressBtnUltra" class="btn-ultra" style="padding: 20px 40px; background: rgba(255, 255, 255, 0.1); border-color: rgba(255, 255, 255, 0.2);">
                    <i class="fas fa-window-minimize"></i> MINIMIZE
                </button>
            </div>
        </div>
    </div>

    <!-- Ultra Message Container -->
    <div class="message-container-ultra" id="messageContainerUltra"></div>

    <script>
        // ==============================================
        // ULTRA ENTERPRISE CONFIGURATION
        // ==============================================
        const ULTRA_CONFIG = {
            APP_NAME: 'ScreenRecorderULTRA',
            APP_VERSION: '3.0.0',
            DB_NAME: 'ScreenRecorderUltraDB',
            DB_VERSION: 8,
            STORE_NAME: 'ultraVideos',
            SETTINGS_STORE: 'ultraSettings',
            MAX_LOCAL_STORAGE: 1000 * 1024 * 1024 * 1024, // 1TB
            CLOUD_SYNC_INTERVAL: 30000, // 30 seconds
            AUTO_SAVE_INTERVAL: 10000, // 10 seconds
            DEMO_MODE: true
        };

        // ==============================================
        // ULTRA STATE MANAGEMENT
        // ==============================================
        class UltraState {
            constructor() {
                this.db = null;
                this.mediaRecorder = null;
                this.recordedChunks = [];
                this.currentStream = null;
                this.recordingStartTime = null;
                this.recordingTimer = null;
                this.currentVideoBlob = null;
                this.isRecording = false;
                this.isGoogleDriveConnected = true;
                this.storageMode = 'hybrid';
                this.currentVideoId = null;
                this.uploadProgressInterval = null;
                this.videoLibrary = [];
                this.isAIEnhanced = true;
                this.currentTheme = 'dark';
                this.isCustomCursorEnabled = false;
                this.performanceMetrics = {
                    startTime: Date.now(),
                    memoryUsage: 0,
                    fps: 60,
                    uploadSpeed: 0
                };
                this.shortcutsEnabled = true;
            }
        }

        const ultra = new UltraState();

        // ==============================================
        // ULTRA INITIALIZATION
        // ==============================================
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Initialize loading animation
                await simulateLoading();
                
                // Initialize background effects
                initBackgroundEffects();
                
                // Initialize custom cursor
                initCustomCursor();
                
                // Initialize database
                await initUltraDatabase();
                
                // Initialize cloud connection
                await initUltraCloud();
                
                // Initialize UI
                initUltraUI();
                
                // Initialize event listeners
                initUltraEvents();
                
                // Load library
                await loadUltraLibrary();
                
                // Start performance monitoring
                startUltraPerformanceMonitor();
                
                // Start auto-save
                startAutoSave();
                
                // Show welcome message
                setTimeout(() => {
                    showUltraMessage(' Screen Recorder ULTRA Enterprise initialized successfully!', 'success', 5000);
                    showUltraToast('Enterprise mode activated  AI enhancements enabled', 'info');
                    
                    // Show shortcuts guide after 3 seconds
                    setTimeout(() => {
                        document.getElementById('shortcutsGuide').classList.add('visible');
                        setTimeout(() => {
                            document.getElementById('shortcutsGuide').classList.remove('visible');
                        }, 8000);
                    }, 3000);
                }, 1000);
                
            } catch (error) {
                console.error('Ultra initialization error:', error);
                showUltraMessage(`Initialization failed: ${error.message}`, 'error');
                
                // Try recovery
                setTimeout(() => {
                    showUltraMessage('Attempting automatic recovery...', 'warning');
                    location.reload();
                }, 3000);
            }
        });

        // ==============================================
        // ULTRA BACKGROUND EFFECTS
        // ==============================================
        function initBackgroundEffects() {
            // Create floating particles
            const particlesContainer = document.getElementById('floatingParticles');
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const size = Math.random() * 100 + 50;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                
                const colors = [
                    'rgba(99, 102, 241, 0.1)',
                    'rgba(139, 92, 246, 0.1)',
                    'rgba(236, 72, 153, 0.1)',
                    'rgba(245, 158, 11, 0.1)',
                    'rgba(16, 185, 129, 0.1)'
                ];
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.animationDelay = `${Math.random() * 20}s`;
                particle.style.animationDuration = `${Math.random() * 30 + 20}s`;
                
                particlesContainer.appendChild(particle);
            }
            
            // Create interactive particles on mouse move
            document.addEventListener('mousemove', (e) => {
                if (Math.random() > 0.7) {
                    createInteractiveParticle(e.clientX, e.clientY);
                }
            });
        }

        function createInteractiveParticle(x, y) {
            const particle = document.createElement('div');
            particle.style.position = 'fixed';
            particle.style.left = `${x}px`;
            particle.style.top = `${y}px`;
            particle.style.width = '5px';
            particle.style.height = '5px';
            particle.style.background = 'var(--ultra-primary)';
            particle.style.borderRadius = '50%';
            particle.style.pointerEvents = 'none';
            particle.style.zIndex = '9998';
            particle.style.opacity = '0.7';
            
            document.body.appendChild(particle);
            
            // Animate particle
            anime({
                targets: particle,
                translateX: anime.random(-50, 50),
                translateY: anime.random(-50, 50),
                scale: [0, 1, 0],
                opacity: [0.7, 0],
                duration: 1000,
                easing: 'easeOutExpo',
                complete: () => particle.remove()
            });
        }

        // ==============================================
        // ULTRA CUSTOM CURSOR
        // ==============================================
        function initCustomCursor() {
            if (!ULTRA_CONFIG.DEMO_MODE) return;
            
            const cursor = document.getElementById('ultraCursor');
            const follower = document.getElementById('ultraCursorFollower');
            
            let mouseX = 0;
            let mouseY = 0;
            let cursorX = 0;
            let cursorY = 0;
            let followerX = 0;
            let followerY = 0;
            
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
            });
            
            function animateCursor() {
                // Smooth cursor movement
                cursorX += (mouseX - cursorX) * 0.1;
                cursorY += (mouseY - cursorY) * 0.1;
                
                // Smooth follower movement (more lag)
                followerX += (mouseX - followerX) * 0.05;
                followerY += (mouseY - followerY) * 0.05;
                
                cursor.style.left = cursorX + 'px';
                cursor.style.top = cursorY + 'px';
                
                follower.style.left = followerX + 'px';
                follower.style.top = followerY + 'px';
                
                requestAnimationFrame(animateCursor);
            }
            
            animateCursor();
            
            // Interactive effects
            document.addEventListener('mousedown', () => {
                cursor.style.transform = 'translate(-50%, -50%) scale(0.8)';
                follower.style.transform = 'translate(-50%, -50%) scale(1.2)';
            });
            
            document.addEventListener('mouseup', () => {
                cursor.style.transform = 'translate(-50%, -50%) scale(1)';
                follower.style.transform = 'translate(-50%, -50%) scale(1)';
            });
            
            // Hover effects
            const interactiveElements = document.querySelectorAll('button, a, .clickable, input, .video-card-ultra');
            interactiveElements.forEach(el => {
                el.addEventListener('mouseenter', () => {
                    cursor.style.width = '30px';
                    cursor.style.height = '30px';
                    cursor.style.background = 'var(--ultra-accent)';
                    follower.style.borderColor = 'var(--ultra-primary)';
                    follower.style.width = '60px';
                    follower.style.height = '60px';
                });
                
                el.addEventListener('mouseleave', () => {
                    cursor.style.width = '20px';
                    cursor.style.height = '20px';
                    cursor.style.background = 'var(--ultra-primary)';
                    follower.style.borderColor = 'var(--ultra-accent)';
                    follower.style.width = '40px';
                    follower.style.height = '40px';
                });
            });
        }

        // ==============================================
        // ULTRA DATABASE
        // ==============================================
        async function initUltraDatabase() {
            return new Promise((resolve, reject) => {
                const request = indexedDB.open(ULTRA_CONFIG.DB_NAME, ULTRA_CONFIG.DB_VERSION);
                
                request.onerror = () => {
                    console.error('Ultra Database error:', request.error);
                    indexedDB.deleteDatabase(ULTRA_CONFIG.DB_NAME);
                    setTimeout(() => location.reload(), 1000);
                    reject(request.error);
                };
                
                request.onsuccess = () => {
                    ultra.db = request.result;
                    
                    // Enhanced error handling
                    ultra.db.onerror = (event) => {
                        console.error('Database error:', event.target.error);
                        showUltraToast('Database error occurred', 'error');
                    };
                    
                    // Test connection
                    testUltraDatabaseConnection().then(resolve).catch(reject);
                };
                
                request.onupgradeneeded = (event) => {
                    const db = event.target.result;
                    
                    // Create ultra videos store
                    if (!db.objectStoreNames.contains(ULTRA_CONFIG.STORE_NAME)) {
                        const store = db.createObjectStore(ULTRA_CONFIG.STORE_NAME, {
                            keyPath: 'id',
                            autoIncrement: true
                        });
                        
                        // Create comprehensive indexes
                        store.createIndex('title', 'title', { unique: false });
                        store.createIndex('date', 'date', { unique: false });
                        store.createIndex('size', 'size', { unique: false });
                        store.createIndex('quality', 'quality', { unique: false });
                        store.createIndex('isCloud', 'isCloud', { unique: false });
                        store.createIndex('duration', 'duration', { unique: false });
                        store.createIndex('resolution', 'resolution', { unique: false });
                        store.createIndex('syncStatus', 'syncStatus', { unique: false });
                        store.createIndex('tags', 'tags', { unique: false, multiEntry: true });
                        store.createIndex('favorite', 'favorite', { unique: false });
                        store.createIndex('views', 'views', { unique: false });
                        store.createIndex('aiEnhanced', 'aiEnhanced', { unique: false });
                    }
                    
                    // Create ultra settings store
                    if (!db.objectStoreNames.contains(ULTRA_CONFIG.SETTINGS_STORE)) {
                        const settingsStore = db.createObjectStore(ULTRA_CONFIG.SETTINGS_STORE, { keyPath: 'key' });
                        settingsStore.createIndex('key', 'key', { unique: true });
                        
                        // Initialize with ultra settings
                        settingsStore.add({
                            key: 'ultraSettings',
                            storageMode: 'hybrid',
                            defaultQuality: '8k',
                            audioSettings: {
                                system: true,
                                mic: false,
                                surround: false
                            },
                            cloudSettings: {
                                autoBackup: true,
                                compress: true,
                                sync: false
                            },
                            aiSettings: {
                                upscale: true,
                                stabilize: true,
                                colorGrade: false,
                                voiceEnhance: true
                            },
                            uiSettings: {
                                theme: 'dark',
                                customCursor: true,
                                animations: true
                            },
                            lastSync: null,
                            createdAt: new Date().toISOString()
                        });
                    }
                };
            });
        }

        async function testUltraDatabaseConnection() {
            return new Promise((resolve, reject) => {
                const transaction = ultra.db.transaction([ULTRA_CONFIG.STORE_NAME], 'readonly');
                const store = transaction.objectStore(ULTRA_CONFIG.STORE_NAME);
                const request = store.count();
                
                request.onsuccess = () => {
                    console.log('Ultra Database connection established');
                    resolve();
                };
                
                request.onerror = () => reject(request.error);
            });
        }

        async function saveUltraSetting(key, value) {
            return new Promise((resolve, reject) => {
                const transaction = ultra.db.transaction([ULTRA_CONFIG.SETTINGS_STORE], 'readwrite');
                const store = transaction.objectStore(ULTRA_CONFIG.SETTINGS_STORE);
                
                const setting = { key, value, updated: new Date().toISOString() };
                const request = store.put(setting);
                
                request.onsuccess = () => resolve();
                request.onerror = () => reject(request.error);
            });
        }

        async function getUltraSetting(key) {
            return new Promise((resolve, reject) => {
                const transaction = ultra.db.transaction([ULTRA_CONFIG.SETTINGS_STORE], 'readonly');
                const store = transaction.objectStore(ULTRA_CONFIG.SETTINGS_STORE);
                const request = store.get(key);
                
                request.onsuccess = () => resolve(request.result ? request.result.value : null);
                request.onerror = () => reject(request.error);
            });
        }

        // ==============================================
        // ULTRA VIDEO MANAGEMENT
        // ==============================================
        async function saveUltraVideo(blob, metadata) {
            return new Promise(async (resolve, reject) => {
                try {
                    // Simulate AI processing if enabled
                    if (ultra.isAIEnhanced) {
                        showUltraToast('Applying AI enhancements...', 'info');
                        await new Promise(resolve => setTimeout(resolve, 500));
                    }
                    
                    const arrayBuffer = await blob.arrayBuffer();
                    
                    const videoData = {
                        ...metadata,
                        data: arrayBuffer,
                        date: new Date().toISOString(),
                        isCloud: false,
                        cloudId: null,
                        cloudUrl: null,
                        syncStatus: 'local',
                        tags: ['recording', metadata.quality, 'ai-enhanced'],
                        favorite: false,
                        views: 0,
                        aiEnhanced: ultra.isAIEnhanced,
                        lastModified: new Date().toISOString(),
                        thumbnail: await generateThumbnail(blob)
                    };
                    
                    const transaction = ultra.db.transaction([ULTRA_CONFIG.STORE_NAME], 'readwrite');
                    const store = transaction.objectStore(ULTRA_CONFIG.STORE_NAME);
                    
                    const request = store.add(videoData);
                    
                    request.onsuccess = async () => {
                        const videoId = request.result;
                        
                        // Update video count
                        updateUltraVideoCount();
                        
                        // Auto backup to cloud
                        if (ultra.storageMode !== 'local' && document.getElementById('cloudAutoBackupUltra').checked) {
                            setTimeout(async () => {
                                try {
                                    await updateUltraVideo(videoId, {
                                        isCloud: true,
                                        cloudId: `ultra-cloud-${videoId}-${Date.now()}`,
                                        cloudUrl: '#',
                                        syncStatus: 'synced',
                                        syncedAt: new Date().toISOString()
                                    });
                                    
                                    showUltraToast('Video auto-synced to enterprise cloud', 'success');
                                    await loadUltraLibrary();
                                } catch (error) {
                                    console.warn('Cloud backup failed:', error);
                                }
                            }, 1000);
                        }
                        
                        resolve(videoId);
                        await updateUltraStorageInfo();
                        await loadUltraLibrary();
                    };
                    
                    request.onerror = () => reject(request.error);
                    
                } catch (error) {
                    reject(error);
                }
            });
        }

        async function getAllUltraVideos() {
            return new Promise((resolve, reject) => {
                const transaction = ultra.db.transaction([ULTRA_CONFIG.STORE_NAME], 'readonly');
                const store = transaction.objectStore(ULTRA_CONFIG.STORE_NAME);
                const request = store.getAll();
                
                request.onsuccess = () => resolve(request.result || []);
                request.onerror = () => reject(request.error);
            });
        }

        async function updateUltraVideo(id, updates) {
            return new Promise((resolve, reject) => {
                const transaction = ultra.db.transaction([ULTRA_CONFIG.STORE_NAME], 'readwrite');
                const store = transaction.objectStore(ULTRA_CONFIG.STORE_NAME);
                
                const getRequest = store.get(id);
                
                getRequest.onsuccess = () => {
                    const video = getRequest.result;
                    if (!video) {
                        reject(new Error('Video not found'));
                        return;
                    }
                    
                    const updatedVideo = { ...video, ...updates };
                    const updateRequest = store.put(updatedVideo);
                    
                    updateRequest.onsuccess = () => resolve();
                    updateRequest.onerror = () => reject(updateRequest.error);
                };
                
                getRequest.onerror = () => reject(getRequest.error);
            });
        }

        // ==============================================
        // ULTRA UI INITIALIZATION
        // ==============================================
        function initUltraUI() {
            // Initialize controls
            initUltraControls();
            
            // Initialize storage selector
            initUltraStorageSelector();
            
            // Initialize quality selector
            initUltraQualitySelector();
            
            // Initialize audio settings
            initUltraAudioSettings();
            
            // Initialize cloud settings
            initUltraCloudSettings();
            
            // Initialize AI settings
            initUltraAISettings();
            
            // Initialize library controls
            initUltraLibraryControls();
            
            // Initialize modal controls
            initUltraModalControls();
            
            // Initialize progress overlay
            initUltraProgressOverlay();
            
            // Initialize theme switcher
            initUltraThemeSwitcher();
            
            // Initialize back to top
            initUltraBackToTop();
            
            // Initialize shortcuts
            initUltraShortcuts();
            
            console.log('Ultra UI initialized');
        }

        function initUltraControls() {
            // Main recording controls
            document.getElementById('recordBtnUltra').addEventListener('click', startUltraRecording);
            document.getElementById('stopBtnUltra').addEventListener('click', stopUltraRecording);
            document.getElementById('downloadBtnUltra').addEventListener('click', downloadUltraRecording);
            document.getElementById('cloudBtnUltra').addEventListener('click', uploadUltraRecording);
            
            // Additional controls
            document.getElementById('manageBtnUltra').addEventListener('click', () => {
                document.querySelector('.ultra-library').scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
                showUltraToast('Opening enterprise video library', 'info');
            });
            
            document.getElementById('aiEnhanceBtnUltra').addEventListener('click', toggleAIEnhancement);
            document.getElementById('settingsBtnUltra').addEventListener('click', toggleUltraSettings);
            
            // Empty library recording button
            document.getElementById('startRecordingEmptyUltra').addEventListener('click', startUltraRecording);
        }

        function toggleAIEnhancement() {
            ultra.isAIEnhanced = !ultra.isAIEnhanced;
            const btn = document.getElementById('aiEnhanceBtnUltra');
            
            if (ultra.isAIEnhanced) {
                btn.style.background = 'linear-gradient(135deg, rgba(16, 185, 129, 0.3), rgba(16, 185, 129, 0.2))';
                btn.style.borderColor = 'rgba(16, 185, 129, 0.4)';
                btn.innerHTML = '<i class="fas fa-brain"></i>';
                showUltraMessage(' AI Enhancements: ON', 'success');
            } else {
                btn.style.background = 'linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05))';
                btn.style.borderColor = 'rgba(255, 255, 255, 0.2)';
                btn.innerHTML = '<i class="fas fa-brain"></i>';
                showUltraMessage(' AI Enhancements: OFF', 'warning');
            }
        }

        function toggleUltraSettings() {
            const settingsPanel = document.querySelector('.ultra-settings-panel');
            const isVisible = settingsPanel.style.display !== 'none';
            
            if (window.innerWidth <= 1400) {
                settingsPanel.style.display = isVisible ? 'none' : 'block';
                showUltraToast(isVisible ? 'Settings hidden' : 'Settings displayed', 'info');
            } else {
                settingsPanel.scrollIntoView({ behavior: 'smooth', block: 'start' });
                showUltraToast('Opening settings panel', 'info');
            }
        }

        // ==============================================
        // ULTRA RECORDING FUNCTIONS
        // ==============================================
        async function startUltraRecording() {
            try {
                // Show countdown
                await startUltraCountdown(3);
                
                // Get settings
                const quality = document.querySelector('input[name="qualityUltra"]:checked').value;
                
                // Request screen capture
                const stream = await navigator.mediaDevices.getDisplayMedia({
                    video: {
                        width: { ideal: 3840 },
                        height: { ideal: 2160 },
                        frameRate: { ideal: 60 },
                        cursor: 'always'
                    },
                    audio: document.getElementById('audioSystemUltra').checked
                });
                
                ultra.currentStream = stream;
                ultra.recordedChunks = [];
                ultra.recordingStartTime = Date.now();
                
                // Setup MediaRecorder
                const mimeType = 'video/webm;codecs=vp9,opus';
                const options = {
                    mimeType: mimeType,
                    videoBitsPerSecond: 8000000,
                    audioBitsPerSecond: 128000
                };
                
                ultra.mediaRecorder = new MediaRecorder(stream, options);
                
                // Setup event handlers
                ultra.mediaRecorder.ondataavailable = (event) => {
                    if (event.data.size > 0) {
                        ultra.recordedChunks.push(event.data);
                        
                        // Update file size
                        const totalSize = ultra.recordedChunks.reduce((sum, chunk) => sum + chunk.size, 0);
                        document.getElementById('fileSizeUltra').textContent = formatBytes(totalSize);
                    }
                };
                
                ultra.mediaRecorder.onstop = async () => {
                    try {
                        ultra.currentVideoBlob = new Blob(ultra.recordedChunks, { type: ultra.mediaRecorder.mimeType });
                        
                        // Create preview
                        createUltraPreview(ultra.currentVideoBlob);
                        
                        // Calculate duration
                        const duration = Math.floor((Date.now() - ultra.recordingStartTime) / 1000);
                        
                        // Prepare metadata
                        const metadata = {
                            title: `Ultra_Recording_${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}`,
                            type: ultra.mediaRecorder.mimeType,
                            size: ultra.currentVideoBlob.size,
                            duration: duration,
                            resolution: quality === '8k' ? '76804320' : quality === '4k' ? '38402160' : '19201080',
                            quality: quality,
                            fps: 60,
                            aiEnhanced: ultra.isAIEnhanced
                        };
                        
                        // Save video
                        const videoId = await saveUltraVideo(ultra.currentVideoBlob, metadata);
                        
                        // Enable actions
                        document.getElementById('downloadBtnUltra').disabled = false;
                        document.getElementById('cloudBtnUltra').disabled = false;
                        
                        showUltraMessage(` ${quality.toUpperCase()} recording saved successfully!`, 'success');
                        
                        // Update stats
                        document.getElementById('resolutionUltra').textContent = quality.toUpperCase();
                        
                    } catch (error) {
                        console.error('Error processing recording:', error);
                        showUltraMessage('Failed to process recording: ' + error.message, 'error');
                    } finally {
                        cleanupUltraRecording();
                    }
                };
                
                // Start recording
                ultra.mediaRecorder.start(1000);
                
                // Start timer
                ultra.recordingTimer = setInterval(updateUltraTimer, 1000);
                
                // Update UI
                ultra.isRecording = true;
                document.getElementById('recordBtnUltra').disabled = true;
                document.getElementById('stopBtnUltra').disabled = false;
                document.getElementById('recordingStatusUltra').style.display = 'flex';
                
                showUltraMessage(` Recording started in ${quality.toUpperCase()}`, 'success');
                
                // Handle stream end
                stream.getVideoTracks()[0].onended = () => {
                    if (ultra.isRecording) {
                        stopUltraRecording();
                    }
                };
                
            } catch (error) {
                console.error('Error starting recording:', error);
                
                if (error.name === 'NotAllowedError') {
                    showUltraMessage('Permission denied. Please allow screen access.', 'error');
                } else {
                    showUltraMessage('Failed to start recording: ' + error.message, 'error');
                }
                
                resetUltraRecording();
            }
        }

        function stopUltraRecording() {
            if (ultra.mediaRecorder && ultra.mediaRecorder.state !== 'inactive') {
                ultra.mediaRecorder.stop();
                clearInterval(ultra.recordingTimer);
                ultra.isRecording = false;
                resetUltraRecordingUI();
            }
        }

        function resetUltraRecording() {
            if (ultra.currentStream) {
                ultra.currentStream.getTracks().forEach(track => track.stop());
                ultra.currentStream = null;
            }
            
            if (ultra.recordingTimer) {
                clearInterval(ultra.recordingTimer);
            }
            
            ultra.recordedChunks = [];
            ultra.isRecording = false;
            ultra.currentVideoBlob = null;
            resetUltraRecordingUI();
        }

        function resetUltraRecordingUI() {
            document.getElementById('recordBtnUltra').disabled = false;
            document.getElementById('stopBtnUltra').disabled = true;
            document.getElementById('recordingStatusUltra').style.display = 'none';
            document.getElementById('timerDisplayUltra').textContent = '00:00:00';
            document.getElementById('fileSizeUltra').textContent = '0 GB';
        }

        function updateUltraTimer() {
            if (!ultra.isRecording) return;
            
            const elapsed = Math.floor((Date.now() - ultra.recordingStartTime) / 1000);
            document.getElementById('timerDisplayUltra').textContent = formatTime(elapsed);
        }

        function createUltraPreview(blob) {
            const videoURL = URL.createObjectURL(blob);
            const previewVideo = document.getElementById('previewVideoUltra');
            const videoOverlay = document.getElementById('videoOverlayUltra');
            
            previewVideo.src = videoURL;
            previewVideo.style.display = 'block';
            videoOverlay.style.display = 'none';
        }

        // ==============================================
        // ULTRA LIBRARY FUNCTIONS
        // ==============================================
        async function loadUltraLibrary(filter = 'all', search = '') {
            try {
                const videos = await getAllUltraVideos();
                
                // Apply filters
                let filteredVideos = videos;
                
                if (filter === 'local') {
                    filteredVideos = videos.filter(v => !v.isCloud);
                } else if (filter === 'cloud') {
                    filteredVideos = videos.filter(v => v.isCloud);
                } else if (filter === 'recent') {
                    filteredVideos = videos.sort((a, b) => new Date(b.date) - new Date(a.date)).slice(0, 12);
                } else if (filter === 'favorite') {
                    filteredVideos = videos.filter(v => v.favorite);
                }
                
                // Apply search
                if (search) {
                    const searchTerm = search.toLowerCase();
                    filteredVideos = filteredVideos.filter(v => 
                        v.title.toLowerCase().includes(searchTerm) ||
                        v.quality.toLowerCase().includes(searchTerm) ||
                        (v.tags && v.tags.some(tag => tag.toLowerCase().includes(searchTerm)))
                    );
                }
                
                // Sort by date (newest first)
                filteredVideos.sort((a, b) => new Date(b.date) - new Date(a.date));
                
                const videoGrid = document.getElementById('videoGridUltra');
                const emptyLibrary = document.getElementById('emptyLibraryUltra');
                
                if (filteredVideos.length === 0) {
                    videoGrid.innerHTML = '';
                    emptyLibrary.style.display = 'block';
                    return;
                }
                
                emptyLibrary.style.display = 'none';
                videoGrid.innerHTML = '';
                
                // Create video cards
                filteredVideos.forEach((video, index) => {
                    setTimeout(() => {
                        const card = createUltraVideoCard(video);
                        videoGrid.appendChild(card);
                    }, index * 50);
                });
                
                // Update video count
                updateUltraVideoCount();
                
            } catch (error) {
                console.error('Error loading library:', error);
                showUltraMessage('Failed to load video library', 'error');
            }
        }

        function createUltraVideoCard(video) {
            const card = document.createElement('div');
            card.className = 'video-card-ultra clickable';
            card.dataset.id = video.id;
            
            const duration = video.duration ? formatTime(video.duration) : '--:--';
            const date = formatDate(video.date);
            const size = formatBytes(video.size);
            const views = video.views || 0;
            
            card.innerHTML = `
                <div class="video-thumbnail-ultra">
                    <div class="video-badges-ultra">
                        <span class="video-badge-ultra quality">${video.quality.toUpperCase()}</span>
                        ${video.isCloud ? '<span class="video-badge-ultra cloud"><i class="fas fa-cloud"></i> CLOUD</span>' : ''}
                        ${video.aiEnhanced ? '<span class="video-badge-ultra" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1)); color: #34d399; border-color: rgba(16, 185, 129, 0.3);"><i class="fas fa-brain"></i> AI</span>' : ''}
                    </div>
                    <i class="fas fa-play-circle" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 4rem; color: rgba(255,255,255,0.9); z-index: 1; text-shadow: 0 0 20px rgba(0,0,0,0.5);"></i>
                    <div style="position: absolute; bottom: 20px; right: 20px; background: rgba(0,0,0,0.7); padding: 8px 16px; border-radius: 50px; font-size: 0.9rem; font-weight: 600; backdrop-filter: blur(10px);">
                        ${duration}
                    </div>
                </div>
                <div class="video-info-ultra">
                    <h3 class="video-title-ultra" title="${video.title}">${video.title}</h3>
                    <div class="video-meta-ultra">
                        <div class="meta-item-ultra">
                            <i class="fas fa-expand-alt"></i>
                            <span>${video.resolution}</span>
                        </div>
                        <div class="meta-item-ultra">
                            <i class="fas fa-file-alt"></i>
                            <span>${size}</span>
                        </div>
                        <div class="meta-item-ultra">
                            <i class="fas fa-calendar"></i>
                            <span>${date}</span>
                        </div>
                        <div class="meta-item-ultra">
                            <i class="fas fa-eye"></i>
                            <span>${views} views</span>
                        </div>
                    </div>
                    <div class="video-actions-ultra">
                        <button class="action-btn-ultra play-btn clickable" title="Play">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="action-btn-ultra download-btn clickable" title="Download">
                            <i class="fas fa-download"></i>
                        </button>
                        <button class="action-btn-ultra favorite-btn clickable" title="${video.favorite ? 'Remove favorite' : 'Add favorite'}" style="${video.favorite ? 'background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.1)); color: #fbbf24; border-color: rgba(245, 158, 11, 0.3);' : ''}">
                            <i class="fas ${video.favorite ? 'fa-star' : 'fa-star'}"></i>
                        </button>
                        ${!video.isCloud ? 
                            `<button class="action-btn-ultra cloud-btn upload-btn clickable" title="Upload to Cloud">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </button>` : 
                            `<button class="action-btn-ultra cloud-btn view-cloud-btn clickable" title="View in Cloud">
                                <i class="fas fa-external-link-alt"></i>
                            </button>`
                        }
                    </div>
                </div>
            `;
            
            // Add event listeners
            const addClickListener = (selector, handler) => {
                const element = card.querySelector(selector);
                if (element) {
                    element.addEventListener('click', (e) => {
                        e.stopPropagation();
                        handler(video.id);
                    });
                }
            };
            
            addClickListener('.play-btn', playUltraVideo);
            addClickListener('.download-btn', downloadUltraVideo);
            addClickListener('.favorite-btn', toggleUltraFavorite);
            
            if (!video.isCloud) {
                addClickListener('.upload-btn', uploadUltraVideoToCloud);
            } else {
                addClickListener('.view-cloud-btn', () => {
                    showUltraToast('Enterprise cloud storage (Demo)', 'info');
                });
            }
            
            // Card click for play
            card.addEventListener('click', (e) => {
                if (!e.target.closest('.video-actions-ultra')) {
                    playUltraVideo(video.id);
                }
            });
            
            return card;
        }

        async function playUltraVideo(id) {
            try {
                // Get video from database (simulated)
                const videos = await getAllUltraVideos();
                const video = videos.find(v => v.id === id);
                
                if (!video) {
                    showUltraMessage('Video not found', 'error');
                    return;
                }
                
                ultra.currentVideoId = id;
                
                // Simulate getting video data
                const blob = new Blob([new ArrayBuffer(video.size)], { type: video.type });
                const url = URL.createObjectURL(blob);
                
                // Update modal
                const modalVideo = document.getElementById('modalVideoUltra');
                modalVideo.src = url;
                
                document.getElementById('modalTitleUltra').textContent = 'Enterprise Video Player';
                document.getElementById('modalVideoTitleUltra').textContent = video.title;
                document.getElementById('modalResolutionUltra').textContent = video.resolution;
                document.getElementById('modalSizeUltra').textContent = formatBytes(video.size);
                document.getElementById('modalDateUltra').textContent = formatDate(video.date);
                document.getElementById('modalDurationUltra').textContent = video.duration ? formatTime(video.duration) : '--:--';
                document.getElementById('modalCloudStatusUltra').textContent = video.isCloud ? 'Enterprise Cloud' : 'Local Storage';
                document.getElementById('modalViewsUltra').textContent = `${video.views || 0} views`;
                
                // Show modal
                document.getElementById('videoModalUltra').style.display = 'flex';
                
            } catch (error) {
                console.error('Error playing video:', error);
                showUltraMessage('Failed to play video: ' + error.message, 'error');
            }
        }

        // ==============================================
        // ULTRA UTILITY FUNCTIONS
        // ==============================================
        function formatTime(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            
            if (hours > 0) {
                return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }
            return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function formatBytes(bytes, decimals = 2) {
            if (bytes === 0) return '0 Bytes';
            
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            
            return parseFloat((bytes / Math.pow(k, i)).toFixed(decimals)) + ' ' + sizes[i];
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', {
                month: 'short',
                day: 'numeric',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function generateThumbnail(blob) {
            // Simulate thumbnail generation
            return Promise.resolve('data:image/svg+xml;base64,' + btoa('<svg width="400" height="225" xmlns="http://www.w3.org/2000/svg"><rect width="400" height="225" fill="#6366f1"/><text x="200" y="112" font-family="Arial" font-size="24" fill="white" text-anchor="middle">8K ULTRA HD</text></svg>'));
        }

        function updateUltraVideoCount() {
            getAllUltraVideos().then(videos => {
                document.getElementById('videoCountUltra').textContent = videos.length;
            });
        }

        async function updateUltraStorageInfo() {
            const videos = await getAllUltraVideos();
            const totalSize = videos.reduce((sum, video) => sum + (video.size || 0), 0);
            const usedPercent = Math.min((totalSize / ULTRA_CONFIG.MAX_LOCAL_STORAGE) * 100, 100);
            
            document.getElementById('fileSizeUltra').textContent = formatBytes(totalSize);
            
            // Update storage bar
            const storageFill = document.querySelector('.storage-fill-ultra');
            if (storageFill) {
                storageFill.style.width = `${usedPercent}%`;
            }
        }

        // ==============================================
        // ULTRA CLOUD FUNCTIONS
        // ==============================================
        async function initUltraCloud() {
            // Simulate cloud initialization
            ultra.isGoogleDriveConnected = true;
            
            // Update UI
            document.getElementById('driveConnectTextUltra').innerHTML = '<i class="fas fa-check-circle"></i> ENTERPRISE CLOUD CONNECTED';
            
            // Simulate storage usage
            setTimeout(() => {
                const storageFill = document.querySelector('.storage-fill-ultra');
                storageFill.style.width = '65%';
            }, 1000);
            
            console.log('Ultra Cloud initialized');
        }

        async function uploadUltraRecording() {
            if (!ultra.currentVideoBlob) {
                showUltraMessage('No recording to upload', 'error');
                return;
            }
            
            showUltraProgress('Uploading to Enterprise Cloud...');
            
            // Simulate upload
            let progress = 0;
            const interval = setInterval(() => {
                progress += 2;
                updateUltraProgress(progress, `Uploading ${formatBytes(ultra.currentVideoBlob.size * progress / 100)}`);
                
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        hideUltraProgress();
                        showUltraMessage(' Recording uploaded to enterprise cloud!', 'success');
                        showUltraToast('Cloud sync complete', 'success');
                    }, 500);
                }
            }, 50);
            
            ultra.uploadProgressInterval = interval;
        }

        async function uploadUltraVideoToCloud(videoId) {
            showUltraProgress('Uploading video to cloud...');
            
            // Simulate upload
            let progress = 0;
            const interval = setInterval(() => {
                progress += 5;
                updateUltraProgress(progress, `Processing enterprise upload...`);
                
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        hideUltraProgress();
                        showUltraMessage('Video uploaded to enterprise cloud', 'success');
                    }, 500);
                }
            }, 100);
        }

        // ==============================================
        // ULTRA UI COMPONENTS
        // ==============================================
        function initUltraStorageSelector() {
            document.querySelectorAll('.storage-option-ultra').forEach(option => {
                option.addEventListener('click', async () => {
                    document.querySelectorAll('.storage-option-ultra').forEach(o => o.classList.remove('active'));
                    option.classList.add('active');
                    
                    const mode = option.id.replace('storage', '').replace('Ultra', '').toLowerCase();
                    ultra.storageMode = mode;
                    
                    showUltraMessage(`Storage mode: ${mode.toUpperCase()}`, 'success');
                });
            });
        }

        function initUltraQualitySelector() {
            document.querySelectorAll('.quality-option-ultra').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.quality-option-ultra').forEach(o => o.classList.remove('selected'));
                    option.classList.add('selected');
                    
                    const quality = option.querySelector('input').value;
                    document.getElementById('resolutionUltra').textContent = quality.toUpperCase();
                    
                    showUltraToast(`Quality set to ${quality.toUpperCase()}`, 'info');
                });
            });
        }

        function initUltraAudioSettings() {
            document.querySelectorAll('#audioSystemUltra, #audioMicUltra, #audioSurroundUltra').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const label = this.parentElement.querySelector('div div').textContent;
                    showUltraToast(`${label}: ${this.checked ? 'ON' : 'OFF'}`, 'info');
                });
            });
        }

        function initUltraCloudSettings() {
            document.querySelectorAll('#cloudAutoBackupUltra, #cloudCompressUltra, #cloudSyncUltra').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const label = this.nextElementSibling ? this.nextElementSibling.textContent : 'Setting';
                    showUltraToast(`${label}: ${this.checked ? 'ENABLED' : 'DISABLED'}`, 'info');
                });
            });
            
            document.getElementById('connectDriveBtnUltra').addEventListener('click', () => {
                showUltraMessage('Enterprise cloud connection established', 'success');
            });
        }

        function initUltraAISettings() {
            document.querySelectorAll('#aiUpscaleUltra, #aiStabilizeUltra, #aiColorGradeUltra, #aiVoiceEnhanceUltra').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const label = this.nextElementSibling ? this.nextElementSibling.textContent : 'AI Feature';
                    showUltraToast(`${label}: ${this.checked ? 'ACTIVE' : 'INACTIVE'}`, 'info');
                });
            });
        }

        function initUltraLibraryControls() {
            // Search with debounce
            let searchTimeout;
            document.getElementById('searchInputUltra').addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    const activeFilter = document.querySelector('.filter-tab-ultra.active').dataset.filter;
                    loadUltraLibrary(activeFilter, e.target.value);
                }, 300);
            });
            
            // Filter tabs
            document.querySelectorAll('.filter-tab-ultra').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.filter-tab-ultra').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    const filter = tab.dataset.filter;
                    const search = document.getElementById('searchInputUltra').value;
                    loadUltraLibrary(filter, search);
                    
                    showUltraToast(`Filter: ${tab.textContent}`, 'info');
                });
            });
            
            // Sync all button
            document.getElementById('syncAllBtnUltra').addEventListener('click', syncAllUltraVideos);
            
            // Clear all button
            document.getElementById('clearAllBtnUltra').addEventListener('click', clearAllUltraVideos);
        }

        function initUltraModalControls() {
            document.getElementById('closeModalUltra').addEventListener('click', closeUltraModal);
            
            document.getElementById('modalDownloadBtnUltra').addEventListener('click', () => {
                if (ultra.currentVideoId) downloadUltraVideo(ultra.currentVideoId);
            });
            
            document.getElementById('modalCloudBtnUltra').addEventListener('click', () => {
                if (ultra.currentVideoId) uploadUltraVideoToCloud(ultra.currentVideoId);
            });
            
            document.getElementById('modalShareBtnUltra').addEventListener('click', () => {
                showUltraToast('Enterprise sharing activated', 'info');
            });
            
            document.getElementById('modalFavoriteBtnUltra').addEventListener('click', () => {
                if (ultra.currentVideoId) toggleUltraFavorite(ultra.currentVideoId);
            });
            
            document.getElementById('modalRenameBtnUltra').addEventListener('click', () => {
                if (ultra.currentVideoId) renameUltraVideo(ultra.currentVideoId);
            });
            
            document.getElementById('modalDeleteBtnUltra').addEventListener('click', () => {
                if (ultra.currentVideoId) deleteUltraVideo(ultra.currentVideoId);
            });
            
            // Close modal on escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && document.getElementById('videoModalUltra').style.display === 'flex') {
                    closeUltraModal();
                }
            });
            
            // Close modal when clicking outside
            document.getElementById('videoModalUltra').addEventListener('click', (e) => {
                if (e.target === document.getElementById('videoModalUltra')) {
                    closeUltraModal();
                }
            });
        }

        function initUltraProgressOverlay() {
            document.getElementById('cancelProgressBtnUltra').addEventListener('click', () => {
                hideUltraProgress();
                showUltraMessage('Upload cancelled', 'warning');
            });
            
            document.getElementById('minimizeProgressBtnUltra').addEventListener('click', () => {
                hideUltraProgress();
                showUltraToast('Upload continues in background', 'info');
            });
        }

        function initUltraThemeSwitcher() {
            document.getElementById('themeBtn').addEventListener('click', () => {
                ultra.currentTheme = ultra.currentTheme === 'dark' ? 'light' : 'dark';
                const btn = document.getElementById('themeBtn');
                
                if (ultra.currentTheme === 'light') {
                    btn.innerHTML = '<i class="fas fa-sun"></i>';
                    btn.style.background = 'linear-gradient(135deg, #fbbf24, #f59e0b)';
                    document.body.style.filter = 'invert(1) hue-rotate(180deg)';
                    showUltraMessage('Light theme activated', 'info');
                } else {
                    btn.innerHTML = '<i class="fas fa-moon"></i>';
                    btn.style.background = 'var(--gradient-glass)';
                    document.body.style.filter = 'none';
                    showUltraMessage('Dark theme activated', 'info');
                }
            });
        }

        function initUltraBackToTop() {
            const backToTop = document.getElementById('backToTop');
            
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    backToTop.classList.add('visible');
                } else {
                    backToTop.classList.remove('visible');
                }
            });
            
            backToTop.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }

        function initUltraShortcuts() {
            document.addEventListener('keydown', (e) => {
                // Don't trigger shortcuts if typing
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
                
                switch (e.key) {
                    case ' ':
                        e.preventDefault();
                        if (ultra.isRecording) stopUltraRecording();
                        else startUltraRecording();
                        break;
                    case 'd':
                    case 'D':
                        if (!ultra.isRecording && ultra.currentVideoBlob) {
                            downloadUltraRecording();
                        }
                        break;
                    case 'u':
                    case 'U':
                        if (!ultra.isRecording && ultra.currentVideoBlob) {
                            uploadUltraRecording();
                        }
                        break;
                    case 'l':
                    case 'L':
                        document.querySelector('.ultra-library').scrollIntoView({ behavior: 'smooth' });
                        break;
                    case '?':
                        e.preventDefault();
                        const guide = document.getElementById('shortcutsGuide');
                        guide.classList.toggle('visible');
                        break;
                    case 'Escape':
                        closeUltraModal();
                        document.getElementById('shortcutsGuide').classList.remove('visible');
                        break;
                }
            });
        }

        // ==============================================
        // ULTRA MESSAGE & TOAST SYSTEM
        // ==============================================
        function showUltraMessage(text, type = 'info', duration = 5000) {
            const container = document.getElementById('messageContainerUltra');
            
            // Remove old messages
            const messages = container.querySelectorAll('.message-ultra');
            if (messages.length > 3) {
                messages[0].remove();
            }
            
            const message = document.createElement('div');
            message.className = `message-ultra ${type}`;
            message.innerHTML = `
                <div class="message-icon-ultra">
                    <i class="fas fa-${getUltraMessageIcon(type)}"></i>
                </div>
                <div style="flex: 1;">
                    <div style="font-weight: 700; color: white; margin-bottom: 5px;">
                        ${getUltraMessageTitle(type)}
                    </div>
                    <div style="color: rgba(255, 255, 255, 0.8);">
                        ${text}
                    </div>
                </div>
                <button class="close-message clickable" style="background: transparent; border: none; color: rgba(255, 255, 255, 0.5); cursor: pointer; padding: 5px; font-size: 1.2rem;">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            container.appendChild(message);
            
            // Show with animation
            setTimeout(() => {
                message.style.display = 'flex';
            }, 10);
            
            // Close button
            message.querySelector('.close-message').addEventListener('click', () => {
                message.style.opacity = '0';
                message.style.transform = 'translateX(100%)';
                setTimeout(() => message.remove(), 300);
            });
            
            // Auto remove
            if (duration > 0) {
                setTimeout(() => {
                    if (message.parentNode) {
                        message.style.opacity = '0';
                        message.style.transform = 'translateX(100%)';
                        setTimeout(() => message.remove(), 300);
                    }
                }, duration);
            }
        }

        function showUltraToast(text, type = 'info', duration = 3000) {
            // Create toast container if not exists
            let toastContainer = document.getElementById('ultraToastContainer');
            if (!toastContainer) {
                toastContainer = document.createElement('div');
                toastContainer.id = 'ultraToastContainer';
                toastContainer.style.cssText = `
                    position: fixed;
                    bottom: 40px;
                    right: 40px;
                    z-index: 10002;
                    display: flex;
                    flex-direction: column;
                    gap: 15px;
                    max-width: 400px;
                `;
                document.body.appendChild(toastContainer);
            }
            
            // Remove old toasts
            const toasts = toastContainer.querySelectorAll('.ultra-toast');
            if (toasts.length > 2) {
                toasts[0].remove();
            }
            
            const toast = document.createElement('div');
            toast.className = `ultra-toast ${type}`;
            toast.style.cssText = `
                background: var(--gradient-glass);
                backdrop-filter: blur(20px);
                border: 1px solid ${getUltraToastBorderColor(type)};
                border-radius: var(--radius-md);
                padding: 15px 20px;
                color: white;
                display: flex;
                align-items: center;
                gap: 12px;
                animation: slideInRight 0.3s ease;
                box-shadow: var(--shadow-ultra);
                max-width: 350px;
            `;
            
            toast.innerHTML = `
                <i class="fas fa-${getUltraToastIcon(type)}" style="color: ${getUltraToastIconColor(type)}; font-size: 1.2rem;"></i>
                <span>${text}</span>
            `;
            
            toastContainer.appendChild(toast);
            
            // Auto remove
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => toast.remove(), 300);
            }, duration);
        }

        function getUltraMessageIcon(type) {
            switch (type) {
                case 'success': return 'check-circle';
                case 'error': return 'exclamation-circle';
                case 'warning': return 'exclamation-triangle';
                default: return 'info-circle';
            }
        }

        function getUltraMessageTitle(type) {
            switch (type) {
                case 'success': return 'SUCCESS';
                case 'error': return 'ERROR';
                case 'warning': return 'WARNING';
                default: return 'INFO';
            }
        }

        function getUltraToastBorderColor(type) {
            switch (type) {
                case 'success': return 'rgba(16, 185, 129, 0.3)';
                case 'error': return 'rgba(239, 68, 68, 0.3)';
                case 'warning': return 'rgba(245, 158, 11, 0.3)';
                default: return 'rgba(59, 130, 246, 0.3)';
            }
        }

        function getUltraToastIcon(type) {
            switch (type) {
                case 'success': return 'check-circle';
                case 'error': return 'exclamation-circle';
                case 'warning': return 'exclamation-triangle';
                default: return 'info-circle';
            }
        }

        function getUltraToastIconColor(type) {
            switch (type) {
                case 'success': return '#10b981';
                case 'error': return '#ef4444';
                case 'warning': return '#f59e0b';
                default: return '#3b82f6';
            }
        }

        // ==============================================
        // ULTRA PROGRESS SYSTEM
        // ==============================================
        function showUltraProgress(title) {
            document.getElementById('progressTitleUltra').textContent = title;
            document.getElementById('progressOverlayUltra').style.display = 'flex';
            document.getElementById('progressFillUltra').style.width = '0%';
            document.getElementById('progressTextUltra').textContent = '0%  Starting...';
        }

        function updateUltraProgress(percent, text) {
            const progressFill = document.getElementById('progressFillUltra');
            const progressText = document.getElementById('progressTextUltra');
            
            progressFill.style.width = percent + '%';
            progressText.textContent = Math.round(percent) + '%  ' + text;
            
            // Update color based on progress
            if (percent < 30) {
                progressFill.style.background = 'linear-gradient(90deg, #ef4444, #f59e0b)';
            } else if (percent < 70) {
                progressFill.style.background = 'linear-gradient(90deg, #f59e0b, #3b82f6)';
            } else {
                progressFill.style.background = 'linear-gradient(90deg, #3b82f6, #10b981)';
            }
        }

        function hideUltraProgress() {
            if (ultra.uploadProgressInterval) {
                clearInterval(ultra.uploadProgressInterval);
                ultra.uploadProgressInterval = null;
            }
            document.getElementById('progressOverlayUltra').style.display = 'none';
        }

        // ==============================================
        // ULTRA COUNTDOWN
        // ==============================================
        async function startUltraCountdown(seconds) {
            return new Promise((resolve) => {
                const countdownOverlay = document.getElementById('countdownOverlayUltra');
                const countdownNumber = document.getElementById('countdownNumberUltra');
                
                let current = seconds;
                countdownNumber.textContent = current;
                countdownOverlay.style.display = 'flex';
                
                const countdownInterval = setInterval(() => {
                    current--;
                    if (current <= 0) {
                        clearInterval(countdownInterval);
                        countdownOverlay.style.display = 'none';
                        resolve();
                    } else {
                        countdownNumber.textContent = current;
                    }
                }, 1000);
            });
        }

        // ==============================================
        // ULTRA LOADING ANIMATION
        // ==============================================
        async function simulateLoading() {
            const loadingOverlay = document.getElementById('loadingOverlayUltra');
            const loadingText = document.getElementById('loadingTextUltra');
            const loadingProgress = document.getElementById('loadingProgressFill');
            
            const steps = [
                'Initializing ULTRA framework...',
                'Loading AI enhancement engine...',
                'Connecting to enterprise cloud...',
                'Configuring 8K video pipeline...',
                'Preparing user interface...',
                'Almost ready...'
            ];
            
            for (let i = 0; i < steps.length; i++) {
                loadingText.textContent = steps[i];
                loadingProgress.style.width = `${(i + 1) * (100 / steps.length)}%`;
                await new Promise(resolve => setTimeout(resolve, 600));
            }
            
            // Hide loading overlay
            loadingOverlay.style.opacity = '0';
            setTimeout(() => {
                loadingOverlay.style.display = 'none';
            }, 500);
        }

        // ==============================================
        // ULTRA PERFORMANCE MONITORING
        // ==============================================
        function startUltraPerformanceMonitor() {
            // Monitor FPS
            let lastTime = performance.now();
            let frames = 0;
            
            setInterval(() => {
                const currentTime = performance.now();
                frames++;
                
                if (currentTime >= lastTime + 1000) {
                    const fps = Math.round((frames * 1000) / (currentTime - lastTime));
                    ultra.performanceMetrics.fps = fps;
                    lastTime = currentTime;
                    frames = 0;
                    
                    if (fps < 30 && ultra.isRecording) {
                        showUltraToast(`Low FPS: ${fps}`, 'warning');
                    }
                }
            }, 100);
            
            // Monitor memory (approximate)
            if (performance.memory) {
                setInterval(() => {
                    const memory = performance.memory;
                    ultra.performanceMetrics.memoryUsage = memory.usedJSHeapSize / memory.totalJSHeapSize;
                    
                    if (ultra.performanceMetrics.memoryUsage > 0.8) {
                        showUltraToast('High memory usage detected', 'warning');
                    }
                }, 30000);
            }
        }

        function startAutoSave() {
            setInterval(async () => {
                if (ultra.isRecording) {
                    await updateUltraStorageInfo();
                }
            }, ULTRA_CONFIG.AUTO_SAVE_INTERVAL);
        }

        // ==============================================
        // ULTRA EVENT LISTENERS
        // ==============================================
        function initUltraEvents() {
            // Handle window close during recording
            window.addEventListener('beforeunload', (e) => {
                if (ultra.isRecording) {
                    e.preventDefault();
                    e.returnValue = 'You are currently recording. Are you sure you want to leave?';
                    return e.returnValue;
                }
            });
            
            // Handle page visibility
            document.addEventListener('visibilitychange', () => {
                if (document.hidden && ultra.isRecording) {
                    showUltraToast('Recording continues in background', 'info');
                }
            });
            
            // Handle resize
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    updateUltraStorageInfo();
                }, 250);
            });
        }

        // ==============================================
        // ULTRA VIDEO ACTIONS
        // ==============================================
        async function downloadUltraRecording() {
            if (!ultra.currentVideoBlob) {
                showUltraMessage('No recording to download', 'error');
                return;
            }
            
            const a = document.createElement('a');
            const url = URL.createObjectURL(ultra.currentVideoBlob);
            const quality = document.querySelector('input[name="qualityUltra"]:checked').value;
            
            a.href = url;
            a.download = `ULTRA_Recording_${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}_${quality}.webm`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            setTimeout(() => URL.revokeObjectURL(url), 100);
            
            showUltraMessage('Download started', 'success');
        }

        async function downloadUltraVideo(videoId) {
            const videos = await getAllUltraVideos();
            const video = videos.find(v => v.id === videoId);
            
            if (!video) {
                showUltraMessage('Video not found', 'error');
                return;
            }
            
            const blob = new Blob([new ArrayBuffer(video.size)], { type: video.type });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `${video.title}.webm`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            setTimeout(() => URL.revokeObjectURL(url), 100);
            
            showUltraMessage('Video downloaded', 'success');
        }

        async function toggleUltraFavorite(videoId) {
            const videos = await getAllUltraVideos();
            const video = videos.find(v => v.id === videoId);
            
            if (!video) return;
            
            const newFavorite = !video.favorite;
            
            // Update UI immediately
            const card = document.querySelector(`.video-card-ultra[data-id="${videoId}"]`);
            if (card) {
                const favoriteBtn = card.querySelector('.favorite-btn');
                if (favoriteBtn) {
                    if (newFavorite) {
                        favoriteBtn.style.background = 'linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.1))';
                        favoriteBtn.style.color = '#fbbf24';
                        favoriteBtn.style.borderColor = 'rgba(245, 158, 11, 0.3)';
                        favoriteBtn.title = 'Remove favorite';
                    } else {
                        favoriteBtn.style.background = '';
                        favoriteBtn.style.color = '';
                        favoriteBtn.style.borderColor = '';
                        favoriteBtn.title = 'Add favorite';
                    }
                }
            }
            
            showUltraToast(newFavorite ? 'Added to favorites' : 'Removed from favorites', 'info');
        }

        async function renameUltraVideo(videoId) {
            const videos = await getAllUltraVideos();
            const video = videos.find(v => v.id === videoId);
            
            if (!video) return;
            
            const newName = prompt('Enter new name:', video.title);
            if (newName && newName.trim() !== '') {
                showUltraMessage('Video renamed', 'success');
            }
        }

        async function deleteUltraVideo(videoId) {
            if (!confirm('Delete this video?')) return;
            
            showUltraMessage('Video deleted', 'success');
            
            // Remove from UI
            const card = document.querySelector(`.video-card-ultra[data-id="${videoId}"]`);
            if (card) {
                card.style.opacity = '0';
                card.style.transform = 'scale(0.8)';
                setTimeout(() => card.remove(), 300);
            }
            
            // Close modal if open
            if (ultra.currentVideoId === videoId) {
                closeUltraModal();
            }
        }

        async function syncAllUltraVideos() {
            showUltraProgress('Syncing all videos...');
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                updateUltraProgress(progress, `Syncing video library...`);
                
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        hideUltraProgress();
                        showUltraMessage('All videos synced to cloud', 'success');
                    }, 500);
                }
            }, 200);
        }

        async function clearAllUltraVideos() {
            if (!confirm('Delete ALL videos? This cannot be undone.')) return;
            
            showUltraProgress('Clearing library...');
            
            setTimeout(() => {
                hideUltraProgress();
                showUltraMessage('Video library cleared', 'success');
                
                // Clear UI
                document.getElementById('videoGridUltra').innerHTML = '';
                document.getElementById('emptyLibraryUltra').style.display = 'block';
                updateUltraVideoCount();
            }, 1000);
        }

        function closeUltraModal() {
            document.getElementById('videoModalUltra').style.display = 'none';
            
            const modalVideo = document.getElementById('modalVideoUltra');
            if (modalVideo.src) {
                URL.revokeObjectURL(modalVideo.src);
                modalVideo.src = '';
                modalVideo.pause();
            }
            
            ultra.currentVideoId = null;
        }

        // ==============================================
        // ULTRA EXPORT FOR DEBUGGING
        // ==============================================
        window.ultraApp = {
            config: ULTRA_CONFIG,
            state: ultra,
            functions: {
                startRecording: startUltraRecording,
                stopRecording: stopUltraRecording,
                loadLibrary: loadUltraLibrary,
                showMessage: showUltraMessage,
                showToast: showUltraToast
            }
        };

        console.log('Screen Recorder ULTRA Enterprise initialized successfully!');
        console.log('Version:', ULTRA_CONFIG.APP_VERSION);
        console.log('Demo Mode:', ULTRA_CONFIG.DEMO_MODE);
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
</body>
</html>
