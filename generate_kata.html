<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexusAI - Generator Kata Indonesia Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4f46e5;
            --primary-hover: #4338ca;
            --accent: #06b6d4;
            --bg-dark: #0f172a;
            --bg-panel: rgba(30, 41, 59, 0.7);
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --border: rgba(255, 255, 255, 0.1);
            --radius: 16px;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
        }
        
        /* --- Sidebar --- */
        .sidebar {
            width: 260px;
            background: var(--bg-dark);
            border-right: 1px solid var(--border);
            padding: 25px;
            display: flex;
            flex-direction: column;
            position: fixed;
            height: 100%;
            z-index: 10;
        }
        
        .logo {
            font-family: 'Poppins', sans-serif;
            font-size: 1.4rem;
            font-weight: 800;
            color: white;
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        .logo span { background: linear-gradient(45deg, var(--primary), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        .menu-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 18px;
            color: var(--text-muted);
            text-decoration: none;
            border-radius: 10px;
            margin-bottom: 8px;
            transition: all 0.3s;
            cursor: pointer;
            font-size: 0.95rem;
            user-select: none;
        }
        .menu-item:hover { background: rgba(79, 70, 229, 0.1); color: white; }
        .menu-item.active { background: var(--primary); color: white; box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3); }
        
        /* --- Main Content --- */
        .main-content {
            margin-left: 260px;
            flex: 1;
            padding: 40px;
            position: relative;
        }
        
        header {
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        header h1 { font-family: 'Poppins', sans-serif; font-size: 2rem; margin-bottom: 8px; }
        header p { color: var(--text-muted); }

        /* --- Page Sections (SPA Logic) --- */
        .page-section { display: none; animation: fadeIn 0.4s ease-out; }
        .page-section.active { display: block; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Generator Styles --- */
        .generator-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            height: calc(100vh - 180px);
        }
        
        .card {
            background: var(--bg-panel);
            backdrop-filter: blur(12px);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 30px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }
        
        textarea {
            width: 100%;
            flex: 1;
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            color: white;
            font-size: 1.1rem;
            line-height: 1.7;
            font-family: 'Inter', sans-serif;
            resize: none;
            transition: 0.3s;
        }
        textarea:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 15px rgba(79, 70, 229, 0.2); }
        
        .controls {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            border-top: 1px solid var(--border);
            padding-top: 20px;
        }
        
        .control-group { display: flex; flex-direction: column; gap: 8px; }
        .control-label { font-size: 0.85rem; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; }
        
        .style-selector { display: flex; gap: 10px; flex-wrap: wrap; }
        .chip {
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border);
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: 0.2s;
        }
        .chip:hover { background: rgba(255,255,255,0.1); }
        .chip.active { background: var(--primary); border-color: var(--primary); color: white; }
        
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }
        .btn:hover { background: var(--primary-hover); transform: translateY(-2px); }
        .btn:active { transform: translateY(0); }
        .btn-outline { background: transparent; border: 1px solid var(--primary); color: var(--primary); }
        .btn-outline:hover { background: rgba(79, 70, 229, 0.1); }

        /* --- Enhanced Results List for many items --- */
        .results-container { 
            flex: 1; 
            overflow-y: auto; 
            padding-right: 10px; 
            display: flex; 
            flex-direction: column; 
            gap: 12px; 
        }
        
        .result-item {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 15px;
            cursor: pointer;
            transition: 0.2s;
            display: flex; justify-content: space-between; align-items: center;
        }
        .result-item:hover { background: rgba(255,255,255,0.05); border-color: var(--primary); }
        .result-item.selected { border-color: var(--primary); background: rgba(79, 70, 229, 0.1); }
        
        .result-text { 
            font-size: 0.95rem; line-height: 1.5; color: var(--text-main); 
            flex: 1; padding-right: 15px;
        }
        .result-meta { 
            font-size: 0.75rem; color: var(--text-muted); 
            white-space: nowrap; display: flex; flex-direction: column; align-items: center; gap: 5px;
        }
        
        .badge {
            padding: 3px 8px; border-radius: 6px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase;
        }
        .badge-formal { background: rgba(6, 182, 212, 0.15); color: #22d3ee; }
        .badge-gaul { background: rgba(236, 72, 153, 0.15); color: #f472b6; }
        .badge-baku { background: rgba(16, 185, 129, 0.15); color: #34d399; }
        .badge-wild { background: rgba(251, 146, 60, 0.15); color: #fbbf24; } /* Badge baru untuk variasi ekstrem */

        /* --- History & Dictionary Styles --- */
        .list-container {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;
        }
        .list-item {
            background: var(--bg-panel); border: 1px solid var(--border);
            border-radius: 12px; padding: 20px; display: flex; flex-direction: column; gap: 10px;
        }
        .list-item h4 { color: var(--accent); margin-bottom: 5px; font-size: 0.9rem; }
        .list-item p { font-size: 0.95rem; line-height: 1.5; color: var(--text-main); }
        .list-footer {
            margin-top: auto; padding-top: 10px; border-top: 1px solid var(--border);
            font-size: 0.8rem; color: var(--text-muted); display: flex; justify-content: space-between;
        }
        
        /* Settings */
        .settings-group {
            background: var(--bg-panel); border: 1px solid var(--border);
            padding: 25px; border-radius: var(--radius); margin-bottom: 20px;
            display: flex; justify-content: space-between; align-items: center;
        }

        /* Loading */
        .loading {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(15, 23, 42, 0.9); display: flex; flex-direction: column;
            align-items: center; justify-content: center; z-index: 20; border-radius: var(--radius);
            opacity: 0; pointer-events: none; transition: 0.3s;
        }
        .loading.active { opacity: 1; pointer-events: all; }
        .spinner {
            width: 40px; height: 40px; border: 3px solid rgba(255,255,255,0.1);
            border-top-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .loading p { margin-top: 15px; font-size: 0.9rem; color: var(--text-muted); }

        /* Mobile */
        @media (max-width: 900px) {
            .generator-wrapper { grid-template-columns: 1fr; height: auto; }
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 20px; }
        }
    </style>
</head>
<body>

    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo" onclick="switchPage('paraphraser')">
            <i class="fas fa-brain"></i> NexusAI <span>ID</span>
        </div>
        <nav>
            <a href="#" class="menu-item active" onclick="switchPage('paraphraser', this)">
                <i class="fas fa-magic"></i> Paraphraser
            </a>
            <a href="#" class="menu-item" onclick="switchPage('history', this)">
                <i class="fas fa-history"></i> Riwayat
            </a>
            <a href="#" class="menu-item" onclick="switchPage('dictionary', this)">
                <i class="fas fa-book"></i> Kamus Kata
            </a>
            <a href="#" class="menu-item" onclick="switchPage('settings', this)">
                <i class="fas fa-cog"></i> Pengaturan
            </a>
        </nav>
        <div style="margin-top: auto; font-size: 0.8rem; color: var(--text-muted);">
            &copy; 2024 Generator Kata
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <header>
            <div>
                <h1 id="pageTitle">Paraphraser</h1>
                <p id="pageDesc">Menghasilkan 15 variasi kalimat dalam satu kali klik.</p>
            </div>
        </header>

        <!-- HALAMAN 1: PARAPHRASER -->
        <div id="page-paraphraser" class="page-section active">
            <div class="generator-wrapper">
                <!-- Panel Input -->
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h3 style="font-weight: 600;">Teks Asli</h3>
                        <span id="wordCount" style="font-size: 0.9rem; color: var(--text-muted);">0 kata</span>
                    </div>
                    
                    <textarea id="inputText" placeholder="Ketik atau tempel kalimat di sini...&#10;Contoh: Saya sangat senang sekali hari ini."></textarea>
                    
                    <div class="controls">
                        <div class="control-group">
                            <label class="control-label">Gaya Bahasa</label>
                            <div class="style-selector" id="styleSelector">
                                <div class="chip active" data-mode="baku">Baku</div>
                                <div class="chip" data-mode="formal">Formal</div>
                                <div class="chip" data-mode="gaul">Gaul</div>
                                <div class="chip" data-mode="betawi">Betawi</div>
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">Tingkat Perubahan (Kekinian)</label>
                            <input type="range" id="intensity" min="1" max="10" value="6" style="width: 100%; accent-color: var(--primary);">
                        </div>

                        <button class="btn" onclick="generateText()">
                            <i class="fas fa-bolt"></i> Generate 15 Variasi
                        </button>
                        
                        <button class="btn btn-outline" onclick="loadExample()">
                            <i class="fas fa-lightbulb"></i> Contoh Kalimat
                        </button>
                    </div>
                </div>

                <!-- Panel Output -->
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h3 style="font-weight: 600;">Hasil Generate</h3>
                        <button class="btn btn-outline" style="padding: 8px 15px; font-size: 0.85rem;" onclick="copyResult()">
                            <i class="fas fa-copy"></i> Salin Pilihan
                        </button>
                    </div>

                    <div class="results-container" id="resultsList">
                        <div style="text-align: center; color: var(--text-muted); margin-top: 50px; opacity: 0.6;">
                            <i class="fas fa-layer-group" style="font-size: 3rem; margin-bottom: 15px;"></i>
                            <p>Klik Generate untuk 15 pilihan</p>
                        </div>
                    </div>

                    <!-- Loading -->
                    <div class="loading" id="loadingOverlay">
                        <div class="spinner"></div>
                        <p>Membuat 15 variasi...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- HALAMAN 2: RIWAYAT -->
        <div id="page-history" class="page-section">
            <div style="display: flex; justify-content: flex-end; margin-bottom: 20px;">
                <button class="btn btn-outline" style="padding: 8px 15px;" onclick="clearHistory()">
                    <i class="fas fa-trash"></i> Hapus Riwayat
                </button>
            </div>
            <div class="list-container" id="historyList">
                <div class="list-item">
                    <h4><i class="fas fa-circle" style="font-size:8px; color:var(--accent)"></i> Gaul - Baru saja</h4>
                    <p>"Gue mau ngegas bisnis baru yang bisa bikin cuan berlimpah."</p>
                    <div class="list-footer">
                        <span>Opsi 1</span>
                        <span onclick="copyText('Gue mau ngegas bisnis baru yang bisa bikin cuan berlimpah.')" style="cursor:pointer; color:var(--primary)">Salin</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- HALAMAN 3: KAMUS KATA -->
        <div id="page-dictionary" class="page-section">
            <div style="margin-bottom: 20px; color: var(--text-muted);">
                <p>Daftar referensi kata yang digunakan oleh mesin.</p>
            </div>
            <h3 style="margin: 20px 0 10px; color: var(--accent);">Mode Baku (EYD)</h3>
            <div class="list-container" style="margin-bottom: 30px;">
                <div class="list-item" style="flex-direction:row; justify-content:space-between;">
                    <strong>bagus</strong> <span>&rarr; baik, memuaskan, elok, berkualitas</span>
                </div>
                <div class="list-item" style="flex-direction:row; justify-content:space-between;">
                    <strong>kerja</strong> <span>&rarr; bekerja, melaksanakan, menjalankan</span>
                </div>
                <div class="list-item" style="flex-direction:row; justify-content:space-between;">
                    <strong>lihat</strong> <span>&rarr; melihat, memperhatikan, mengamati, menatap</span>
                </div>
                <div class="list-item" style="flex-direction:row; justify-content:space-between;">
                    <strong>saya</strong> <span>&rarr; aku, kami, diri saya</span>
                </div>
            </div>
            <h3 style="margin: 20px 0 10px; color: #f472b6;">Mode Gaul (Milenial)</h3>
            <div class="list-container" style="margin-bottom: 30px;">
                <div class="list-item" style="flex-direction:row; justify-content:space-between;">
                    <strong>sangat</strong> <span>&rarr; banget, parah, amet, kelewatan</span>
                </div>
                <div class="list-item" style="flex-direction:row; justify-content:space-between;">
                    <strong>teman</strong> <span>&rarr; temen, bestie, squad, sobat, homie</span>
                </div>
                <div class="list-item" style="flex-direction:row; justify-content:space-between;">
                    <strong>kerja</strong> <span>&rarr; ngurusin, handle, nge-gas, ngopi</span>
                </div>
            </div>
        </div>

        <!-- HALAMAN 4: PENGATURAN -->
        <div id="page-settings" class="page-section">
            <h3 style="margin-bottom: 20px;">Pengaturan Aplikasi</h3>
            <div class="settings-group">
                <div>
                    <h4 style="margin-bottom: 5px;">Mode Gelap</h4>
                    <p style="font-size: 0.9rem; color: var(--text-muted);">Aktifkan tampilan gelap.</p>
                </div>
                <button class="btn" style="background: var(--accent); margin:0; width: 100px; padding: 10px;" onclick="alert('Mode Gelap Sedang Aktif!')">Aktif</button>
            </div>
            <div class="settings-group">
                <div>
                    <h4 style="margin-bottom: 5px;">Versi</h4>
                    <p style="font-size: 0.9rem; color: var(--text-muted);">NexusAI ID v2.0 (High Volume)</p>
                </div>
                <i class="fas fa-check-circle" style="font-size: 1.5rem; color: var(--accent);"></i>
            </div>
        </div>

    </div>

    <script>
        // --- DATABASE KATA BAHASA INDONESIA (DIPERLUAS) ---
        
        const bakuDict = {
            "bagus": ["baik", "memuaskan", "berkualitas", "elok", "cukup", "layak"],
            "kerja": ["bekerja", "melakukan", "menjalankan", "mengerjakan", "melaksanakan", "mengupayakan"],
            "cepat": ["kilat", "segera", "dengan cepat", "gesit", "tergesa-gesa"],
            "senang": ["gembira", "suka", "bahagia", "riang", "girang"],
            "lihat": ["melihat", "memperhatikan", "menatap", "mengamati", "menyaksikan"],
            "tahu": ["mengetahui", "paham", "mengerti", "tahu menahu", "sadari"],
            "saya": ["aku", "kami", "diri saya", "pribadi saya"],
            "kamu": ["anda", "engkau", "kalian", "semuanya"],
            "cari": ["mencari", "mencari tahu", "memburu", "menelusuri"],
            "mulai": ["memulai", "mengawali", "memulainya", "menginisiasi"],
            "tulis": ["menulis", "mencatat", "mengarang", "mereka"],
            "uang": ["dana", "finansial", "modal", "biaya", "aset"],
            "bisnis": ["usaha", "niaga", "perdagangan", "dagang"],
            "teman": ["sahabat", "kawan", "rekan", "kerabat"],
            "percaya": ["yakin", "mempercayai", "mengandalkan"],
            "pakai": ["menggunakan", "memakai", "memanfaatkan", "mengaplikasikan"],
            "pikir": ["berpikir", "merenung", "mempertimbangkan", "menimbang"],
            "dengar": ["mendengar", "menyimak", "mendengarkan"],
            "kata": ["mengatakan", "menyampaikan", "berkata", "menyatakan"],
            "bilang": ["berkata", "mengatakan", "mengucapkan"],
            "marah": ["murka", "geram", "naik pitam", "kesal"],
            "tanya": ["bertanya", "menanyakan", "menanyai"],
            "temu": ["bertemu", "menemui", "jumpa"],
            "punya": ["memiliki", "mempunyai", "milik"],
            "ingin": ["menginginkan", "berkeinginan", "hendak"],
            "perlu": ["membutuhkan", "memerlukan", "mengharuskan"],
            "bisa": ["dapat", "mampu", "sanggup", "berkesanggupan"],
            "jalan": ["berjalan", "melangkah", "melalui", "lewat"],
            "ini": ["tersebut", "ini", "yang ini"],
            "itu": ["tersebut", "itu", "yang itu"],
            "kita": ["kita", "kami", "para kita"]
        };

        const gaulDict = {
            "bagus": ["keren", "mantap", "kece", "juara", "top", "mantul", "sangat baik", "oke punya", "sipp"],
            "kerja": ["ngurusin", "handle", "nge-gas", "fokus", "nge-tekun", "ngelakuin", "nggarap"],
            "cepat": ["ngebut", "kencang", "gesit", "kce", "instant", "ancur", "jos"],
            "senang": ["happy", "seneng", "glowing", "sumringah", "senyum-senyum", "santuy"],
            "lihat": ["check", "liatin", "intip", "stalking", "kepo", "rekam"],
            "tahu": ["tau", "ngerti", "paham", "grasp", "ngeuh", "ngerti banget"],
            "saya": ["aku", "gue", "anaknya", "gwe", "aing"],
            "kamu": ["loe", "lu", "kalian", "sobs", "bestie", "kamu-kamu"],
            "cari": ["buru", "hunting", "cari", "pencarian", "nyariin"],
            "mulai": ["gas", "start", "kick-off", "nyalain", "awal"],
            "tulis": ["tulisin", "catet", "posting", "upload"],
            "uang": ["duit", "cuan", "budget", "recehan", "pundi", "fulus"],
            "bisnis": ["usaha", "side hustle", "lapak", "dagang"],
            "teman": ["temen", "sobat", "partner", "squad", "ally", "homie"],
            "percaya": ["yakin", "percaya deh", "amin", "siyap"],
            "pakai": ["pake", "make", "jajal", "make use"],
            "pikir": ["mikir", "otak-atik", "brainstorm", "berpikir"],
            "dengar": ["denger", "nyimak", "dengerin"],
            "kata": ["bilang", "ngomong", "cerita", "ngomongin"],
            "bilang": ["ngomong", "bilangin", "ngasih tau"],
            "marah": ["kesel", "gerah", "naik darah", "triggered", "bete"],
            "tanya": ["tanya", "nanya", "nanyain", "tanya-tanya"],
            "temu": ["ketemu", "kopdar", "jumpa", "papasan"],
            "punya": ["punya", "ada", "empunya", "punyanya"],
            "ingin": ["mau", "pengen", "niat", "maunya"],
            "perlu": ["butuh", "perlukan", "wajib", "harus"],
            "bisa": ["bisa", "mampu", "sanggup", "jadi", "oke"],
            "jalan": ["jalan", "lewat", "lewat-in", "liwat"],
            "sangat": ["banget", "berat", "parah", "amet", "sekali"],
            "tidak": ["gak", "enggak", "nggak", "kagak"],
            "maaf": ["sorry", "my bad", "yha maap", "nuwun"],
            "sedih": ["sedih", "galau", "gundah", "down", "nangis"],
            "makan": ["makan", "ngemil", "nyemil", "santap", "mamam"],
            "tidur": ["tidur", "bobok", "lelap", "rehat", "pule"],
            "ini": ["ini", "nih", "ne", "ini loh"],
            "itu": ["itu", "tuh", "tu", "itu lo"]
        };

        const formalDict = {
            "bagus": ["optimal", "unggul", "berkualitas", "profesional", "memuaskan"],
            "kerja": ["bekerja", "menjalankan tugas", "melaksanakan", "operasional", "melakukan"],
            "cepat": ["efisien", "responsif", "segera", "tertib", "ekspres"],
            "senang": ["senang", "bangga", "puas", "tertarik"],
            "lihat": ["meninjau", "memeriksa", "menganalisis", "mengkaji", "menelaah"],
            "tahu": ["memahami", "mengetahui", "mengerti", "mengerti"],
            "saya": ["saya", "kami", "pihak kami", "diri saya"],
            "kamu": ["anda", "bapak/ibu", "pihak terkait", "semua pihak"],
            "cari": ["mencari", "menelusuri", "mengidentifikasi", "mencari tahu"],
            "mulai": ["memulai", "menginisiasi", "menjalankan", "memulai aktivitas"],
            "tulis": ["menulis", "mencatat", "mendokumentasikan", "merekam"],
            "uang": ["dana", "anggaran", "biaya", "finansial", "modal"],
            "bisnis": ["perusahaan", "instansi", "organisasi", "badan usaha"],
            "teman": ["rekan kerja", "partner", "kolaborator", "rekan"],
            "percaya": ["percaya", "yakin", "mengandalkan", "mempercayai"],
            "pakai": ["menggunakan", "memanfaatkan", "mengaplikasikan", "memakai"],
            "pikir": ["berpikir", "menganalisis", "memikirkan", "merenungkan"],
            "dengar": ["mendengarkan", "menyimak", "mendengar"],
            "kata": ["menyampaikan", "menginformasikan", "menyatakan", "mengucapkan"],
            "bilang": ["mengatakan", "menginformasikan", "menyampaikan"],
            "marah": ["tidak setuju", "kecewa", "protes", "berkeberatan"],
            "tanya": ["bertanya", "mengajukan pertanyaan", "mengklarifikasi"],
            "temu": ["bertemu", "berdiskusi", "berkumpul", "berkoordinasi"],
            "punya": ["memiliki", "memegang", "mengadopsi"],
            "ingin": ["menginginkan", "berkeinginan", "merencanakan", "berniat"],
            "perlu": ["membutuhkan", "memerlukan", "mengharuskan", "mewajibkan"],
            "bisa": ["dapat", "mampu", "berpotensi", "kesanggupan"],
            "jalan": ["berjalan", "berlangsung", "beroperasi", "melalui"]
        };
        
        const betawiDict = {
            "bagus": ["keren", "bageur", "endol", "jempol", "oke"],
            "kerja": ["gawe", "bekerja", "nyambang gawe", "ngelakonin", "gawe"],
            "cepat": ["cepet", "sengep", "kancing", "gesit"],
            "senang": ["seneng", "seneeng", "girang", "sumringah"],
            "lihat": ["deleng", "ningali", "podo", "litik"],
            "tahu": ["paham", "nyaho", "ngarti", "ngeteh"],
            "saya": ["aing", "gue", "saya", "urang"],
            "kamu": ["eluh", "loe", "kowe", "sampeyan"],
            "cari": ["nggala", "milarian", "buru", "milarinya"],
            "mulai": ["mulai", "mulaikeun", "muluan"],
            "tulis": ["nulis", "serat", "tulis"],
            "uang": ["duit", "receiving", "fulus", " Receh"],
            "bisnis": ["dagang", "usaho", "niaga"],
            "teman": ["kanca", "sobat", "kawan", "rekan"],
            "percaya": ["yakin", "percaya"],
            "pakai": ["make", "paake", "makai"],
            "pikir": ["mikir", "pikir", "renung"],
            "dengar": ["mireng", "denge", "denger"],
            "kata": ["kecap", "omong", "carita", "ukeuran"],
            "bilang": ["bilang", "omong", "nyarios"],
            "marah": ["gerah", "nacur", "sebel", "dongkol"],
            "tanya": ["nanya", "tanya", "tanyaan"],
            "temu": ["temu", "papasan", "ketemu"],
            "punya": ["punya", "milik", "ngagem"],
            "ingin": ["pengen", "arep", "kayun"],
            "perlu": ["butuh", "perlu", "kudu"],
            "bisa": ["bisa", "iso", "sagem", "bebas"],
            "jalan": ["lewat", "liwat", "jalan", "melu"],
            "tidak": ["kagak", "gak", "enteu", "henteu"],
            "maaf": ["pamit", "nuhun", "punten"],
            "makan": ["dahar", "tuang", "mamam"],
            "tidur": ["sare", "turu", "bobo"]
        };

        // --- STATE MANAGEMENT ---
        let currentMode = 'baku';
        let selectedText = '';

        // --- CORE FUNCTIONS ---

        function getDictionary() {
            if (currentMode === 'baku') return bakuDict;
            if (currentMode === 'formal') return formalDict;
            if (currentMode === 'gaul') return gaulDict;
            if (currentMode === 'betawi') return betawiDict;
            return bakuDict;
        }

        function generateText() {
            const input = document.getElementById('inputText').value.trim();
            if (!input) {
                alert("Mohon ketik teks terlebih dahulu!");
                return;
            }

            const loader = document.getElementById('loadingOverlay');
            const list = document.getElementById('resultsList');
            const intensity = parseInt(document.getElementById('intensity').value);
            
            loader.classList.add('active');
            list.innerHTML = '';

            setTimeout(() => {
                const dict = getDictionary();
                const variations = [];
                const numVariations = 15; // DIUBAH DARI 5 KE 15
                
                for (let i = 0; i < numVariations; i++) {
                    let result = input;
                    const tokens = result.split(/([ \n]+)/);
                    
                    // Variasi Intensity: Agar hasil tidak semua sama,
                    // kita berikan variasi kecil pada probability setiap loop
                    // Loop awal (0-4) lebih konservatif, Loop akhir (10-14) lebih 'liar'
                    let localIntensity = intensity;
                    if(i > 10) localIntensity += 2; // Tambah peluang ganti kata di akhir
                    if(i < 5) localIntensity -= 1; // Kurangi peluang di awal

                    const processedTokens = tokens.map(token => {
                        if (!token.trim()) return token;
                        let cleanWord = token.replace(/[^\w\s]|_/g, "").toLowerCase();
                        
                        if (!dict[cleanWord]) {
                            if(currentMode === 'gaul' && cleanWord === 'saya') cleanWord = 'aku';
                            if(currentMode === 'betawi' && cleanWord === 'saya') cleanWord = 'aing';
                        }

                        if (dict[cleanWord]) {
                            const synonyms = dict[cleanWord];
                            
                            // Probability base
                            let probability = 0.1 + (localIntensity * 0.05);
                            if (probability > 0.9) probability = 0.9; // Batas max
                            
                            if (Math.random() < probability) {
                                const synonym = synonyms[Math.floor(Math.random() * synonyms.length)];
                                
                                if (token[0] === token[0].toUpperCase()) {
                                    return synonym.charAt(0).toUpperCase() + synonym.slice(1);
                                }
                                return synonym;
                            }
                        }
                        return token;
                    });

                    variations.push(processedTokens.join(''));
                }

                renderResults(variations);
                loader.classList.remove('active');
            }, 800); // Delay sedikit lebih lama karena generate 15
        }

        function renderResults(variations) {
            const list = document.getElementById('resultsList');
            list.innerHTML = '';

            variations.forEach((text, index) => {
                const div = document.createElement('div');
                div.className = 'result-item';
                
                // Tandai sebagai 'wild' jika hasilnya berbeda jauh dari input asli (simple check by length diff)
                let isWild = Math.abs(text.length - variations[0].length) > 10;
                let badgeClass = isWild ? 'badge-wild' : `badge-${currentMode}`;
                let badgeText = isWild ? 'Liar' : (currentMode.charAt(0).toUpperCase() + currentMode.slice(1));

                if (index === 0) {
                    div.classList.add('selected');
                    selectedText = text;
                }

                div.innerHTML = `
                    <div class="result-text">${text}</div>
                    <div class="result-meta">
                        <span class="badge ${badgeClass}">${badgeText}</span>
                        <span>#${index + 1}</span>
                    </div>
                `;

                div.onclick = () => {
                    document.querySelectorAll('.result-item').forEach(item => item.classList.remove('selected'));
                    div.classList.add('selected');
                    selectedText = text;
                };

                list.appendChild(div);
            });
        }

        function addToHistory(text, mode) {
            const historyList = document.getElementById('historyList');
            const newItem = document.createElement('div');
            newItem.className = 'list-item';
            
            let badgeColor = 'var(--text-muted)';
            if(mode === 'baku') badgeColor = '#34d399';
            if(mode === 'gaul') badgeColor = '#f472b6';
            if(mode === 'formal') badgeColor = '#22d3ee';

            newItem.innerHTML = `
                <h4><i class="fas fa-circle" style="font-size:8px; color:${badgeColor}"></i> ${mode.toUpperCase()} - Baru saja</h4>
                <p>"${text}"</p>
                <div class="list-footer">
                    <span>Opsi 1</span>
                    <span onclick="copyText('${text.replace(/'/g, "\\'")}')" style="cursor:pointer; color:var(--primary)">Salin</span>
                </div>
            `;
            historyList.prepend(newItem);
        }

        function clearHistory() {
            if(confirm("Hapus semua riwayat?")) {
                document.getElementById('historyList').innerHTML = '<p style="color:var(--text-muted); grid-column: 1/-1; text-align:center;">Riwayat kosong.</p>';
            }
        }

        function copyResult() {
            if (!selectedText) return;
            navigator.clipboard.writeText(selectedText).then(() => {
                alert("Teks berhasil disalin!");
            });
        }
        
        function copyText(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert("Disalin: " + text);
            });
        }

        function loadExample() {
            const examples = [
                "Saya akan mengerjakan pekerjaan ini dengan sangat baik dan cepat.",
                "Jangan lupa untuk menghubungi teman saya jika ada masalah.",
                "Kita perlu mencari solusi yang bagus untuk masalah perusahaan ini.",
                "Dia sangat pintar dan selalu punya ide yang menarik untuk kita.",
                "Aku ingin memulai bisnis baru yang bisa menghasilkan banyak uang."
            ];
            const random = examples[Math.floor(Math.random() * examples.length)];
            document.getElementById('inputText').value = random;
            updateWordCount();
        }

        function updateWordCount() {
            const text = document.getElementById('inputText').value;
            const count = text.trim() === '' ? 0 : text.trim().split(/\s+/).length;
            document.getElementById('wordCount').innerText = count + ' kata';
        }

        // --- NAVIGATION & EVENTS ---
        
        function switchPage(pageId, element) {
            document.querySelectorAll('.page-section').forEach(el => el.classList.remove('active'));
            document.getElementById('page-' + pageId).classList.add('active');

            if (element) {
                document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
                element.classList.add('active');
            } else {
                document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
                const menuItems = document.querySelectorAll('.menu-item');
                menuItems.forEach(item => {
                    if(item.getAttribute('onclick').includes(pageId)) {
                        item.classList.add('active');
                    }
                });
            }

            const titles = {
                'paraphraser': { t: 'Paraphraser', d: 'Menghasilkan 15 variasi kalimat dalam satu kali klik.' },
                'history': { t: 'Riwayat', d: 'Daftar teks yang pernah Anda generate sebelumnya.' },
                'dictionary': { t: 'Kamus Kata', d: 'Daftar referensi kosakata yang digunakan oleh sistem.' },
                'settings': { t: 'Pengaturan', d: 'Konfigurasi preferensi aplikasi.' }
            };
            document.getElementById('pageTitle').innerText = titles[pageId].t;
            document.getElementById('pageDesc').innerText = titles[pageId].d;
        }
        
        document.querySelectorAll('.chip').forEach(chip => {
            chip.addEventListener('click', () => {
                document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
                chip.classList.add('active');
                currentMode = chip.dataset.mode;
            });
        });

        document.getElementById('inputText').addEventListener('input', updateWordCount);

    </script>
</body>
</html>
