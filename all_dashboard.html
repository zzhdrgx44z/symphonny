<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TOMMY HILFIGER // Y2K OS (CLEAN)</title>
<!-- Fonts: Space Mono (Data) & Outfit (Display) -->
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&family=Space+Mono&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<style>
/* =============== VARIABEL Y2K =============== */
:root {
--bg-desktop: #a0aec0;
--win-blue: #3b82f6;
--win-dark-blue: #1d4ed8;
--win-bg: #e2e8f0;
--border-white: #ffffff;
--cyber-pink: #ff00cc;
--cyber-yellow: #ffff00;
--cyber-green: #00ff66;
--text-dark: #1e293b;
--shadow-retro: 4px 4px 0px rgba(0,0,0,0.2);
}

/* =============== RESET & BASE =============== */
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
background-color: var(--bg-desktop);
background-image: 
radial-gradient(var(--win-blue) 1px, transparent 1px),
radial-gradient(var(--win-blue) 1px, transparent 1px);
background-size: 20px 20px;
background-position: 0 0, 10px 10px;
color: var(--text-dark);
font-family: 'Space Mono', monospace;
height: 100vh;
overflow: hidden;
display: flex;
flex-direction: column;
}

/* Desktop Top Bar */
.os-taskbar {
height: 40px;
background: rgba(255,255,255,0.8);
backdrop-filter: blur(5px);
border-bottom: 2px solid #fff;
display: flex;
justify-content: space-between;
align-items: center;
padding: 0 20px;
box-shadow: 0 2px 10px rgba(0,0,0,0.1);
flex-shrink: 0;
}

.os-clock {
font-weight: bold;
font-size: 1rem;
color: var(--win-dark-blue);
}

/* Desktop Workspace */
.workspace {
flex: 1;
padding: 40px;
display: flex;
gap: 30px;
overflow: hidden;
position: relative;
}

/* =============== WINDOW COMPONENTS =============== */
.window-frame {
background: var(--win-bg);
border: 3px solid var(--border-white);
border-radius: 8px;
box-shadow: var(--shadow-retro);
display: flex;
flex-direction: column;
overflow: hidden;
transition: 0.2s;
}
.window-frame:hover {
border-color: var(--cyber-pink);
}

.win-header {
background: linear-gradient(to bottom, var(--win-blue), var(--win-dark-blue));
color: white;
padding: 8px 15px;
display: flex;
justify-content: space-between;
align-items: center;
font-weight: bold;
font-family: 'Outfit', sans-serif;
text-transform: uppercase;
letter-spacing: 1px;
flex-shrink: 0;
}

.win-controls span {
width: 12px; height: 12px;
background: rgba(255,255,255,0.3);
border-radius: 50%;
margin-left: 5px;
display: inline-block;
border: 1px solid rgba(255,255,255,0.5);
}

/* =============== SIDEBAR WINDOW =============== */
.sidebar-win {
width: 240px;
flex-shrink: 0;
display: flex;
flex-direction: column;
}

.icon-grid {
padding: 20px;
display: grid;
grid-template-columns: 1fr 1fr;
gap: 20px;
overflow-y: auto; /* Scroll di sidebar */
}

.desktop-icon {
display: flex;
flex-direction: column;
align-items: center;
cursor: pointer;
text-align: center;
transition: 0.2s;
}
.desktop-icon:hover {
transform: scale(1.1);
}
.icon-box {
width: 50px; height: 50px;
background: white;
border: 2px solid var(--win-blue);
border-radius: 10px;
display: flex;
justify-content: center;
align-items: center;
font-size: 1.5rem;
color: var(--win-dark-blue);
margin-bottom: 8px;
box-shadow: 2px 2px 0px var(--win-dark-blue);
}
.icon-label {
font-size: 0.8rem;
color: var(--win-dark-blue);
font-weight: bold;
}

/* =============== MAIN CONTENT WINDOW (SCROLLABLE) =============== */
.main-win {
flex: 1;
padding: 0;
display: flex;
flex-direction: column;
}

.win-content {
padding: 20px;
overflow-y: auto; /* SCROLL UTAMA */
flex: 1;
}

/* Views */
.view-section { display: none; animation: bootWindow 0.5s ease; }
.view-section.active { display: block; }
@keyframes bootWindow { 0% { opacity: 0; transform: scale(0.95); } 100% { opacity: 1; transform: scale(1); } }

/* =============== COMPONENTS Y2K =============== */

/* Glossy Buttons */
.btn-y2k {
background: linear-gradient(180deg, #fff 0%, #e2e8f0 50%, #cbd5e1 51%, #94a3b8 100%);
border: 2px solid #fff;
border-bottom-color: #64748b;
border-right-color: #64748b;
border-radius: 6px;
color: var(--text-dark);
padding: 8px 20px;
font-family: 'Outfit', sans-serif;
font-weight: 700;
text-transform: uppercase;
cursor: pointer;
box-shadow: 2px 2px 0px rgba(0,0,0,0.2);
}
.btn-y2k:active {
border-top-color: #64748b;
border-left-color: #64748b;
border-bottom-color: #fff;
border-right-color: #fff;
transform: translate(1px, 1px);
box-shadow: none;
}
.btn-y2k:hover {
border-color: var(--cyber-yellow);
}

/* Search Bar */
.search-y2k {
display: flex;
gap: 10px;
margin-bottom: 20px;
}
.input-y2k {
flex: 1;
border: 2px solid #94a3b8;
border-radius: 6px;
padding: 10px 15px;
font-family: 'Space Mono', monospace;
font-size: 1rem;
outline: none;
background: #fff;
}

/* Stats Grid */
.stats-y2k {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 15px;
margin-bottom: 20px;
}

.stat-box-y2k {
background: white;
border: 2px solid var(--win-blue);
padding: 15px;
border-radius: 4px;
text-align: center;
box-shadow: 3px 3px 0px var(--win-blue);
}

.stat-val-y2k {
font-family: 'Outfit', sans-serif;
font-weight: 900;
font-size: 2rem;
color: var(--win-dark-blue);
}
.stat-lbl-y2k {
font-size: 0.7rem;
text-transform: uppercase;
color: #64748b;
margin-top: 5px;
}

/* AMAN STATUS (HIJAU) */
.safe-status-y2k {
background: var(--cyber-green);
color: #000;
text-shadow: 1px 1px 0px rgba(255,255,255,0.5);
border-color: #00cc55;
box-shadow: 3px 3px 0px #00cc55;
}

/* Table */
.table-y2k {
width: 100%;
border-collapse: collapse;
background: white;
border: 2px solid #cbd5e1;
}

.table-y2k th {
background: var(--win-bg);
border-bottom: 2px solid #94a3b8;
text-align: left;
padding: 10px;
font-family: 'Outfit', sans-serif;
color: var(--win-dark-blue);
}

.table-y2k td {
border-bottom: 1px solid #cbd5e1;
padding: 10px;
font-size: 0.9rem;
}

.table-y2k tr:hover td {
background: rgba(255, 0, 204, 0.1);
}

.btn-copy-y2k {
background: #fff;
border: 1px solid #000;
color: #000;
padding: 2px 10px;
font-size: 0.7rem;
cursor: pointer;
border-radius: 4px;
font-weight: bold;
}
.btn-copy-y2k:hover { background: var(--cyber-yellow); }

/* Settings Form */
.form-group-y2k {
margin-bottom: 20px;
}
.form-label-y2k {
display: block;
margin-bottom: 5px;
font-weight: bold;
font-family: 'Outfit';
}
.form-input-y2k {
width: 100%;
border: 2px solid #94a3b8;
padding: 10px;
background: #fff;
font-family: 'Space Mono';
}

/* Custom Scrollbar */
.win-content::-webkit-scrollbar { width: 12px; }
.win-content::-webkit-scrollbar-track { background: #cbd5e1; border-left: 2px solid #fff; }
.win-content::-webkit-scrollbar-thumb { background: var(--win-blue); border: 2px solid #cbd5e1; border-radius: 10px; }

/* Toast */
.toast-y2k {
position: fixed; top: 60px; right: 30px;
background: var(--win-bg);
border: 2px solid var(--win-blue);
border-left: 10px solid var(--win-blue);
padding: 15px 25px;
font-weight: bold;
font-family: 'Space Mono';
box-shadow: 4px 4px 0px rgba(0,0,0,0.2);
z-index: 100;
animation: slideDown 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
}
@keyframes slideDown { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

/* Mobile */
@media (max-width: 768px) {
.workspace { flex-direction: column; padding: 20px; overflow-y: auto; }
.sidebar-win { width: 100%; height: auto; display: flex; flex-direction: row; align-items: center; overflow-x: auto; }
.icon-grid { display: flex; gap: 20px; padding: 10px; }
.main-win { height: 600px; }
.stats-y2k { grid-template-columns: 1fr; }
}
</style>
</head>
<body>

<!-- OS Taskbar -->
<div class="os-taskbar">
    <div style="font-weight: 900; font-family: 'Outfit'; font-size: 1.2rem; color: var(--win-dark-blue);">沈 桶</div>
    <div class="os-clock" id="clock">00:00</div>
</div>

<!-- Workspace -->
<div class="workspace">

    <!-- WINDOW 1: SIDEBAR -->
    <aside class="window-frame sidebar-win">
        <div class="win-header">
            My Computer
            <div class="win-controls"><span></span><span></span></div>
        </div>
        <div class="icon-grid">
            <div class="desktop-icon" onclick="showView('dashboard')">
                <div class="icon-box"><i class="fas fa-database"></i></div>
                <div class="icon-label">Database</div>
            </div>
            <div class="desktop-icon" onclick="showView('analytics')">
                <div class="icon-box" style="background: var(--cyber-pink); border-color: #fff; color: #fff;"><i class="fas fa-chart-pie"></i></div>
                <div class="icon-label">Analytics</div>
            </div>
            <!-- MENU DOCS SUDAH DIHAPUS -->
            <div class="desktop-icon" onclick="showView('settings')">
                <div class="icon-box" style="background: #fff; color: #000;"><i class="fas fa-cog"></i></div>
                <div class="icon-label">Settings</div>
            </div>
        </div>
    </aside>

    <!-- WINDOW 2: MAIN CONTENT -->
    <main class="window-frame main-win">
        <div class="win-header">
            Tommy_System.exe
            <div class="win-controls"><span></span><span></span></div>
        </div>
        <div class="win-content">
            
            <!-- VIEW 1: DATABASE -->
            <div id="dashboardView" class="view-section active">
                <div class="search-y2k">
                    <input type="text" class="input-y2k" id="searchInput" placeholder="Search files..." onkeypress="handleEnter(event)">
                    <button class="btn-y2k" onclick="performSearch()">GO!</button>
                </div>

                <table class="table-y2k" id="tableContainer">
                    <!-- Data Here -->
                </table>
                <div style="margin-top: 20px; text-align:center; color:#94a3b8;">--- END OF DATABASE ---</div>
            </div>

            <!-- VIEW 2: ANALYTICS -->
            <div id="analyticsView" class="view-section">
                <div class="stats-y2k">
                    <div class="stat-box-y2k">
                        <div class="stat-val-y2k" id="analyticsTotal">0</div>
                        <div class="stat-lbl-y2k">Total Files</div>
                    </div>
                    <div class="stat-box-y2k" style="border-color: var(--cyber-yellow); box-shadow: 3px 3px 0px var(--cyber-yellow);">
                        <div class="stat-val-y2k">99%</div>
                        <div class="stat-lbl-y2k">Disk Space</div>
                    </div>
                    <!-- AMAN STATUS (HIJAU) -->
                    <div class="stat-box-y2k safe-status-y2k">
                        <div class="stat-val-y2k">AMAN</div>
                        <div class="stat-lbl-y2k" style="color: #000; font-weight: bold;">System OK</div>
                    </div>
                </div>

                <div class="stat-box-y2k" style="padding: 30px; display:flex; align-items:flex-end; justify-content:space-around;">
                    <!-- Retro Bars -->
                    <div style="width:10%; height:40%; background: var(--cyber-pink); border: 1px solid #000;"></div>
                    <div style="width:10%; height:70%; background: var(--win-blue); border: 1px solid #000;"></div>
                    <div style="width:10%; height:90%; background: var(--cyber-green); border: 1px solid #000;"></div>
                    <div style="width:10%; height:50%; background: var(--cyber-yellow); border: 1px solid #000;"></div>
                    <div style="width:10%; height:60%; background: #fff; border: 1px solid #000;"></div>
                </div>
            </div>

            <!-- VIEW 3: SETTINGS -->
            <div id="settingsView" class="view-section">
                <h2 style="font-family:'Outfit'; margin-bottom:20px; color:var(--win-dark-blue);">System Settings</h2>
                
                <div style="background: white; padding: 20px; border: 2px solid var(--win-blue); border-radius: 8px;">
                    <div class="form-group-y2k">
                        <label class="form-label-y2k">Spreadsheet ID</label>
                        <input type="text" class="form-input-y2k" value="19AodSFSw4shpSZVZ4I-_sD91eU1HPITMeg4cwLiEV1c">
                    </div>
                    <div class="form-group-y2k">
                        <label class="form-label-y2k">Sheet GID</label>
                        <input type="text" class="form-input-y2k" value="1202906531">
                    </div>
                    <div class="form-group-y2k">
                        <label class="form-label-y2k">API Endpoint</label>
                        <input type="text" class="form-input-y2k" value="https://script.google.com/macros/s/.../exec">
                    </div>
                    
                    <div style="margin-top: 30px; border-top: 2px solid #ddd; padding-top: 20px;">
                        <label class="form-label-y2k">Display Mode</label>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn-y2k">Retro</button>
                            <button class="btn-y2k">Modern</button>
                            <button class="btn-y2k">Glass</button>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; text-align: right;">
                        <button class="btn-y2k" onclick="showToast('Settings Saved!')">SAVE CHANGES</button>
                    </div>
                </div>
            </div>

        </div>
    </main>

</div>

<!-- TOAST STACK -->
<div id="toastStack"></div>

<script>
// ================= JS LOGIC =================
let semuaData = { linknawala: [] };
let filteredData = { linknawala: [] };

// Clock
setInterval(() => {
    const now = new Date();
    document.getElementById('clock').innerText = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
}, 1000);

// Config
const config = {
    spreadsheetId: '19AodSFSw4shpSZVZ4I-_sD91eU1HPITMeg4cwLiEV1c',
    sheetGid: '1202906531',
    gasUrl: 'https://script.google.com/macros/s/AKfycbwkHrgiGlxFkJHZwp-bMaRCezwCSPAdV-FyUHkX9cAEWu/exec'
};

window.onload = function() {
    muatSemuaData();
};

// FUNGSI Navigasi Universal
function showView(viewName) {
    // Sembunyikan semua view
    document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
    
    // Tampilkan view yang dipilih
    const target = document.getElementById(viewName + 'View');
    if(target) {
        target.classList.add('active');
    }
}

function showToast(msg) {
    const container = document.getElementById('toastStack');
    const t = document.createElement('div');
    t.className = 'toast-y2k';
    t.innerHTML = `<i class="fas fa-info-circle"></i> ${msg}`;
    container.appendChild(t);
    setTimeout(() => { t.remove(); }, 3000);
}

function copyText(text) {
    if (!text) return;
    navigator.clipboard.writeText(text).then(() => showToast("File Copied!"));
}

function handleEnter(e) { if(e.key === 'Enter') performSearch(); }

// Data Logic
async function muatSemuaData() {
    const container = document.getElementById('tableContainer');
    container.innerHTML = `<tr><td colspan="5" style="text-align:center; padding:20px;">Loading System...</td></tr>`;
    try {
        let dataFetched = false;
        if (config.gasUrl) {
            try {
                const res = await fetch(config.gasUrl);
                if(res.ok) {
                    const json = await res.json();
                    if(json.success) {
                        semuaData.linknawala = json.linknawala || [];
                        dataFetched = true;
                    }
                }
            } catch(e){}
        }
        if(!dataFetched) {
            const csvUrl = `https://docs.google.com/spreadsheets/d/${config.spreadsheetId}/export?format=csv&gid=${config.sheetGid}`;
            const res = await fetch(csvUrl);
            if(!res.ok) throw new Error('Connection Failed');
            const csvText = await res.text();
            semuaData.linknawala = parseCSV(csvText);
        }
        filteredData.linknawala = JSON.parse(JSON.stringify(semuaData.linknawala));
        renderTable();
        const totalElem = document.getElementById('analyticsTotal');
        if(totalElem) totalElem.innerText = (semuaData.linknawala.length - 1);
        showToast("System Online");
    } catch(err) {
        container.innerHTML = `<tr><td colspan="5" style="text-align:center; color:red;">ERROR!</td></tr>`;
    }
}

function loadData() { muatSemuaData(); }

function parseCSV(text) {
    if(!text) return [];
    return text.split('\n').filter(l => l.trim()).map(row => {
        let cur = '', arr = [], inQuote = false;
        for(let char of row) {
            if(char === '"') inQuote = !inQuote;
            else if(char === ',' && !inQuote) { arr.push(cur.trim()); cur = ''; }
            else cur += char;
        }
        arr.push(cur.trim());
        return arr;
    });
}

function renderTable() {
    const data = filteredData.linknawala;
    const container = document.getElementById('tableContainer');
    if(!data || data.length === 0) { container.innerHTML = '<tr><td colspan="5" style="text-align:center; padding:20px;">No Data Found</td></tr>'; return; }

    let html = `<thead><tr>`;
    if(data[0]) {
        data[0].forEach(h => html += `<th>${h}</th>`);
        html += `<th>ACTION</th>`;
        html += `</tr></thead><tbody>`;
        for(let i=1; i<data.length; i++) {
            if(!data[i]) continue;
            html += `<tr>`;
            let firstText = '';
            data[i].forEach((cell, idx) => {
                if(idx >= 4) return; 
                const val = cell || '-';
                if(idx === 0) {
                    firstText = val;
                    html += `<td style="font-family:'Outfit'; font-weight:700;">${val}</td>`;
                }
                else html += `<td>${val}</td>`;
            });
            html += `<td><button class="btn-copy-y2k" onclick="copyText('${firstText.replace(/'/g, "\\'")}')">COPY</button></td>`;
            html += `</tr>`;
        }
    }
    html += `</tbody>`;
    container.innerHTML = html;
}

function performSearch() {
    const term = document.getElementById('searchInput').value.toLowerCase().trim();
    const original = semuaData.linknawala;
    if(!term) {
        filteredData.linknawala = JSON.parse(JSON.stringify(original));
    } else {
        const filtered = [original[0]];
        for(let i=1; i<original.length; i++) {
            if(original[i].some(cell => cell && cell.toString().toLowerCase().includes(term))) {
                filtered.push(original[i]);
            }
        }
        filteredData.linknawala = filtered;
    }
    renderTable();
}
</script>
</body>
</html>

