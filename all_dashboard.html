<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TOMMY HILFIGER - Tactical HUD</title>
<!-- Fonts: Rajdhani (Futuristic Blocky) -->
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<style>
/* =============== VARIABEL TACTICAL HUD =============== */
:root {
--bg-deep: #0a0b10;
--bg-panel: #14161f;
--border-tech: #2d3142;
--accent-main: #FFB703; /* Amber Alert */
--accent-dim: rgba(255, 183, 3, 0.1);
--text-primary: #E2E8F0;
--text-secondary: #64748B;
--font-tech: 'Rajdhani', sans-serif;

--clip-angle: 0; /* For animation */
}

/* =============== RESET & BASE =============== */
* {
margin: 0;
padding: 0;
box-sizing: border-box;
font-family: var(--font-tech);
}

body {
background-color: var(--bg-deep);
color: var(--text-primary);
min-height: 100vh;
display: flex;
overflow: hidden;
/* Grid Pattern Background */
background-image: 
linear-gradient(rgba(45, 49, 66, 0.3) 1px, transparent 1px),
linear-gradient(90deg, rgba(45, 49, 66, 0.3) 1px, transparent 1px);
background-size: 30px 30px;
}

/* =============== LAYOUT =============== */
.dashboard {
display: flex;
width: 100%;
height: 100vh;
}

/* =============== SIDEBAR (TECHNICAL) =============== */
.sidebar {
width: 260px;
height: 100vh;
background: var(--bg-panel);
border-right: 1px solid var(--border-tech);
display: flex;
flex-direction: column;
padding: 0;
position: fixed;
z-index: 50;
}

.sidebar-header {
padding: 24px;
border-bottom: 1px solid var(--border-tech);
position: relative;
}

/* Decorative Corner */
.sidebar-header::after {
content: '';
position: absolute;
bottom: -1px; right: 0;
width: 20px; height: 20px;
border-bottom: 2px solid var(--accent-main);
border-right: 2px solid var(--accent-main);
}

.brand {
font-size: 1.5rem;
font-weight: 700;
letter-spacing: 2px;
text-transform: uppercase;
color: var(--text-primary);
display: flex;
align-items: center;
gap: 10px;
}

.brand span { color: var(--accent-main); }

.nav-list {
flex: 1;
padding: 24px 16px;
display: flex;
flex-direction: column;
gap: 8px;
}

.nav-item {
padding: 12px 16px;
border: 1px solid transparent;
color: var(--text-secondary);
text-transform: uppercase;
font-size: 0.9rem;
font-weight: 600;
letter-spacing: 1px;
cursor: pointer;
transition: all 0.2s;
display: flex;
align-items: center;
gap: 12px;
position: relative;
}

.nav-item::before {
content: '>';
position: absolute;
left: 5px;
opacity: 0;
color: var(--accent-main);
transition: 0.2s;
}

.nav-item:hover {
color: var(--accent-main);
background: rgba(255, 183, 3, 0.05);
padding-left: 20px;
}

.nav-item:hover::before { opacity: 1; }

.nav-item.active {
background: var(--accent-dim);
color: var(--accent-main);
border-color: var(--accent-main);
padding-left: 24px;
box-shadow: 0 0 15px rgba(255, 183, 3, 0.1);
}

/* =============== MAIN CONTENT =============== */
.main-content {
flex: 1;
margin-left: 260px;
padding: 30px;
overflow-y: auto;
position: relative;
}

/* View Switching */
.view-section { display: none; animation: slideIn 0.4s ease-out; }
.view-section.active { display: block; }

@keyframes slideIn {
from { opacity: 0; transform: translateX(20px); }
to { opacity: 1; transform: translateX(0); }
}

/* =============== COMPONENTS =============== */

/* Header Tech */
.header-tech {
display: flex;
justify-content: space-between;
align-items: flex-end;
margin-bottom: 24px;
border-bottom: 2px solid var(--border-tech);
padding-bottom: 16px;
}

.header-title h1 {
font-size: 2rem;
text-transform: uppercase;
letter-spacing: 2px;
margin-bottom: 4px;
}

.header-line {
display: block;
width: 50px;
height: 4px;
background: var(--accent-main);
margin-bottom: 8px;
}

.header-subtitle {
font-size: 0.9rem;
color: var(--text-secondary);
letter-spacing: 1px;
font-family: monospace;
}

/* Tactical Card */
.tech-card {
background: var(--bg-panel);
border: 1px solid var(--border-tech);
padding: 24px;
margin-bottom: 24px;
/* Angled Corner Clip */
clip-path: polygon(
0 0, 
100% 0, 
100% calc(100% - 20px), 
calc(100% - 20px) 100%, 
0 100%
);
position: relative;
transition: border-color 0.3s;
}

.tech-card:hover {
border-color: var(--accent-main);
}

/* Corner Decorations */
.corner-mark {
position: absolute;
width: 10px; height: 10px;
border: 2px solid var(--accent-main);
transition: 0.3s;
}
.tech-card:hover .corner-mark { box-shadow: 0 0 10px var(--accent-main); }
.cm-tl { top: 0; left: 0; border-right: 0; border-bottom: 0; }
.cm-br { bottom: 0; right: 0; border-left: 0; border-top: 0; }

/* Search Bar */
.search-tactical {
display: flex;
gap: 0;
border: 1px solid var(--border-tech);
}

.prefix {
background: var(--border-tech);
color: var(--accent-main);
padding: 12px 16px;
font-family: monospace;
font-weight: bold;
}

.input-hud {
flex: 1;
background: transparent;
border: none;
padding: 12px;
color: var(--text-primary);
font-family: 'Rajdhani', sans-serif;
font-size: 1rem;
outline: none;
text-transform: uppercase;
}

.btn-hud {
background: var(--accent-main);
color: #000;
border: none;
padding: 0 24px;
font-weight: 700;
text-transform: uppercase;
cursor: pointer;
transition: 0.2s;
}

.btn-hud:hover {
background: #fff;
box-shadow: 0 0 15px var(--accent-main);
}

/* Table */
.table-hud {
width: 100%;
border-collapse: separate;
border-spacing: 0 10px;
}

th {
text-align: left;
padding: 16px;
color: var(--accent-main);
font-family: monospace;
text-transform: uppercase;
font-size: 0.85rem;
letter-spacing: 1px;
border-bottom: 1px solid var(--border-tech);
}

td {
padding: 16px;
background: #1A1D26;
color: var(--text-primary);
font-size: 0.95rem;
border-bottom: 1px solid rgba(255,255,255,0.02);
vertical-align: middle;
}

tr:hover td {
background: #232735;
color: var(--accent-main);
}

/* Data Cell Monospace */
.data-mono {
font-family: 'Courier New', monospace;
color: var(--accent-main);
letter-spacing: 1px;
}

/* Button Action (Switch) */
.btn-switch {
background: transparent;
border: 1px solid var(--border-tech);
color: var(--text-secondary);
padding: 4px 12px;
text-transform: uppercase;
font-size: 0.75rem;
cursor: pointer;
transition: 0.2s;
clip-path: polygon(10px 0, 100% 0, 100% 100%, 0 100%, 0 10px);
}

.btn-switch:hover {
border-color: var(--accent-main);
color: var(--accent-main);
box-shadow: 0 0 10px var(--accent-dim);
}

/* Stats Grid */
.stats-hud {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 20px;
margin-bottom: 24px;
}

.stat-box {
background: #0F1116;
border: 1px solid var(--border-tech);
padding: 20px;
position: relative;
}

.stat-box::before {
content: '';
position: absolute;
top: 0; left: 0;
width: 100%; height: 2px;
background: var(--accent-main);
transform: scaleX(0);
transition: 0.3s;
}

.stat-box:hover::before { transform: scaleX(1); }

.stat-val {
font-size: 2.5rem;
font-weight: 700;
color: #fff;
line-height: 1;
}

.stat-lbl {
font-size: 0.8rem;
color: var(--text-secondary);
text-transform: uppercase;
letter-spacing: 1px;
}

/* Modal */
.modal-overlay {
position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 100;
display: none; justify-content: center; align-items: center;
backdrop-filter: blur(4px);
}
.modal-overlay.active { display: flex; }

.modal-hud {
width: 400px;
background: var(--bg-panel);
border: 1px solid var(--accent-main);
padding: 30px;
position: relative;
box-shadow: 0 0 30px rgba(255, 183, 3, 0.15);
}

.form-group { margin-bottom: 20px; }
.form-label { display: block; color: var(--accent-main); font-size: 0.8rem; text-transform: uppercase; margin-bottom: 8px; letter-spacing: 1px; }
.form-input {
width: 100%; background: #0F1116; border: 1px solid var(--border-tech);
padding: 10px; color: #fff; font-family: 'Rajdhani'; outline: none;
}
.form-input:focus { border-color: var(--accent-main); }

.btn-group { display: flex; gap: 10px; margin-top: 30px; }
.btn-full { flex: 1; padding: 12px; border: 1px solid var(--border-tech); background: transparent; color: var(--text-secondary); text-transform: uppercase; font-weight: 600; cursor: pointer; transition: 0.2s; }
.btn-full:hover { background: var(--accent-main); color: #000; border-color: var(--accent-main); }

/* Toast */
.toast-stack {
position: fixed; bottom: 30px; right: 30px; z-index: 1000; display: flex; flex-direction: column; gap: 10px;
}

.hud-toast {
background: rgba(0,0,0,0.9);
border-left: 4px solid var(--accent-main);
color: var(--accent-main);
padding: 12px 24px;
font-family: monospace;
text-transform: uppercase;
font-size: 0.9rem;
box-shadow: 0 5px 15px rgba(0,0,0,0.5);
animation: scanLeft 0.3s ease;
}
@keyframes scanLeft { from { transform: translateX(100%); } to { transform: translateX(0); } }

/* Responsive */
@media (max-width: 768px) {
.sidebar { transform: translateX(-100%); transition: 0.3s; }
.sidebar.active { transform: translateX(0); }
.main-content { margin-left: 0; padding: 15px; }
.stats-hud { grid-template-columns: 1fr; }
.mobile-toggle { display: block; position: fixed; top: 20px; right: 20px; z-index: 60; background: var(--accent-main); border: none; padding: 10px; cursor: pointer; }
}
@media (min-width: 769px) { .mobile-toggle { display: none; } }

</style>
</head>
<body>

<div class="dashboard">
<!-- SIDEBAR -->
<aside class="sidebar" id="sidebar">
<div class="sidebar-header">
<div class="brand">
<i class="fas fa-shield-virus"></i> TOMMY <span>SYS</span>
</div>
</div>
<nav class="nav-list">
<div class="nav-item active" onclick="showDashboard(); setActiveNav(this)">
<i class="fas fa-database"></i> Data Stream
</div>
<div class="nav-item" onclick="showAnalytics(); setActiveNav(this)">
<i class="fas fa-chart-network"></i> System Stats
</div>
</nav>
</aside>

<!-- MAIN CONTENT -->
<main class="main-content">
<button class="mobile-toggle" onclick="document.getElementById('sidebar').classList.toggle('active')"><i class="fas fa-bars"></i></button>

<!-- VIEW 1: DASHBOARD -->
<div id="dashboardView" class="view-section active">
<header class="header-tech">
<div>
<div class="header-title">
<h1>Database <span style="color:var(--accent-main)">Control</span></h1>
<div class="header-line"></div>
</div>
<div class="header-subtitle">SYSTEM STATUS: ONLINE // SECURE</div>
</div>
</header>

<!-- Search -->
<div class="tech-card">
<div style="margin-bottom: 10px; color:var(--accent-main); font-size:0.8rem; text-transform:uppercase; letter-spacing:1px;">> Input Query</div>
<div class="search-tactical">
<div class="prefix">>></div>
<input type="text" class="input-hud" id="searchInput" placeholder="SEARCH PARAMETERS...">
<button class="btn-hud" onclick="performSearch()"><i class="fas fa-search"></i></button>
</div>
</div>

<!-- Table -->
<div class="tech-card" style="padding: 0; overflow: hidden;">
<div style="padding: 20px; border-bottom: 1px solid var(--border-tech); display:flex; justify-content:space-between; align-items:center;">
<h3 style="color:var(--text-primary); letter-spacing:1px; text-transform:uppercase;">Data Entries</h3>
<div style="display:flex; gap:10px;">
<button class="btn-switch" onclick="loadData()">REFRESH</button>
<button class="btn-switch" onclick="openConfig()">CONFIG</button>
</div>
</div>
<div style="padding: 20px; overflow-x: auto;">
<table class="table-hud" id="tableContainer">
<!-- Data Here -->
</table>
</div>
<div class="corner-mark cm-tl"></div>
<div class="corner-mark cm-br"></div>
</div>
</div>

<!-- VIEW 2: ANALYTICS -->
<div id="analyticsView" class="view-section">
<header class="header-tech">
<div>
<div class="header-title">
<h1>System <span style="color:var(--accent-main)">Analytics</span></h1>
<div class="header-line"></div>
</div>
<div class="header-subtitle">PERFORMANCE METRICS</div>
</div>
</header>

<div class="stats-hud">
<div class="stat-box">
<div class="stat-val" id="analyticsTotal">0</div>
<div class="stat-lbl">Total Blocks</div>
</div>
<div class="stat-box">
<div class="stat-val">98%</div>
<div class="stat-lbl">System Integrity</div>
</div>
<div class="stat-box">
<div class="stat-val">12ms</div>
<div class="stat-lbl">Latency</div>
</div>
</div>

<div class="tech-card" style="padding: 30px;">
<h3 style="color:var(--accent-main); margin-bottom:20px; text-transform:uppercase; letter-spacing:1px;">Traffic Activity</h3>
<div style="display:flex; justify-content:space-between; align-items:flex-end; height: 150px; border-bottom: 1px solid var(--border-tech); padding-bottom:10px;">
<div style="width:15%; text-align:center;">
<div style="height:40%; background:var(--border-tech); transition:0.3s;" class="bar-hud"></div>
<div style="margin-top:5px; font-size:0.8rem; color:var(--text-secondary);">MON</div>
</div>
<div style="width:15%; text-align:center;">
<div style="height:70%; background:var(--border-tech); transition:0.3s;" class="bar-hud"></div>
<div style="margin-top:5px; font-size:0.8rem; color:var(--text-secondary);">TUE</div>
</div>
<div style="width:15%; text-align:center;">
<div style="height:50%; background:var(--accent-main); box-shadow: 0 0 10px var(--accent-dim);" class="bar-hud"></div>
<div style="margin-top:5px; font-size:0.8rem; color:var(--text-primary); font-weight:bold;">WED</div>
</div>
<div style="width:15%; text-align:center;">
<div style="height:90%; background:var(--border-tech); transition:0.3s;" class="bar-hud"></div>
<div style="margin-top:5px; font-size:0.8rem; color:var(--text-secondary);">THU</div>
</div>
<div style="width:15%; text-align:center;">
<div style="height:60%; background:var(--border-tech); transition:0.3s;" class="bar-hud"></div>
<div style="margin-top:5px; font-size:0.8rem; color:var(--text-secondary);">FRI</div>
</div>
</div>
<div class="corner-mark cm-tl"></div>
<div class="corner-mark cm-br"></div>
</div>
</div>

</main>
</div>

<!-- TOAST STACK -->
<div class="toast-stack" id="toastStack"></div>

<!-- MODAL -->
<div class="modal-overlay" id="configModal">
<div class="modal-hud">
<h3 style="color:var(--accent-main); margin-bottom:24px; text-transform:uppercase; letter-spacing:1px;">Configuration</h3>
<div class="form-group">
<label class="form-label">Spreadsheet ID</label>
<input type="text" id="spreadsheetId" class="form-input">
</div>
<div class="form-group">
<label class="form-label">Sheet GID</label>
<input type="text" id="sheetGid" class="form-input">
</div>
<div class="form-group">
<label class="form-label">GAS URL</label>
<input type="text" id="gasUrl" class="form-input">
</div>
<div class="btn-group">
<button class="btn-full" onclick="closeConfig()">Cancel</button>
<button class="btn-full" style="color:var(--accent-main);" onclick="saveConfig()">Save</button>
</div>
<div class="corner-mark cm-tl"></div>
<div class="corner-mark cm-br"></div>
</div>
</div>

<script>
// =============== LOGIC ===============
let semuaData = { linknawala: [] };
let filteredData = { linknawala: [] };
let config = {
spreadsheetId: '19AodSFSw4shpSZVZ4I-_sD91eU1HPITMeg4cwLiEV1c',
sheetGid: '1202906531',
gasUrl: 'https://script.google.com/macros/s/AKfycbwkHrgiGlxFkJHZwp-bMaRCezwCSPAdV-FyUHkX9cAEWu/exec'
};

window.onload = function() {
loadSavedConfig();
muatSemuaData();
document.getElementById('searchInput').addEventListener('keypress', (e) => {
if(e.key === 'Enter') performSearch();
});
};

function showDashboard() {
document.getElementById('dashboardView').classList.add('active');
document.getElementById('analyticsView').classList.remove('active');
}

function showAnalytics() {
document.getElementById('dashboardView').classList.remove('active');
document.getElementById('analyticsView').classList.add('active');
document.getElementById('analyticsTotal').innerText = (semuaData.linknawala.length - 1);
}

function setActiveNav(el) {
document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
el.classList.add('active');
}

// Toast
function showToast(msg) {
const c = document.getElementById('toastStack');
const t = document.createElement('div');
t.className = 'hud-toast';
t.innerHTML = `[SYSTEM]: ${msg}`;
c.appendChild(t);
setTimeout(() => {
t.style.opacity = '0';
setTimeout(() => t.remove(), 300);
}, 3000);
}

// Copy
function copyText(text) {
if (!text) return;
navigator.clipboard.writeText(text).then(() => showToast("Data copied to clipboard"));
}

// Config
function loadSavedConfig() {
const saved = localStorage.getItem('hud_dashboard_config');
if(saved) {
config = JSON.parse(saved);
document.getElementById('spreadsheetId').value = config.spreadsheetId;
document.getElementById('sheetGid').value = config.sheetGid;
document.getElementById('gasUrl').value = config.gasUrl || '';
} else {
document.getElementById('spreadsheetId').value = config.spreadsheetId;
document.getElementById('sheetGid').value = config.sheetGid;
document.getElementById('gasUrl').value = config.gasUrl;
}
}

function openConfig() { document.getElementById('configModal').classList.add('active'); }
function closeConfig() { document.getElementById('configModal').classList.remove('active'); }

function saveConfig() {
config.spreadsheetId = document.getElementById('spreadsheetId').value;
config.sheetGid = document.getElementById('sheetGid').value;
config.gasUrl = document.getElementById('gasUrl').value;
localStorage.setItem('hud_dashboard_config', JSON.stringify(config));
closeConfig();
loadData();
}

// Data Logic
async function muatSemuaData() {
const container = document.getElementById('tableContainer');
container.innerHTML = `<tr><td colspan="4" style="text-align:center; padding:40px; color:var(--text-secondary);">INITIALIZING DATA STREAM...</td></tr>`;
try {
let dataFetched = false;
if (config.gasUrl) {
try {
const res = await fetch(config.gasUrl);
if(res.ok) {
const json = await res.json();
if(json.success) {
semuaData.linknawala = json.linknawala || [];
dataFetched = true;
}
}
} catch(e){}
}
if(!dataFetched) {
const csvUrl = `https://docs.google.com/spreadsheets/d/${config.spreadsheetId}/export?format=csv&gid=${config.sheetGid}`;
const res = await fetch(csvUrl);
if(!res.ok) throw new Error('Connection Failed');
const csvText = await res.text();
semuaData.linknawala = parseCSV(csvText);
}
filteredData.linknawala = JSON.parse(JSON.stringify(semuaData.linknawala));
renderTable();
const totalElem = document.getElementById('analyticsTotal');
if(totalElem) totalElem.innerText = (semuaData.linknawala.length - 1);
} catch(err) {
container.innerHTML = `<tr><td colspan="4" style="text-align:center; color:var(--accent-main);">ERROR: ${err.message}</td></tr>`;
}
}

function loadData() { muatSemuaData(); }

function parseCSV(text) {
if(!text) return [];
return text.split('\n').filter(l => l.trim()).map(row => {
let cur = '', arr = [], inQuote = false;
for(let char of row) {
if(char === '"') inQuote = !inQuote;
else if(char === ',' && !inQuote) { arr.push(cur.trim()); cur = ''; }
else cur += char;
}
arr.push(cur.trim());
return arr;
});
}

function renderTable() {
const data = filteredData.linknawala;
const container = document.getElementById('tableContainer');
if(!data || data.length === 0) { container.innerHTML = '<tr><td colspan="4" style="text-align:center;">NO DATA FOUND</td></tr>'; return; }

let html = `<thead><tr>`;
if(data[0]) {
data[0].forEach(h => html += `<th>${h}</th>`);
html += `<th>ACTION</th>`;
html += `</tr></thead><tbody>`;
for(let i=1; i<data.length; i++) {
if(!data[i]) continue;
html += `<tr>`;
let firstText = '';
data[i].forEach((cell, idx) => {
const val = cell || '-';
if(idx === 0) {
firstText = val;
html += `<td class="data-mono">${val}</td>`;
}
else if(idx === 1) html += `<td><span style="background:rgba(255,183,3,0.1); color:var(--accent-main); padding:2px 6px; font-size:0.8rem; font-family:monospace;">[${val}]</span></td>`;
else html += `<td>${val}</td>`;
});
html += `<td><button class="btn-switch" onclick="copyText('${firstText.replace(/'/g, "\\'")}')">COPY</button></td>`;
html += `</tr>`;
}
}
html += `</tbody>`;
container.innerHTML = html;
}

function performSearch() {
const term = document.getElementById('searchInput').value.toLowerCase().trim();
const original = semuaData.linknawala;
if(!term) {
filteredData.linknawala = JSON.parse(JSON.stringify(original));
} else {
const filtered = [original[0]];
for(let i=1; i<original.length; i++) {
if(original[i].some(cell => cell && cell.toString().toLowerCase().includes(term))) {
filtered.push(original[i]);
}
}
filteredData.linknawala = filtered;
}
renderTable();
}
</script>
</body>
</html>
