<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYBER INDUSTRIAL // LIVE STREAMING SYSTEM</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Share+Tech+Mono&family=Orbitron:wght@500;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --ind-bg: #05070a;
            --ind-panel: rgba(11, 18, 30, 0.7);
            --ind-border: #45a29e;
            --ind-accent: #00f3ff; /* Neon Cyan */
            --ind-warn: #ff3b30;
            --ind-alert: #ffcc00;
            --ind-text: #aabbd1;
            
            --clip-angle: 20px;
            --neon-shadow: 0 0 10px rgba(0, 243, 255, 0.4);
            --glow-text: 0 0 8px rgba(0, 243, 255, 0.6);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* --- ANIMATED BACKGROUND (CYBER GRID) --- */
        body {
            background-color: var(--ind-bg);
            background-image: 
                linear-gradient(to right, rgba(0, 255, 255, 0.05) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(0, 255, 255, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            color: var(--ind-text);
            font-family: 'Share Tech Mono', monospace;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            animation: gridMove 20s linear infinite;
        }

        @keyframes gridMove {
            0% { background-position: 0 0; }
            100% { background-position: 50px 50px; }
        }

        /* CRT Scanline */
        body::after {
            content: "";
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.05) 50%), linear-gradient(90deg, rgba(0, 255, 255, 0.03), rgba(0, 0, 255, 0.01), rgba(0, 0, 255, 0.03));
            background-size: 100% 4px, 4px 100%;
            pointer-events: none !important;
            z-index: 1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 100;
        }

        /* --- HEADER HUD --- */
        header {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            margin-bottom: 3rem;
            background: rgba(11, 18, 30, 0.8);
            border: 1px solid var(--ind-border);
            backdrop-filter: blur(5px);
            padding: 2rem 3rem;
            clip-path: polygon(
                0 0, 
                100% 0, 
                100% calc(100% - var(--clip-angle)), 
                calc(100% - var(--clip-angle)) 100%, 
                0 100%
            );
            position: relative;
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.1);
        }

        header::before {
            content: "";
            position: absolute;
            top: 10px; left: 10px; width: 50%; height: 1px;
            background: linear-gradient(90deg, var(--ind-accent), transparent);
        }
        header::after {
            content: "";
            position: absolute;
            bottom: 10px; right: 10px; width: 50%; height: 1px;
            background: linear-gradient(90deg, transparent, var(--ind-accent));
        }

        h1 {
            font-family: 'Black Ops One', cursive;
            font-size: 2.8rem;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: var(--glow-text);
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 2;
        }

        /* MONITOR CLOCK (HUD STYLE) */
        .clock-monitor {
            background: #000;
            border: 1px solid var(--ind-border);
            padding: 0.8rem 2rem;
            color: var(--ind-accent);
            font-size: 2.2rem;
            font-weight: 700;
            font-family: 'Orbitron', sans-serif;
            position: relative;
            box-shadow: inset 0 0 20px rgba(0, 243, 255, 0.3);
            display: inline-block;
            z-index: 2;
        }
        
        .clock-monitor::before {
            content: "";
            position: absolute;
            top: -2px; left: -2px;
            width: 10px; height: 10px;
            border-top: 2px solid var(--ind-accent);
            border-left: 2px solid var(--ind-accent);
        }
        .clock-monitor::after {
            content: "";
            position: absolute;
            bottom: -2px; right: -2px;
            width: 10px; height: 10px;
            border-bottom: 2px solid var(--ind-accent);
            border-right: 2px solid var(--ind-accent);
        }

        /* BET CLOSED MONITOR (CYBER STYLE) */
        .betclosed-panel {
            background: #000;
            border: 1px solid var(--ind-warn);
            padding: 1rem 1.5rem;
            margin-top: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            box-shadow: 0 0 15px rgba(255, 59, 48, 0.1);
            clip-path: polygon(0 0, 100% 0, 95% 100%, 5% 100%, 0 100%);
            z-index: 2;
        }

        .betclosed-panel::before {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 2px;
            background: var(--ind-warn);
            box-shadow: 0 0 10px var(--ind-warn);
        }

        .betclosed-label {
            color: var(--ind-warn);
            font-weight: 700;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-right: 1rem;
        }

        .betclosed-data {
            display: flex;
            align-items: center;
            gap: 1rem;
            position: relative;
            z-index: 2;
        }

        .betclosed-market {
            color: #fff;
            font-size: 1.4rem;
            font-weight: 700;
            text-transform: uppercase;
            font-family: 'Black Ops One', cursive;
            text-shadow: 0 0 10px var(--ind-warn);
        }

        .status-closing {
            animation: blink-text 0.5s infinite;
            color: #fff;
            text-shadow: 0 0 8px var(--ind-warn);
        }

        @keyframes blink-text {
            0% { opacity: 1; }
            50% { opacity: 0.3; }
            100% { opacity: 1; }
        }

        .betclosed-idle {
            color: #666;
            font-size: 0.9rem;
            font-style: italic;
        }

        /* --- NAVIGASI SEGITIGA (CYBER) --- */
        .nav-grid {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            position: relative;
            z-index: 160;
        }

        .nav-btn {
            background: rgba(0,0,0,0.5);
            border: 1px solid var(--ind-border);
            color: var(--ind-border);
            padding: 0.8rem 2rem;
            font-family: 'Share Tech Mono', monospace;
            font-weight: 700;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s;
            clip-path: polygon(0 0, 100% 0, 95% 100%, 5% 100%);
            position: relative;
            z-index: 9999;
            pointer-events: auto !important;
        }

        .nav-btn:hover {
            background: rgba(0, 243, 255, 0.1);
            letter-spacing: 2px;
            text-shadow: 0 0 8px var(--ind-accent);
            border-color: var(--ind-accent);
        }

        .nav-btn.active {
            background: var(--ind-accent);
            color: #000;
            font-weight: 900;
            text-shadow: none;
            box-shadow: var(--neon-shadow);
        }

        /* --- LIVE SECTION STYLES --- */
        .live-section-wrapper {
            margin-bottom: 3rem;
            position: relative;
            padding: 1rem;
            border: 1px solid rgba(255, 59, 48, 0.2);
            background: rgba(255, 59, 48, 0.02);
            border-radius: 5px;
            z-index: 100;
        }

        .live-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            font-family: 'Black Ops One', cursive;
            color: var(--ind-warn);
            font-size: 1.8rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-bottom: 1px solid var(--ind-warn);
            padding-bottom: 0.5rem;
        }
        
        .live-header i { animation: spinIcon 3s linear infinite; }
        @keyframes spinIcon { 100% { transform: rotate(360deg); } }

        .live-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 2rem;
            position: relative;
            z-index: 5;
        }

        /* --- CONTROL PANEL --- */
        .controls-wrapper {
            background: rgba(11, 18, 30, 0.6);
            border: 1px solid var(--ind-border);
            backdrop-filter: blur(10px);
            padding: 2rem;
            margin-bottom: 2rem;
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            position: relative;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
            z-index: 150;
        }

        .tape-header {
            background: repeating-linear-gradient(45deg, var(--ind-warn), var(--ind-warn) 10px, #000 10px, #000 20px);
            color: #000;
            padding: 0.2rem 1rem;
            font-weight: 900;
            text-transform: uppercase;
            position: absolute;
            top: -10px;
            left: 20px;
            z-index: 5;
            font-size: 0.8rem;
            box-shadow: 0 0 10px var(--ind-warn);
        }

        .industrial-input {
            width: 100%;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--ind-border);
            color: var(--ind-accent);
            padding: 1rem;
            font-family: 'Share Tech Mono', monospace;
            font-size: 1.1rem;
            margin-bottom: 1rem;
            outline: none;
            transition: 0.3s;
            position: relative;
            z-index: 5;
        }
        
        .industrial-input:focus {
            border-color: var(--ind-accent);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.2);
            background: rgba(0, 243, 255, 0.05);
        }

        .action-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            position: relative;
            z-index: 5;
        }

        .mech-btn {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid #333;
            color: var(--ind-text);
            padding: 1.2rem;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
            z-index: 9999;
            pointer-events: auto !important;
        }

        .mech-btn:hover {
            border-color: var(--ind-accent);
            color: var(--ind-accent);
            background: rgba(0, 243, 255, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .mech-btn.active {
            background: var(--ind-warn);
            color: #000;
            border-color: var(--ind-warn);
            font-weight: 700;
            box-shadow: 0 0 15px var(--ind-warn);
        }
        
        .mech-btn i {
            font-size: 1.5rem;
            z-index: 2;
        }

        /* --- SCHEDULE LIST (CYBER CARDS) --- */
        .schedule-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 2rem;
            position: relative;
            z-index: 5;
        }

        .data-block {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(5px);
            border: 1px solid var(--ind-border);
            padding: 2rem;
            position: relative;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            clip-path: polygon(0 0, 100% 0, 100% calc(100% - var(--clip-angle)), calc(100% - var(--clip-angle)) 100%, 0 100%);
            z-index: 500;
        }

        .data-block::before, .data-block::after {
            content: "";
            position: absolute;
            width: 20px;
            height: 20px;
            transition: all 0.3s;
            z-index: 11;
        }
        
        .data-block::before {
            top: 0; left: 0;
            border-top: 2px solid var(--ind-accent);
            border-left: 2px solid var(--ind-accent);
        }
        
        .data-block::after {
            bottom: 0; right: 0;
            border-bottom: 2px solid var(--ind-accent);
            border-right: 2px solid var(--ind-accent);
        }

        .data-block:hover {
            border-color: var(--ind-accent);
            background: rgba(15, 23, 42, 0.8);
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.2);
        }
        
        .data-block:hover::before { width: 100%; height: 100%; opacity: 1; }
        .data-block:hover::after { width: 100%; height: 100%; opacity: 1; }

        /* --- LIVE CARD SPECIFIC STYLES --- */
        .data-block.active {
            border: 1px solid var(--ind-warn);
            background: rgba(255, 59, 48, 0.1);
            box-shadow: 0 0 20px rgba(255, 59, 48, 0.2);
            animation: pulse-live 1.5s infinite;
        }
        
        .data-block.active::before { border-color: var(--ind-warn); }
        .data-block.active::after { border-color: var(--ind-warn); }

        @keyframes pulse-live {
            0% { box-shadow: 0 0 0 0 rgba(255, 59, 48, 0.4); }
            70% { box-shadow: 0 0 20px 0 rgba(255, 59, 48, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 59, 48, 0); }
        }

        .block-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            border-bottom: 1px dashed rgba(255,255,255,0.1);
            padding-bottom: 0.5rem;
        }

        .data-title {
            color: #fff;
            font-size: 1.3rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 0 5px rgba(255,255,255,0.2);
        }

        .status-tag {
            background: #000;
            border: 1px solid #333;
            color: #888;
            padding: 2px 8px;
            font-size: 0.7rem;
        }
        
        .data-block.active .status-tag {
            color: var(--ind-warn);
            border-color: var(--ind-warn);
            background: rgba(255, 59, 48, 0.2);
            animation: blink 1s infinite;
            font-weight: 700;
        }

        @keyframes blink { 50% { opacity: 0; } }

        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .label { color: #777; font-size: 0.8rem; text-transform: uppercase; }
        .value { color: var(--ind-accent); font-weight: 700; font-family:'Orbitron', sans-serif; letter-spacing:1px; text-shadow: 0 0 5px rgba(0, 243, 255, 0.3); }
        .value.warn { color: var(--ind-warn); text-shadow: 0 0 5px rgba(255, 59, 48, 0.3); }

        .data-actions {
            margin-top: 1.5rem;
            display: flex;
            gap: 0.5rem;
            position: relative;
            z-index: 600;
            flex-wrap: wrap;
        }

        .tech-btn {
            flex: 1;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid #333;
            color: var(--ind-text);
            padding: 0.6rem;
            cursor: pointer;
            font-size: 0.8rem;
            transition: 0.2s;
            text-transform: uppercase;
            font-weight: 600;
            position: relative;
            z-index: 9999;
            pointer-events: auto !important;
            display: flex;
            justify-content: center;
            align-items: center;
            text-decoration: none;
            min-width: 90px;
        }

        .tech-btn:hover {
            background: var(--ind-accent);
            color: #000;
            border-color: var(--ind-accent);
            box-shadow: 0 0 10px var(--ind-accent);
        }
        
        /* Tombol Copy */
        .btn-copy {
            border-color: var(--ind-warn) !important;
            color: var(--ind-warn) !important;
        }
        .btn-copy:hover {
            background: var(--ind-warn) !important;
            color: #000 !important;
            box-shadow: 0 0 10px var(--ind-warn);
        }

        /* Tombol Watch Live */
        .btn-stream {
            border-color: #d400ff !important; /* Ungu Neon */
            color: #d400ff !important;
            animation: pulse-border-purple 2s infinite;
        }
        .btn-stream:hover {
            background: #d400ff !important;
            color: #fff !important;
            box-shadow: 0 0 15px #d400ff;
        }
        @keyframes pulse-border-purple {
            0% { box-shadow: 0 0 0 0 rgba(212, 0, 255, 0.4); }
            70% { box-shadow: 0 0 10px 0 rgba(212, 0, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(212, 0, 255, 0); }
        }

        /* --- MODAL --- */
        .modal-overlay {
            position: fixed; inset: 0;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
            pointer-events: auto !important;
        }

        .modal-box {
            background: var(--ind-bg);
            border: 2px solid var(--ind-warn);
            box-shadow: 0 0 50px rgba(255, 59, 48, 0.4);
            padding: 0;
            width: 90%;
            max-width: 550px;
            position: relative;
            z-index: 2001;
            clip-path: polygon(0 0, 100% 0, 100% 90%, 90% 100%, 0 100%);
        }

        .modal-header {
            background: var(--ind-warn);
            color: #000;
            padding: 1rem;
            font-weight: 900;
            text-transform: uppercase;
            display: flex;
            justify-content: space-between;
            align-items: center;
            letter-spacing: 1px;
        }

        .modal-body {
            padding: 2.5rem 2rem;
            text-align: center;
        }

        .modal-icon {
            font-size: 5rem;
            color: var(--ind-warn);
            margin-bottom: 1rem;
            text-shadow: 0 0 20px var(--ind-warn);
            animation: spinIcon 4s linear infinite;
        }

        .close-btn {
            background: #000;
            color: #fff;
            border: 1px solid #555;
            padding: 1rem 2.5rem;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            margin-top: 1.5rem;
            clip-path: polygon(10% 0, 100% 0, 90% 100%, 0 100%);
            transition: 0.2s;
            position: relative;
            z-index: 9999;
            pointer-events: auto !important;
        }
        .close-btn:hover { background: var(--ind-warn); color: #000; border-color: var(--ind-warn); }

        /* --- NOTIF --- */
        .toast {
            position: fixed; top: 30px; right: 30px;
            background: #000;
            border: 1px solid var(--ind-accent);
            color: var(--ind-accent);
            padding: 1rem 1.5rem;
            z-index: 2002;
            display: flex;
            align-items: center;
            gap: 1rem;
            transform: translateX(150%);
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.3);
            font-size: 0.9rem;
            border-left: 4px solid var(--ind-accent);
        }
        .toast.show { transform: translateX(0); pointer-events: none !important; }

        /* --- VOLUME CONTROL --- */
        .vol-panel {
            position: fixed; bottom: 30px; right: 30px;
            background: rgba(11, 18, 30, 0.95);
            border: 1px solid #555;
            padding: 1.5rem;
            width: 220px;
            transform: translateY(150%);
            transition: transform 0.3s;
            z-index: 100;
            pointer-events: auto !important;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        .vol-panel.show { transform: translateY(0); }
        .vol-panel input { width: 100%; accent-color: var(--ind-accent); height: 4px; }
        .vol-panel-title {
            color: var(--ind-accent);
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 10px;
            letter-spacing: 1px;
            border-bottom: 1px solid #333;
            padding-bottom: 5px;
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 900px) {
            .controls-wrapper { grid-template-columns: 1fr; }
            header { flex-direction: column; text-align: center; gap: 1.5rem; }
            h1 { font-size: 2rem; }
            .betclosed-panel { flex-direction: column; gap: 1rem; text-align: center; }
            .live-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- NOTIFIKASI -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle fa-2x"></i>
        <div>
            <div style="font-weight:900; font-size:0.9rem; color:#fff;">SYSTEM MSG</div>
            <div id="toast-msg" style="font-size:0.8rem;">ACTION COMPLETED</div>
        </div>
    </div>

    <!-- VOLUME CONTROL -->
    <div class="vol-panel" id="vol-panel">
        <div class="vol-panel-title">SYSTEM VOLUME</div>
        <div style="display:flex; justify-content:space-between; margin-bottom:10px; font-size:0.8rem; color:var(--ind-text);">
            <span>LEVEL</span>
            <i class="fas fa-times" onclick="toggleVol()" style="cursor:pointer; pointer-events: auto !important;"></i>
        </div>
        <input type="range" min="0" max="100" value="70" id="vol-slider" oninput="updateVol()">
        <div style="text-align:right; margin-top:5px; color:var(--ind-accent); font-family:'Orbitron';" id="vol-val">70%</div>
    </div>

    <!-- MODAL -->
    <div class="modal-overlay" id="modal">
        <div class="modal-box">
            <div class="modal-header">
                <span>WARNING // ALERT</span>
                <i class="fas fa-times" onclick="closeModal()" style="cursor:pointer; pointer-events: auto !important;"></i>
            </div>
            <div class="modal-body">
                <div class="modal-icon"><i class="fas fa-radiation-alt"></i></div>
                <h2 style="margin-bottom:15px; font-family:'Black Ops One'; text-transform:uppercase; color:var(--ind-warn);">Air Raid Siren</h2>
                <p id="modal-msg" style="color:#ccc; font-size:1rem;">Market result incoming. Standby.</p>
                <button class="close-btn" onclick="closeModal()">ACKNOWLEDGE</button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- HEADER -->
        <header>
            <div>
                <h1>Industrial<span style="color:var(--ind-accent)">Grid</span></h1>
                <div style="color:var(--ind-accent); font-size:0.8rem; margin-top:5px; letter-spacing:2px;">LOTTERY TRACKING SYSTEM v.4.0 [CYBER LIVE]</div>
            </div>
            <div>
                <div class="clock-monitor" id="clock">00:00:00</div>
                
                <!-- PANEL MONITOR BET CLOSED -->
                <div class="betclosed-panel">
                    <div class="betclosed-data">
                        <div class="betclosed-label">STATUS: <span id="bc-status-text">SCANNING</span></div>
                    </div>
                    <div id="bc-display-area" class="betclosed-data">
                        <div class="betclosed-idle">NO BET CLOSED ACTIVE</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- NAVIGATION -->
        <nav class="nav-grid">
            <button class="nav-btn active" onclick="switchTab('schedule', this)"><i class="fas fa-th-large"></i> DATA GRID</button>
            <button class="nav-btn" onclick="switchTab('stats', this)"><i class="fas fa-chart-pie"></i> ANALYTICS</button>
            <button class="nav-btn" onclick="switchTab('settings', this)"><i class="fas fa-microchip"></i> CONFIG</button>
        </nav>

        <!-- SCHEDULE TAB -->
        <div id="schedule-tab">
            <!-- LIVE DATA FEED SECTION -->
            <div class="live-section-wrapper" id="live-section-wrapper" style="display:none;">
                <div class="live-header">
                    <i class="fas fa-satellite-dish"></i> LIVE DATA FEED
                </div>
                <div class="live-grid" id="live-grid-container">
                    <!-- Live cards injected here -->
                </div>
            </div>

            <div class="controls-wrapper">
                <div class="tape-header">INTERFACE CONTROLS</div>
                
                <div style="grid-column: 1/-1; display: grid; grid-template-columns: 1fr 2fr; gap: 1rem;">
                    <input type="text" class="industrial-input" id="search-input" placeholder=">> SEARCH SECTOR...">
                    
                    <!-- DROP DOWN PASARAN -->
                    <select class="industrial-input" id="market-select" onchange="applyMarketFilter()" style="cursor: pointer; z-index: 5; position: relative;">
                        <option value="all">>> PILIH PASARAN</option>
                    </select>
                </div>

                <div class="action-grid">
                    <div class="mech-btn active" id="btn-all" onclick="setFilter('all', this)">
                        <i class="fas fa-layer-group"></i> ALL
                    </div>
                    <div class="mech-btn" id="btn-active" onclick="setFilter('active', this)">
                        <i class="fas fa-satellite-dish"></i> LIVE
                    </div>
                    <div class="mech-btn" id="btn-upcoming" onclick="setFilter('upcoming', this)">
                        <i class="fas fa-clock"></i> PENDING
                    </div>
                    <div class="mech-btn" id="btn-passed" onclick="setFilter('passed', this)">
                        <i class="fas fa-archive"></i> ARCHIVE
                    </div>
                </div>

                <div class="action-grid">
                    <div class="mech-btn" id="btn-sound" onclick="toggleSound()">
                        <i class="fas fa-volume-up" id="icon-sound"></i> AUDIO
                    </div>
                    <div class="mech-btn" id="btn-alarm" onclick="toggleAlarm()">
                        <i class="fas fa-bell" id="icon-alarm"></i> ALERT
                    </div>
                    <div class="mech-btn" onclick="toggleVol()">
                        <i class="fas fa-sliders-h"></i> LEVEL
                    </div>
                    <div class="mech-btn" onclick="testAlarm()">
                        <i class="fas fa-vial"></i> TEST
                    </div>
                </div>
            </div>

            <div class="schedule-list" id="grid"></div>
        </div>

        <!-- STATS TAB -->
        <div id="stats-tab" class="hidden" style="display:none;">
            <div class="schedule-list">
                <div class="data-block">
                    <div class="block-header"><span class="data-title">TOTAL NODES</span></div>
                    <div style="font-size:3.5rem; font-weight:900; color:var(--ind-accent); font-family:'Orbitron'; text-align:center;" id="stat-total">0</div>
                </div>
                <div class="data-block">
                    <div class="block-header"><span class="data-title">ACTIVE STREAMS</span></div>
                    <div style="font-size:3.5rem; font-weight:900; color:var(--ind-warn); font-family:'Orbitron'; text-align:center;" id="stat-active">0</div>
                </div>
                <div class="data-block">
                    <div class="block-header"><span class="data-title">PENDING DATA</span></div>
                    <div style="font-size:3.5rem; font-weight:900; color:var(--ind-text); font-family:'Orbitron'; text-align:center;" id="stat-pending">0</div>
                </div>
            </div>
        </div>

        <!-- SETTINGS TAB -->
        <div id="settings-tab" class="hidden" style="display:none; text-align:center; padding:5rem;">
            <div class="data-block" style="max-width:450px; margin:0 auto; border:2px solid var(--ind-border);">
                <h3 style="font-family:'Black Ops One'; margin-bottom:1rem; color:var(--ind-accent);">SYSTEM CONFIG</h3>
                <p style="color:#666;">All systems operational. Awaiting command.</p>
            </div>
        </div>
    </div>

    <script>
        /* DATA LENGKAP + HOKIDRAW LOOP FIXED */
        const scheduleData = [
            { pasaran: "TOTO MACAU PAGI", jamBetclosed: "00:00", jamResult: "00:15", linkSitus: "http://totomacau-pools.us/", linkStreaming: "https://kick.com/live-ttm4d", category: "International" },
            { pasaran: "KENTUCKY MIDDAY", jamBetclosed: "01:05", jamResult: "01:20", linkSitus: "https://www.kylottery.com/apps/draw_games/pick4/", linkStreaming: "", category: "USA" },
            { pasaran: "FLORIDA MIDDAY", jamBetclosed: "01:20", jamResult: "01:30", linkSitus: "https://floridalottery.com/games/draw-games/pick-4", linkStreaming: "https://www.youtube.com/user/floridalottery", category: "USA" },
            { pasaran: "HUAHIN 01", jamBetclosed: "00:45", jamResult: "01:00", linkSitus: "https://huahinlottery.com/", linkStreaming: "https://www.youtube.com/@huahinlottery5727", category: "Thailand" },
            { pasaran: "BANGKOK 0130", jamBetclosed: "01:15", jamResult: "01:30", linkSitus: "https://bangkokpoolstoday.com/", linkStreaming: "", category: "Thailand" },
            { pasaran: "NEW YORK MIDDAY", jamBetclosed: "02:15", jamResult: "02:25", linkSitus: "https://nylottery.ny.gov/draw-game?game=win4", linkStreaming: "https://www.youtube.com/user/NewYorkLottery", category: "USA" },
            { pasaran: "CAROLINA DAY", jamBetclosed: "02:45", jamResult: "03:00", linkSitus: "https://www.wral.com/entertainment/lottery/", linkStreaming: "", category: "USA" },
            { pasaran: "BRUNEI 02", jamBetclosed: "02:30", jamResult: "02:45", linkSitus: "https://bruneipools.com/live-draw.html", linkStreaming: "", category: "Brunei" },
            { pasaran: "OREGON 03", jamBetclosed: "03:50", jamResult: "04:00", linkSitus: "https://www.oregonlottery.org/pick-4/winning-numbers/", linkStreaming: "", category: "USA" },
            { pasaran: "OREGON 06", jamBetclosed: "06:50", jamResult: "07:00", linkSitus: "https://www.oregonlottery.org/pick-4/winning-numbers/", linkStreaming: "", category: "USA" },
            { pasaran: "CALIFORNIA", jamBetclosed: "09:25", jamResult: "09:30", linkSitus: "http://www.calottery.com/play/draw-games/daily-4", linkStreaming: "", category: "USA" },
            { pasaran: "FLORIDA EVENING", jamBetclosed: "09:35", jamResult: "09:45", linkSitus: "https://floridalottery.com/games/draw-games/pick-4", linkStreaming: "https://www.youtube.com/user/floridalottery", category: "USA" },
            { pasaran: "OREGON 09", jamBetclosed: "09:50", jamResult: "10:00", linkSitus: "https://www.oregonlottery.org/pick-4/winning-numbers/", linkStreaming: "", category: "USA" },
            { pasaran: "BANGKOK 0930", jamBetclosed: "09:15", jamResult: "09:30", linkSitus: "https://bangkokpoolstoday.com/", linkStreaming: "", category: "Thailand" },
            { pasaran: "NEW YORK EVENING", jamBetclosed: "10:25", jamResult: "10:35", linkSitus: "https://nylottery.ny.gov/draw-game?game=win4", linkStreaming: "https://www.youtube.com/user/NewYorkLottery", category: "USA" },
            { pasaran: "KENTUCKY EVENING", jamBetclosed: "10:45", jamResult: "11:00", linkSitus: "https://www.kylottery.com/apps/draw_games/pick4/", linkStreaming: "", category: "USA" },
            { pasaran: "CAROLINA EVENING", jamBetclosed: "11:17", jamResult: "11:22", linkSitus: "http://www.wral.com/news/video/1075494/", linkStreaming: "", category: "USA" },
            { pasaran: "TOTO CAMBODIA", jamBetclosed: "10:45", jamResult: "11:00", linkSitus: "https://totocambodialive.com/", linkStreaming: "https://kick.com/totocambodia", category: "Cambodia" },
            { pasaran: "CHELSEA 11", jamBetclosed: "11:00", jamResult: "11:15", linkSitus: "https://chelseapools.co.uk/", linkStreaming: "", category: "UK" },
            { pasaran: "OREGON 12", jamBetclosed: "12:50", jamResult: "13:00", linkSitus: "https://www.oregonlottery.org/pick-4/winning-numbers/", linkStreaming: "", category: "USA" },
            { pasaran: "POIPET 12", jamBetclosed: "12:15", jamResult: "12:30", linkSitus: "https://poipetlottery.com/result", linkStreaming: "https://www.youtube.com/@poipetlottery70/featured", category: "Cambodia" },
            { pasaran: "BULLSEYE", jamBetclosed: "12:00", jamResult: "12:15", linkSitus: "https://mylotto.co.nz/results/bullseye", linkStreaming: "", category: "New Zealand" },
            { pasaran: "TOTO MACAU SIANG", jamBetclosed: "13:00", jamResult: "13:15", linkSitus: "http://totomacau-pools.us/", linkStreaming: "https://kick.com/live-ttm4d", category: "International" },
            { pasaran: "SYDNEY", jamBetclosed: "13:49", jamResult: "14:05", linkSitus: "https://sydneylottobaru.site/", linkStreaming: "https://kick.com/sydney-lotto-official", category: "Australia" },
            { pasaran: "JAKARTA 1400", jamBetclosed: "13:55", jamResult: "14:10", linkSitus: "https://jakartapool.com/", linkStreaming: "https://kick.com/studio-live-game", category: "Indonesia" },
            { pasaran: "BRUNEI 14", jamBetclosed: "14:30", jamResult: "14:45", linkSitus: "https://bruneipools.com/", linkStreaming: "", category: "Brunei" },
            { pasaran: "CHELSEA 15", jamBetclosed: "15:00", jamResult: "15:15", linkSitus: "https://chelseapools.co.uk/", linkStreaming: "", category: "UK" },
            { pasaran: "TOTOMACAU 5D SORE", jamBetclosed: "15:15", jamResult: "15:30", linkSitus: "http://totomacau-pools.us/", linkStreaming: "https://kick.com/studio-live-game", category: "International" },
            { pasaran: "POIPET 15", jamBetclosed: "15:15", jamResult: "15:30", linkSitus: "https://poipetlottery.com/", linkStreaming: "https://www.youtube.com/@poipetlottery70/featured", category: "Cambodia" },
            { pasaran: "TOTOMALI 1530", jamBetclosed: "15:15", jamResult: "15:30", linkSitus: "https://totomali.com/", linkStreaming: "https://www.youtube.com/@TotoMaliLive", category: "International" },
            { pasaran: "TOTO MACAU SORE", jamBetclosed: "16:00", jamResult: "16:15", linkSitus: "http://totomacau-pools.us/", linkStreaming: "https://kick.com/live-ttm4d", category: "International" },
            { pasaran: "HUAHIN 16", jamBetclosed: "16:15", jamResult: "16:30", linkSitus: "https://huahinlottery.com/", linkStreaming: "https://www.youtube.com/@huahinlottery5727", category: "Thailand" },
            { pasaran: "KING KONG4D SORE", jamBetclosed: "17:00", jamResult: "17:15", linkSitus: "https://kingkongpools.id/", linkStreaming: "https://kick.com/king-kong-pools", category: "Indonesia" },
            { pasaran: "SINGAPORE", jamBetclosed: "17:30", jamResult: "17:45", linkSitus: "https://online.singaporepools.com/en/lottery", linkStreaming: "", category: "Singapore" },
            { pasaran: "MAGNUM 4D", jamBetclosed: "18:10", jamResult: "18:40", linkSitus: "https://www.magnum4d.my/en", linkStreaming: "", category: "Malaysia" },
            { pasaran: "TOTO MACAU MALAM I", jamBetclosed: "19:00", jamResult: "19:15", linkSitus: "http://totomacau-pools.us/", linkStreaming: "https://kick.com/live-ttm4d", category: "International" },
            { pasaran: "CHELSEA 19", jamBetclosed: "19:00", jamResult: "19:15", linkSitus: "https://chelseapools.co.uk/", linkStreaming: "", category: "UK" },
            { pasaran: "POIPET 19", jamBetclosed: "19:30", jamResult: "19:45", linkSitus: "https://poipetlottery.com/", linkStreaming: "https://www.youtube.com/@poipetlottery70/featured", category: "Cambodia" },
            { pasaran: "PCSO", jamBetclosed: "19:50", jamResult: "20:10", linkSitus: "https://www.pcso.gov.ph/", linkStreaming: "", category: "Philippines" },
            { pasaran: "TOTOMALI 2030", jamBetclosed: "20:15", jamResult: "20:30", linkSitus: "https://totomali.com/", linkStreaming: "https://www.youtube.com/@TotoMaliLive", category: "International" },
            { pasaran: "HUAHIN 21", jamBetclosed: "20:45", jamResult: "21:00", linkSitus: "https://huahinlottery.com/", linkStreaming: "https://www.youtube.com/@huahinlottery5727", category: "Thailand" },
            { pasaran: "CHELSEA 21", jamBetclosed: "21:00", jamResult: "21:15", linkSitus: "https://chelseapools.co.uk/", linkStreaming: "", category: "UK" },
            { pasaran: "TOTO MACAU 5D MALAM", jamBetclosed: "21:15", jamResult: "21:30", linkSitus: "http://totomacau-pools.us/", linkStreaming: "https://kick.com/studio-live-game", category: "International" },
            { pasaran: "NEVADA", jamBetclosed: "21:15", jamResult: "21:30", linkSitus: "https://www.nevadalottery.us/", linkStreaming: "", category: "USA" },
            { pasaran: "BRUNEI 21", jamBetclosed: "21:30", jamResult: "21:45", linkSitus: "https://bruneipools.com/", linkStreaming: "", category: "Brunei" },
            { pasaran: "TOTO MACAU MALAM II", jamBetclosed: "22:00", jamResult: "22:15", linkSitus: "http://totomacau-pools.us/", linkStreaming: "https://kick.com/live-ttm4d", category: "International" },
            { pasaran: "POIPET 22", jamBetclosed: "22:30", jamResult: "22:45", linkSitus: "https://poipetlottery.com/", linkStreaming: "https://www.youtube.com/@poipetlottery70/featured", category: "Cambodia" },
            { pasaran: "HONGKONG", jamBetclosed: "22:59", jamResult: "23:15", linkSitus: "https://lottohongkong.fun/", linkStreaming: "https://kick.com/hongkong-lotto-official", category: "Hong Kong" },
            { pasaran: "TOTO MACAU MALAM III", jamBetclosed: "23:00", jamResult: "23:15", linkSitus: "http://totomacau-pools.us/", linkStreaming: "https://kick.com/live-ttm4d", category: "International" },
            { pasaran: "TOTOMALI 2330", jamBetclosed: "23:15", jamResult: "23:30", linkSitus: "https://totomali.com/", linkStreaming: "https://www.youtube.com/@TotoMaliLive", category: "International" },
            { pasaran: "JAKARTA 2330", jamBetclosed: "23:25", jamResult: "23:40", linkSitus: "https://jakartapool.com/", linkStreaming: "https://kick.com/studio-live-game", category: "Indonesia" },
            { pasaran: "KING KONG4D MALAM", jamBetclosed: "23:30", jamResult: "23:45", linkSitus: "https://kingkongpools.id/", linkStreaming: "https://kick.com/king-kong-pools", category: "Indonesia" }
        ];

        // Fixed Loop: Adds HOKIDRAW 00:00 to 23:00
        for (let i = 0; i < 24; i++) {
            const hour = i.toString().padStart(2, '0');
            scheduleData.push({
                pasaran: `HOKIDRAW ${hour}:00`,
                jamBetclosed: `${hour}:00`,
                jamResult: `${hour}:00`,
                linkSitus: "https://hokidraw.com/",
                linkStreaming: "https://kick.com/hokidrawlive",
                category: "Inggris"
            });
        }

        /* VARS */
        let soundOn = true, alarmOn = true, curFilter = 'all', vol = 0.7;
        let audioCtx = null, triggered = new Set();
        let alarmIntervalId = null; 
        let alarmTimeouts = []; 
        let alarmDuration = 30; // seconds

        /* LOGIC */
        function initAudio() {
            if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            return audioCtx;
        }

        /* --- ALARM ENGINE (AIR RAID SIREN) --- */
        function playAlarmTone(mode) {
            const context = initAudio();
            if (context.state === 'suspended') context.resume();
            const now = context.currentTime;
            const masterVol = vol;

            switch(mode) {
                case 'airraid':
                    const osc = context.createOscillator();
                    const gain = context.createGain();

                    osc.type = 'sawtooth'; 
                        
                    osc.frequency.setValueAtTime(800, now);
                    osc.frequency.exponentialRampToValueAtTime(100, now + 0.5);

                    gain.gain.setValueAtTime(0.001, now);
                    gain.gain.linearRampToValueAtTime(0.8 * masterVol, now + 0.05); 
                    gain.gain.exponentialRampToValueAtTime(0.001, now + 0.7); 

                    osc.connect(gain);
                    gain.connect(context.destination);

                    osc.start(now);
                    osc.stop(now + 0.7);
                    break;
            }
        }

        function playAlarm() {
            if(!soundOn || !alarmOn) return;
            
            if (alarmIntervalId) clearInterval(alarmIntervalId);

            triggered.add("main_loop");

            alarmIntervalId = setInterval(() => {
                if (!triggered.has("main_loop")) {
                    clearInterval(alarmIntervalId);
                    return;
                }
                playAlarmTone('airraid');
            }, 2500);
            
            alarmTimeouts.push(alarmIntervalId);
        }

        function stopAlarm() {
            triggered.clear(); 
            alarmTimeouts.forEach(interval => clearInterval(interval));
            alarmTimeouts = [];
        }

        function updateClock() {
            const d = new Date();
            document.getElementById('clock').innerText = d.toLocaleTimeString('en-GB');
        }
        setInterval(updateClock, 1000);

        function getStatus(s) {
            const n = new Date();
            const cur = n.getHours()*60 + n.getMinutes();
            const [bh,bm] = s.jamBetclosed.split(':').map(Number);
            const [rh,rm] = s.jamResult.split(':').map(Number);
            const r = rh*60+rm, bc = bh*60+bm;
            if(cur>=r) return 'passed';
            if(cur>=bc && cur<r) return 'active';
            return 'upcoming';
        }

        /* --- FUNGSI COPY (GENERATED DYNAMICALLY) --- */
        function copyToClipboard(text, btnElement) {
            const el = document.createElement('textarea');
            el.value = text;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);

            const originalText = btnElement.innerText;
            btnElement.innerText = "COPIED!";
            btnElement.style.color = "#0f0";
            
            setTimeout(() => {
                btnElement.innerText = originalText;
                btnElement.style.color = "";
            }, 1000);

            showToast("DATA COPIED TO CLIPBOARD");
        }

        /* --- DROP DOWN INIT --- */
        function initMarketDropdown() {
            const select = document.getElementById('market-select');
            scheduleData.forEach(item => {
                const option = document.createElement('option');
                option.value = item.pasaran; 
                option.innerText = item.pasaran; // Dropdown sederhana untuk filter cepat
                select.appendChild(option);
            });
        }

        /* --- FUNGSI LIVE GRID --- */
        function renderLiveSection() {
            const container = document.getElementById('live-grid-container');
            const wrapper = document.getElementById('live-section-wrapper');
            
            const liveMarkets = scheduleData.filter(s => getStatus(s) === 'active');
            
            if (liveMarkets.length > 0) {
                wrapper.style.display = 'block';
                container.innerHTML = '';

                liveMarkets.forEach(s => {
                    // Generate teks untuk copy secara dinamis
                    const fullText = `${s.pasaran} Tutup Pasaran Pukul ${s.jamBetclosed} WIB Dan Keluaran Nomor Result Pukul ${s.jamResult} WIB.`;
                    
                    const div = document.createElement('div');
                    div.className = `data-block active`; // Selalu pakai class active

                    // Tombol Streaming
                    let streamBtn = '';
                    if(s.linkStreaming) {
                        streamBtn = `<a href="${s.linkStreaming}" target="_blank" class="tech-btn btn-stream">WATCH LIVE</a>`;
                    }

                    div.innerHTML = `
                        <div class="block-header">
                            <span class="data-title">${s.pasaran}</span>
                            <span class="status-tag">LIVE_STREAM</span>
                        </div>
                        <div class="info-row"><span class="label">SECTOR:</span> <span class="value">${s.category}</span></div>
                        <div class="info-row"><span class="label">CUTOFF:</span> <span class="value">${s.jamBetclosed}</span></div>
                        <div class="info-row"><span class="label">RESULT:</span> <span class="value warn">${s.jamResult}</span></div>
                        <div class="data-actions">
                            ${s.linkSitus ? `<a href="${s.linkSitus}" target="_blank" class="tech-btn">WEB</a>` : ''}
                            ${streamBtn}
                            <button class="tech-btn btn-copy" onclick="copyToClipboard('${fullText}', this)">COPY</button>
                        </div>
                    `;
                    container.appendChild(div);
                });
            } else {
                wrapper.style.display = 'none';
            }
        }

        function applyMarketFilter() {
            const marketName = document.getElementById('market-select').value;
            const searchInput = document.getElementById('search-input');
            
            if (marketName !== 'all') {
                searchInput.value = marketName;
                renderSched(); 
            } else {
                searchInput.value = '';
                renderSched();
            }
        }

        function renderSched() {
            const grid = document.getElementById('grid');
            const term = document.getElementById('search-input').value.toLowerCase();
            grid.innerHTML = '';

            let filtered = scheduleData.filter(s => {
                if(curFilter!=='all' && getStatus(s)!==curFilter) return false;
                if(term && !s.pasaran.toLowerCase().includes(term)) return false;
                return true;
            });

            // Sort active first
            filtered.sort((a,b)=> {
                const sa = getStatus(a), sb = getStatus(b);
                if(sa==='active' && sb!=='active') return -1;
                if(sb==='active' && sa!=='active') return 1;
                const ta = a.jamResult.split(':').map(Number);
                const tb = b.jamResult.split(':').map(Number);
                return (ta[0]*60+ta[1]) - (tb[0]*60+tb[1]);
            });

            if(filtered.length === 0) {
                grid.innerHTML = '<div style="grid-column:1/-1; text-align:center; padding:5rem; color:#666;">NO DATA FOUND</div>';
            }

            filtered.forEach(s => {
                const st = getStatus(s);
                const div = document.createElement('div');
                div.className = `data-block ${st==='active'?'active':''}`;
                
                let stText = st.toUpperCase();
                if(st==='active') stText = 'LIVE_STREAM';

                // Generate Full Text untuk Copy
                const fullText = `${s.pasaran} Tutup Pasaran Pukul ${s.jamBetclosed} WIB Dan Keluaran Nomor Result Pukul ${s.jamResult} WIB.`;

                // Tombol Streaming
                let streamBtn = '';
                if(s.linkStreaming) {
                    streamBtn = `<a href="${s.linkStreaming}" target="_blank" class="tech-btn btn-stream">WATCH LIVE</a>`;
                }

                div.innerHTML = `
                    <div class="block-header">
                        <span class="data-title">${s.pasaran}</span>
                        <span class="status-tag">${stText}</span>
                    </div>
                    <div class="info-row"><span class="label">SECTOR:</span> <span class="value">${s.category}</span></div>
                    <div class="info-row"><span class="label">CUTOFF:</span> <span class="value">${s.jamBetclosed}</span></div>
                    <div class="info-row"><span class="label">OUTPUT:</span> <span class="value ${st==='active'?'warn':''}">${s.jamResult}</span></div>
                    <div class="data-actions">
                        ${s.linkSitus ? `<a href="${s.linkSitus}" target="_blank" class="tech-btn">WEB</a>` : ''}
                        ${streamBtn}
                        <button class="tech-btn btn-copy" onclick="copyToClipboard('${fullText}', this)">COPY</button>
                    </div>
                `;
                grid.appendChild(div);
            });
            updateStats();
        }

        function updateStats() {
            let act=0, up=0;
            scheduleData.forEach(s => {
                const st = getStatus(s);
                if(st==='active') act++; else if(st==='upcoming') up++;
            });
            document.getElementById('stat-total').innerText = scheduleData.length;
            document.getElementById('stat-active').innerText = act;
            document.getElementById('stat-pending').innerText = up;
        }

        function switchTab(id, btn) {
            document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
            btn.classList.add('active');
            ['schedule','stats','settings'].forEach(t => {
                const el = document.getElementById(t+'-tab');
                el.style.display = (t===id)?'block':'none';
            });
        }

        function setFilter(f, btn) {
            curFilter = f;
            document.querySelectorAll('.mech-btn').forEach(b=>b.classList.remove('active'));
            btn.classList.add('active');
            renderSched();
        }

        function toggleSound() {
            soundOn = !soundOn;
            const i = document.getElementById('icon-sound');
            i.className = soundOn ? 'fas fa-volume-up' : 'fas fa-volume-mute';
            showToast(soundOn ? 'AUDIO_ON' : 'AUDIO_MUTED');
            if(!soundOn) stopAlarm();
        }

        function toggleAlarm() {
            alarmOn = !alarmOn;
            const i = document.getElementById('icon-alarm');
            i.className = alarmOn ? 'fas fa-bell' : 'fas fa-bell-slash';
            showToast(alarmOn ? 'ALARM_ARMED' : 'ALARM_DISARMED');
            if(!alarmOn) stopAlarm();
        }

        function testAlarm() {
            playAlarm();
            document.getElementById('modal-msg').innerText = "TEST SIGNAL INITIATED";
            document.getElementById('modal').style.display = 'flex';
        }

        function toggleVol() {
            document.getElementById('vol-panel').classList.toggle('show');
        }

        function updateVol() {
            vol = document.getElementById('vol-slider').value/100;
            document.getElementById('vol-val').innerText = document.getElementById('vol-slider').value+'%';
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            document.getElementById('toast-msg').innerText = msg;
            t.classList.add('show');
            setTimeout(()=>t.classList.remove('show'), 3000);
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
            stopAlarm();
        }

        function remind(n) { showToast(`LOG_ENTRY: ${n}`); }

        /* --- BET CLOSED MONITOR LOGIC --- */
        function updateBetClosedMonitor() {
            const now = new Date();
            const cur = now.getHours()*60 + now.getMinutes();
            
            const activeMarket = scheduleData.find(s => {
                const [bh, bm] = s.jamBetclosed.split(':').map(Number);
                const [rh, rm] = s.jamResult.split(':').map(Number);
                const bc = bh*60+bm, r = rh*60+rm;
                return cur >= bc && cur < r;
            });

            const statusText = document.getElementById('bc-status-text');
            const displayArea = document.getElementById('bc-display-area');

            if (activeMarket) {
                statusText.innerHTML = '<span class="status-closing" style="color:var(--ind-warn);">BET CLOSED ACTIVE</span>';
                
                displayArea.innerHTML = `
                    <div>
                        <div style="font-size:0.7rem; color:#888; margin-bottom:2px;">CURRENT MARKET:</div>
                        <div class="betclosed-market">${activeMarket.pasaran}</div>
                    </div>
                `;
            } else {
                statusText.innerHTML = 'STANDBY';
                displayArea.innerHTML = '<div class="betclosed-idle">WAITING FOR BET CLOSED...</div>';
            }
        }

        /* CHECK LOOP */
        setInterval(() => {
            if(!alarmOn) return;
            
            // 1. Update Bet Closed Monitor
            updateBetClosedMonitor();

            // 2. Update Live Section (Real-time)
            renderLiveSection();

            // 3. Logic Alarm Result
            const now = new Date();
            const cur = now.getHours()*60 + now.getMinutes();
            
            scheduleData.forEach(s => {
                const [rh, rm] = s.jamResult.split(':').map(Number);
                const r = rh*60+rm;
                
                // Check exact match of hours/minutes and start of second
                if(cur===r && now.getSeconds()===0 && !triggered.has(s.pasaran)) {
                    triggered.add(s.pasaran);
                    triggered.add("main_loop"); 
                    playAlarm(); 
                    document.getElementById('modal-msg').innerText = `DATA_RECEIVED: ${s.pasaran}`;
                    document.getElementById('modal').style.display = 'flex';
                    
                    // Hentikan loop alarm setelah alarmDuration
                    setTimeout(() => {
                        triggered.delete("main_loop");
                        stopAlarm();
                    }, alarmDuration * 1000);
                    
                    setTimeout(()=>triggered.delete(s.pasaran), 60000);
                }
            });
        }, 1000);

        /* LISTENERS */
        document.getElementById('search-input').addEventListener('input', renderSched);
        
        // INIT
        initMarketDropdown();
        updateClock(); renderSched();
    </script>
</body>
</html>
